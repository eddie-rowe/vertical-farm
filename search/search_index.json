{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Vertical Farm Documentation","text":"<p>Full-stack IoT vertical farm management platform: Next.js 15, FastAPI, Supabase.</p>"},{"location":"#documentation","title":"Documentation","text":"Section Purpose Quickstart 5-minute setup Contributing New developer guide Architecture System design overview Development Contributing, testing, debugging Guides Integrations and troubleshooting Reference API and database specs Operations Deployment"},{"location":"#project-structure","title":"Project Structure","text":"<pre><code>vertical-farm/\n\u251c\u2500\u2500 frontend/     # Next.js 15 + React 19\n\u251c\u2500\u2500 backend/      # FastAPI (integrations only)\n\u251c\u2500\u2500 supabase/     # Migrations and functions\n\u251c\u2500\u2500 scripts/      # Automation\n\u2514\u2500\u2500 docs/         # Documentation\n</code></pre>"},{"location":"architecture/","title":"Architecture Overview","text":"<p>Welcome to the VerticalFarm OS architecture documentation. This guide provides a high-level overview of the system architecture, helping new developers understand how all the pieces fit together.</p>"},{"location":"architecture/#what-is-verticalfarm-os","title":"\ud83c\udf31 What is VerticalFarm OS?","text":"<p>VerticalFarm OS is a comprehensive vertical farming management platform that combines modern web technologies with IoT device control to manage indoor farming operations. The system handles everything from farm layout management to automated environmental control and real-time monitoring.</p>"},{"location":"architecture/#system-architecture","title":"\ud83c\udfd7\ufe0f System Architecture","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                         Client Layer                             \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502  Next.js 15 (React 19)  \u2502  TypeScript  \u2502  Tailwind CSS          \u2502\n\u2502  Server Components       \u2502  Service Layer \u2502  shadcn/ui           \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                 \u2502\n                 \u251c\u2500\u2500 API Calls \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                 \u2502                        \u2502\n                 \u25bc                        \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502    FastAPI Backend      \u2502    \u2502   Supabase Platform     \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524    \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502  Python 3.13            \u2502    \u2502  PostgreSQL Database    \u2502\n\u2502  JWT Authentication     \u2502    \u2502  Row Level Security     \u2502\n\u2502  Business Logic         \u2502    \u2502  Realtime Subscriptions \u2502\n\u2502  Device Integration     \u2502    \u2502  Authentication         \u2502\n\u2502  Monitoring (Datadog)   \u2502    \u2502  Edge Functions         \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                 \u2502                        \u2502\n                 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                          \u2502\n                 \u25bc        \u25bc        \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502              Edge Computing Layer                      \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502  Cloudflare Workers  \u2502  Supabase Edge Functions       \u2502\n\u2502  \u2022 Caching          \u2502  \u2022 Background Tasks             \u2502\n\u2502  \u2022 IoT Processing   \u2502  \u2022 Scheduled Jobs               \u2502\n\u2502  \u2022 API Gateway      \u2502  \u2022 Database Operations          \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"architecture/#core-components","title":"\ud83c\udfaf Core Components","text":""},{"location":"architecture/#frontend-nextjs-15","title":"Frontend (Next.js 15)","text":"<p>The user interface layer built with cutting-edge React technologies: - Server Components for optimal performance - Service Layer Architecture for data management - Real-time Updates via Supabase subscriptions - Responsive Design with Tailwind CSS and shadcn/ui</p>"},{"location":"architecture/#backend-fastapi","title":"Backend (FastAPI)","text":"<p>The business logic layer handling complex operations: - RESTful API with automatic documentation - JWT Authentication for secure access - Device Management for IoT integration - Complex Business Logic and validations</p>"},{"location":"architecture/#database-supabasepostgresql","title":"Database (Supabase/PostgreSQL)","text":"<p>The data persistence and real-time layer: - PostgreSQL for reliable data storage - Row Level Security (RLS) for data isolation - Real-time Subscriptions for live updates - Edge Functions for serverless compute</p>"},{"location":"architecture/#edge-computing","title":"Edge Computing","text":"<p>Distributed computing for performance and scalability: - Cloudflare Workers for global caching and IoT processing - Supabase Edge Functions for database-heavy operations - Background Jobs for scheduled automation</p>"},{"location":"architecture/#data-flow","title":"\ud83d\udd04 Data Flow","text":""},{"location":"architecture/#1-user-interaction-flow","title":"1. User Interaction Flow","text":"<pre><code>User \u2192 Next.js Frontend \u2192 Service Layer \u2192 API/Database\n                              \u2193\n                        Decision Point:\n                    Simple Read?  \u2192 Supabase Direct\n                    Complex Logic? \u2192 FastAPI Backend\n</code></pre>"},{"location":"architecture/#2-real-time-updates","title":"2. Real-time Updates","text":"<pre><code>Database Change \u2192 Supabase Realtime \u2192 WebSocket \u2192 Frontend Update\n</code></pre>"},{"location":"architecture/#3-device-control","title":"3. Device Control","text":"<pre><code>User Action \u2192 Frontend \u2192 FastAPI \u2192 Device Assignment \u2192 IoT Device\n                            \u2193\n                     Supabase (Log &amp; State)\n</code></pre>"},{"location":"architecture/#farm-hierarchy","title":"\ud83c\udfe2 Farm Hierarchy","text":"<p>The system models a complete vertical farm structure:</p> <pre><code>Farm\n\u251c\u2500\u2500 Rows (physical rows in the facility)\n\u2502   \u251c\u2500\u2500 Racks (vertical growing structures)\n\u2502   \u2502   \u251c\u2500\u2500 Shelves (individual growing levels)\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 Schedules (what's growing)\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 Devices (sensors, lights, pumps)\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 Automation Rules\n</code></pre>"},{"location":"architecture/#security-model","title":"\ud83d\udd10 Security Model","text":""},{"location":"architecture/#multi-layer-security","title":"Multi-Layer Security","text":"<ol> <li>Authentication: Supabase Auth with JWT tokens</li> <li>Authorization: Role-based access control (RBAC)</li> <li>Data Isolation: Row Level Security per farm/user</li> <li>API Security: Token validation on all endpoints</li> <li>Input Validation: Comprehensive sanitization</li> </ol>"},{"location":"architecture/#user-roles","title":"User Roles","text":"<ul> <li><code>admin</code> - Full system access</li> <li><code>farm_manager</code> - Farm-level management</li> <li><code>operator</code> - Day-to-day operations</li> <li><code>viewer</code> - Read-only access</li> </ul>"},{"location":"architecture/#key-features","title":"\ud83d\ude80 Key Features","text":""},{"location":"architecture/#farm-management","title":"Farm Management","text":"<ul> <li>Visual farm layout editor</li> <li>Hierarchical structure management</li> <li>Device assignment and control</li> <li>Real-time environmental monitoring</li> </ul>"},{"location":"architecture/#automation-system","title":"Automation System","text":"<ul> <li>Schedule-based automation</li> <li>Sensor-triggered rules</li> <li>Multi-tenant isolation</li> <li>Retry and failure handling</li> </ul>"},{"location":"architecture/#monitoring-analytics","title":"Monitoring &amp; Analytics","text":"<ul> <li>Real-time sensor data</li> <li>Environmental alerts</li> <li>Performance metrics</li> <li>Historical analysis</li> </ul>"},{"location":"architecture/#layer-overlay-system","title":"Layer Overlay System","text":"<p>A unique visual architecture allowing multiple information layers: - Device Layer - Equipment status and control - Monitoring Layer - Environmental data - Automation Layer - Rules and schedules - Analytics Layer - Performance insights</p>"},{"location":"architecture/#development-stack","title":"\ud83d\udee0\ufe0f Development Stack","text":""},{"location":"architecture/#frontend-technologies","title":"Frontend Technologies","text":"<ul> <li>Next.js 15 (App Router)</li> <li>React 19</li> <li>TypeScript</li> <li>Tailwind CSS</li> <li>shadcn/ui components</li> <li>Supabase Client SDK</li> </ul>"},{"location":"architecture/#backend-technologies","title":"Backend Technologies","text":"<ul> <li>FastAPI (Python 3.13)</li> <li>Pydantic for validation</li> <li>JWT for authentication</li> <li>Docker for containerization</li> <li>Datadog for monitoring</li> </ul>"},{"location":"architecture/#database-infrastructure","title":"Database &amp; Infrastructure","text":"<ul> <li>PostgreSQL (via Supabase)</li> <li>Cloudflare Workers</li> <li>GitHub Actions (CI/CD)</li> <li>Docker Compose</li> </ul>"},{"location":"architecture/#project-structure","title":"\ud83d\udcc1 Project Structure","text":"<pre><code>vertical-farm/\n\u251c\u2500\u2500 frontend/          # Next.js application\n\u2502   \u251c\u2500\u2500 src/\n\u2502   \u2502   \u251c\u2500\u2500 app/      # App Router pages\n\u2502   \u2502   \u251c\u2500\u2500 components/   # React components\n\u2502   \u2502   \u251c\u2500\u2500 services/     # Service layer (CRITICAL)\n\u2502   \u2502   \u251c\u2500\u2500 hooks/        # Custom React hooks\n\u2502   \u2502   \u2514\u2500\u2500 types/        # TypeScript definitions\n\u2502   \u2514\u2500\u2500 ...\n\u251c\u2500\u2500 backend/           # FastAPI application\n\u2502   \u251c\u2500\u2500 app/\n\u2502   \u2502   \u251c\u2500\u2500 api/      # API endpoints\n\u2502   \u2502   \u251c\u2500\u2500 models/   # Data models\n\u2502   \u2502   \u251c\u2500\u2500 services/ # Business logic\n\u2502   \u2502   \u2514\u2500\u2500 crud/     # Database operations\n\u2502   \u2514\u2500\u2500 ...\n\u251c\u2500\u2500 supabase/         # Database migrations\n\u251c\u2500\u2500 cloudflare/       # Edge workers\n\u2514\u2500\u2500 docs/            # Documentation\n</code></pre>"},{"location":"architecture/#getting-started","title":"\ud83c\udf93 Getting Started","text":""},{"location":"architecture/#for-all-developers","title":"For All Developers","text":"<ol> <li>Read CLAUDE.md for coding standards and service layer patterns</li> <li>Understand Database Schema</li> <li>Review API Endpoints</li> <li>Check Contributing Guide</li> </ol>"},{"location":"architecture/#performance-considerations","title":"\u26a1 Performance Considerations","text":"<ul> <li>Server Components by Default - Minimal client-side JavaScript</li> <li>Service Layer Caching - Intelligent data caching</li> <li>Edge Computing - Global content delivery</li> <li>Database Optimization - Indexed queries and views</li> <li>Real-time Efficiency - Selective subscriptions</li> </ul>"},{"location":"architecture/#next-steps","title":"\ud83d\udd04 Next Steps","text":"<p>Now that you understand the high-level architecture:</p> <ol> <li>Set up your development environment - See Quickstart Guide</li> <li>Explore the codebase - Follow the Project Structure section above</li> <li>Start contributing - Check Development Guide</li> </ol>"},{"location":"architecture/#further-reading","title":"\ud83d\udcda Further Reading","text":"<ul> <li>API Documentation - API Reference</li> <li>Database Schema - Database Design</li> <li>Deployment Guide - Deployment Documentation</li> <li>Coding Standards - CLAUDE.md</li> </ul> <p>This overview provides the foundation for understanding VerticalFarm OS. For detailed technical documentation, explore the reference materials linked throughout this guide.</p>"},{"location":"quickstart/","title":"Quickstart Guide","text":"<p>Get the Vertical Farm platform running locally in 5 minutes.</p>"},{"location":"quickstart/#goal","title":"\ud83c\udfaf Goal","text":"<p>By the end of this guide, you'll have: - \u2705 The complete application stack running locally - \u2705 Frontend at http://localhost:3000 - \u2705 Backend API at http://localhost:8000 - \u2705 Local Supabase database with Studio UI - \u2705 Ready to develop without cloud dependencies</p>"},{"location":"quickstart/#quick-start-with-supabase-cli-recommended","title":"\ud83d\ude80 Quick Start with Supabase CLI (Recommended)","text":"<p>Prerequisites: Docker, Supabase CLI, and Git installed</p> <pre><code># 1. Clone the repository\ngit clone https://github.com/eddie-rowe/vertical-farm.git\ncd vertical-farm\n\n# 2. Start Supabase (local database + auth + realtime)\nsupabase start\n\n# 3. Run the setup script\nchmod +x scripts/setup-local-dev.sh\n./scripts/setup-local-dev.sh\n\n# 4. Access everything\n# Frontend: http://localhost:3000\n# Backend API: http://localhost:8000\n# API Docs: http://localhost:8000/docs\n# Supabase Studio: http://localhost:54323\n</code></pre> <p>That's it! \ud83c\udf89 You now have a complete local development environment.</p>"},{"location":"quickstart/#option-2-manual-setup","title":"\ud83d\udee0\ufe0f Option 2: Manual Setup","text":"<p>Prerequisites: Node.js 18+, Python 3.13+, Supabase CLI</p> <pre><code># 1. Clone the repository\ngit clone https://github.com/eddie-rowe/vertical-farm.git\ncd vertical-farm\n\n# 2. Start Supabase (Terminal 1)\nsupabase start\n# Note the anon key and service_role key from the output\n\n# 3. Set up environment variables\ncp .env.example .env.local\n# Edit .env.local with the keys from supabase status\n\n# 4. Start the backend (Terminal 2)\ncd backend\npip install -r requirements.txt\nuvicorn app.main:app --reload --host 0.0.0.0 --port 8000\n\n# 5. Start the frontend (Terminal 3)  \ncd frontend\nnpm install\nnpm run dev\n</code></pre>"},{"location":"quickstart/#whats-running","title":"\ud83c\udf10 What's Running?","text":"Service URL Description Frontend http://localhost:3000 Next.js 15 React application Backend API http://localhost:8000 FastAPI Python backend API Docs http://localhost:8000/docs Interactive API documentation Supabase Studio http://localhost:54323 Database management UI Supabase API http://localhost:54321 Local Supabase REST API Inbucket Email http://localhost:54324 Email testing interface"},{"location":"quickstart/#quick-test","title":"\ud83e\uddea Quick Test","text":"<p>Verify everything works:</p> <ol> <li>Visit Frontend: http://localhost:3000</li> <li>Check API Health: http://localhost:8000/health</li> <li>Browse API Docs: http://localhost:8000/docs</li> </ol> <p>You should see the Vertical Farm dashboard and be able to interact with the API!</p>"},{"location":"quickstart/#environment-variables","title":"\ud83d\udddd\ufe0f Environment Variables","text":"<p>The Supabase CLI automatically generates all necessary keys for local development:</p> <pre><code># Get your local credentials\nsupabase status\n\n# This will show:\n# API URL: http://localhost:54321          # Use for SUPABASE_URL\n# anon key: eyJ...                         # Use for SUPABASE_ANON_KEY  \n# service_role key: eyJ...                 # Use for SUPABASE_SERVICE_KEY\n</code></pre> <p>Your <code>.env.local</code> should contain: <pre><code># Frontend\nNEXT_PUBLIC_SUPABASE_URL=http://localhost:54321\nNEXT_PUBLIC_SUPABASE_ANON_KEY=your_anon_key_from_status\n\n# Backend  \nSUPABASE_URL=http://localhost:54321\nSUPABASE_SERVICE_KEY=your_service_role_key_from_status\n</code></pre></p> <p>\ud83d\udca1 Note: The setup script handles this automatically!</p>"},{"location":"quickstart/#login-to-application","title":"Login to application","text":"<ol> <li>Visit http://localhost:3000/login</li> <li>Two test users are available:</li> </ol> User Email Password Purpose Seeded <code>seeded@test.dev</code> <code>password123</code> Has sample data (farms, grows, devices) Blank <code>blank@test.dev</code> <code>password123</code> Empty state (profile only) <p>Use different browser sessions or incognito to switch between users.</p>"},{"location":"quickstart/#next-steps","title":"\ud83d\udea6 Next Steps","text":"<p>Now that it's running:</p> <ul> <li>\ud83c\udfd7\ufe0f Understand the Architecture \u2192 Architecture Overview</li> <li>\ud83d\udcda Learn about features \u2192 Guides</li> <li>\ud83d\udee0\ufe0f Start contributing \u2192 Development Guide</li> <li>\ud83d\udcd6 Coding standards \u2192 CLAUDE.md</li> </ul>"},{"location":"quickstart/#troubleshooting","title":"\u2753 Troubleshooting","text":"<p>Supabase won't start? <pre><code># Check if ports are in use\nlsof -i :54321  # Supabase API\nlsof -i :54322  # PostgreSQL\n\n# Stop and clean up\nsupabase stop\nsupabase db reset  # Warning: This deletes all data!\nsupabase start\n</code></pre></p> <p>Port conflicts? <pre><code># For app services\ndocker-compose -f docker-compose-with-supabase-cli.yml down\ndocker-compose -f docker-compose-with-supabase-cli.yml up -d\n\n# Or change ports in manual setup:\nuvicorn app.main:app --port 8080  # Backend on 8080\nnpm run dev -- --port 3001        # Frontend on 3001\n</code></pre></p> <p>Database connection issues? <pre><code># Check Supabase is running\nsupabase status\n\n# View Supabase logs\nsupabase logs\n\n# Restart everything\nsupabase stop\nsupabase start\n./scripts/setup-local-dev.sh\n</code></pre></p> <p>Still stuck? Check the Troubleshooting Guide or open an issue on GitHub.</p> <p>\ud83c\udf89 Success! You now have a working Vertical Farm platform. Ready to explore?</p>"},{"location":"development/","title":"Development","text":""},{"location":"development/#guides","title":"Guides","text":"Guide Purpose Standard Dev Flow Step-by-step development workflow Contributing How to contribute Coding Standards Style guide and patterns Testing Test strategy Docker Container workflow Database Schema management Debugging Troubleshooting techniques"},{"location":"development/#quick-start","title":"Quick Start","text":"<pre><code>make up          # Start development\nmake test-all    # Run all tests\nmake logs        # View logs\n</code></pre>"},{"location":"development/#technology","title":"Technology","text":"Layer Stack Frontend Next.js 15, React 19, TypeScript Backend FastAPI, Python 3.13 Database PostgreSQL via Supabase Testing Jest, Playwright, pytest"},{"location":"development/#critical-rules","title":"Critical Rules","text":"<p>See CLAUDE.md for complete standards. Key rules:</p> <ol> <li>Service layer required - All data through <code>services/domain/*</code></li> <li>RLS mandatory - Row Level Security on all tables</li> <li>Type everything - No <code>any</code> types</li> </ol>"},{"location":"development/#quality-gates","title":"Quality Gates","text":"<p>All code must pass: - Linting (ESLint, Black) - Type checking (TypeScript, mypy) - Unit tests (&gt;80% coverage) - Code review (1+ approval)</p>"},{"location":"development/#related","title":"Related","text":"<ul> <li>API Reference - Endpoint docs</li> <li>Deployment - Production guide</li> <li>New Developer - Onboarding</li> </ul>"},{"location":"development/coding-standards/","title":"Coding Standards &amp; Style Guide","text":"<p>Critical patterns (service layer, RLS, imports) are in CLAUDE.md</p> <p>This document covers design tokens, component patterns, and code style details.</p>"},{"location":"development/coding-standards/#design-system-overview","title":"\ud83c\udfa8 Design System Overview","text":"<p>Our design system provides consistency across the entire application through: - Design Tokens: Standardized spacing, colors, typography - Utility Classes: Reusable styling patterns - Component Library: Type-safe, accessible components - Mobile-First: Responsive design approach</p>"},{"location":"development/coding-standards/#design-tokens","title":"\ud83d\udcd0 Design Tokens","text":""},{"location":"development/coding-standards/#core-tokens","title":"Core Tokens","text":"<p>Located in <code>frontend/src/app/globals.css</code>:</p> <pre><code>/* Farm-specific Design Tokens */\n--spacing-plant: 0.75rem;      /* Plant-level spacing */\n--spacing-row: 1.5rem;          /* Row-level spacing */\n--spacing-rack: 2rem;           /* Rack-level spacing */\n--spacing-shelf: 1rem;          /* Shelf-level spacing */\n--spacing-sensor: 0.5rem;       /* Sensor spacing */\n\n/* Component Sizes */\n--size-plant-icon: 1.5rem;\n--size-sensor-icon: 1.25rem;\n--size-control-btn: 2.5rem;\n--size-status-indicator: 0.5rem;\n\n/* Animation Timing */\n--duration-fast: 150ms;\n--duration-normal: 250ms;\n--duration-slow: 350ms;\n--duration-pulse: 2s;\n\n/* Easing Functions */\n--ease-farm: cubic-bezier(0.4, 0, 0.2, 1);\n--ease-gentle: cubic-bezier(0.25, 0.46, 0.45, 0.94);\n--ease-bounce: cubic-bezier(0.68, -0.55, 0.265, 1.55);\n\n/* Typography */\n--font-size-plant-label: 0.75rem;\n--font-size-sensor-value: 1.125rem;\n--font-size-farm-title: 1.5rem;\n--font-size-control-label: 0.875rem;\n\n/* Z-Index Layers */\n--z-index-farm-overlay: 10;\n--z-index-sensor-popup: 20;\n--z-index-control-panel: 30;\n--z-index-modal: 40;\n\n/* Form &amp; Input Tokens */\n--input-height-sm: 2rem;\n--input-height-md: 2.5rem;\n--input-height-lg: 3rem;\n--validation-success: #10b981;\n--validation-warning: #f59e0b;\n--validation-error: #ef4444;\n\n/* Mobile Touch Targets */\n--touch-target-min: 44px;\n--touch-spacing: 12px;\n</code></pre>"},{"location":"development/coding-standards/#frontend-standards-nextjs-15-react-19","title":"\ud83c\udfaf Frontend Standards (Next.js 15 / React 19)","text":""},{"location":"development/coding-standards/#component-architecture","title":"Component Architecture","text":""},{"location":"development/coding-standards/#server-vs-client-components","title":"Server vs Client Components","text":"<pre><code>// DEFAULT: Server Component (no 'use client')\nexport default async function FarmDashboard({ farmId }: Props) {\n  // Can fetch data directly\n  const farms = await farmService.getFarmsByUser(userId)\n  return &lt;FarmList farms={farms} /&gt;\n}\n\n// Client Component (interactive features)\n'use client'\nexport function FarmControls({ farm }: Props) {\n  const [optimisticState, setOptimisticState] = useOptimistic(farm.state)\n  // Handle user interactions\n}\n</code></pre>"},{"location":"development/coding-standards/#component-organization","title":"Component Organization","text":"<pre><code>components/\n\u251c\u2500\u2500 features/                  # Domain-specific components\n\u2502   \u251c\u2500\u2500 agriculture/          # Farm management\n\u2502   \u2502   \u251c\u2500\u2500 FarmCard.tsx\n\u2502   \u2502   \u251c\u2500\u2500 PlantMonitor.tsx\n\u2502   \u2502   \u2514\u2500\u2500 HarvestSchedule.tsx\n\u2502   \u251c\u2500\u2500 automation/           # Device control\n\u2502   \u2502   \u251c\u2500\u2500 DeviceControl.tsx\n\u2502   \u2502   \u251c\u2500\u2500 SensorPanel.tsx\n\u2502   \u2502   \u2514\u2500\u2500 AutomationRules.tsx\n\u2502   \u2514\u2500\u2500 business/             # Analytics\n\u2502       \u251c\u2500\u2500 YieldChart.tsx\n\u2502       \u2514\u2500\u2500 CostAnalysis.tsx\n\u251c\u2500\u2500 ui/                       # Reusable UI components\n\u2502   \u251c\u2500\u2500 Button.tsx\n\u2502   \u251c\u2500\u2500 Card.tsx\n\u2502   \u2514\u2500\u2500 Modal.tsx\n\u2514\u2500\u2500 layout/                   # Layout components\n    \u251c\u2500\u2500 Header.tsx\n    \u251c\u2500\u2500 Sidebar.tsx\n    \u2514\u2500\u2500 Footer.tsx\n</code></pre>"},{"location":"development/coding-standards/#styling-patterns","title":"Styling Patterns","text":""},{"location":"development/coding-standards/#utility-classes","title":"Utility Classes","text":"<pre><code>// Farm Hierarchy Gradients\n&lt;div className=\"gradient-farm\"&gt;     {/* Blue gradient for farms */}\n&lt;div className=\"gradient-row\"&gt;      {/* Green gradient for rows */}\n&lt;div className=\"gradient-rack\"&gt;     {/* Yellow gradient for racks */}\n&lt;div className=\"gradient-shelf\"&gt;    {/* Purple gradient for shelves */}\n\n// Typography Utilities\n&lt;h1 className=\"text-farm-title\"&gt;Farm Dashboard&lt;/h1&gt;\n&lt;span className=\"text-sensor-value\"&gt;24.5\u00b0C&lt;/span&gt;\n&lt;label className=\"text-control-label\"&gt;Enable Automation&lt;/label&gt;\n&lt;small className=\"text-plant-label\"&gt;Planted: 2024-01-15&lt;/small&gt;\n\n// State Patterns\n&lt;div className=\"state-active\"&gt;      {/* Green ring, active state */}\n&lt;div className=\"state-maintenance\"&gt; {/* Amber ring, maintenance */}\n&lt;div className=\"state-offline\"&gt;     {/* Red ring, offline */}\n&lt;div className=\"state-growing\"&gt;     {/* Pulsing animation */}\n\n// Component Utilities\n&lt;button className=\"farm-control-btn\"&gt;Control&lt;/button&gt;\n&lt;div className=\"plant-card\"&gt;Plant Information&lt;/div&gt;\n&lt;div className=\"sensor-panel\"&gt;Sensor Data&lt;/div&gt;\n&lt;div className=\"farm-grid\"&gt;Grid Layout&lt;/div&gt;\n&lt;div className=\"rack-layout\"&gt;Rack Structure&lt;/div&gt;\n</code></pre>"},{"location":"development/coding-standards/#component-styling-with-cva","title":"Component Styling with CVA","text":"<pre><code>import { cva, type VariantProps } from 'class-variance-authority'\n\nconst buttonVariants = cva(\n  'farm-control-btn transition-all duration-normal ease-farm',\n  {\n    variants: {\n      variant: {\n        default: 'bg-white text-gray-900',\n        primary: 'gradient-farm text-white',\n        maintenance: 'state-maintenance',\n        offline: 'state-offline',\n        growing: 'state-growing animate-pulse-slow'\n      },\n      size: {\n        sm: 'h-8 px-3 text-sm',\n        default: 'h-10 px-4',\n        lg: 'h-12 px-6 text-lg touch-target'\n      }\n    },\n    defaultVariants: {\n      variant: 'default',\n      size: 'default'\n    }\n  }\n)\n\nexport interface ButtonProps \n  extends React.ButtonHTMLAttributes&lt;HTMLButtonElement&gt;,\n    VariantProps&lt;typeof buttonVariants&gt; {\n  icon?: React.ReactNode\n}\n\nexport const FarmControlButton = forwardRef&lt;HTMLButtonElement, ButtonProps&gt;(\n  ({ className, variant, size, icon, children, ...props }, ref) =&gt; {\n    return (\n      &lt;button\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      &gt;\n        {icon &amp;&amp; &lt;span className=\"mr-2\"&gt;{icon}&lt;/span&gt;}\n        {children}\n      &lt;/button&gt;\n    )\n  }\n)\n</code></pre>"},{"location":"development/coding-standards/#form-components","title":"Form Components","text":""},{"location":"development/coding-standards/#input-component","title":"Input Component","text":"<pre><code>&lt;FarmInput\n  label=\"Plant Name\"\n  placeholder=\"Enter plant name...\"\n  icon={&lt;Leaf className=\"h-4 w-4\" /&gt;}\n  helpText=\"Unique identifier for this plant\"\n  errorText=\"This field is required\"\n  validation=\"error\"\n  inputSize=\"lg\"\n/&gt;\n</code></pre>"},{"location":"development/coding-standards/#select-component","title":"Select Component","text":"<pre><code>&lt;FarmSelect\n  label=\"Plant Species\"\n  options={[\n    { value: \"lettuce\", label: \"Lettuce (Lactuca sativa)\" },\n    { value: \"spinach\", label: \"Spinach (Spinacia oleracea)\" }\n  ]}\n  placeholder=\"Select species...\"\n  helpText=\"Choose from available plant species\"\n/&gt;\n</code></pre>"},{"location":"development/coding-standards/#range-slider","title":"Range Slider","text":"<pre><code>&lt;FarmRangeSlider\n  label=\"pH Level\"\n  min={5.0}\n  max={7.0}\n  step={0.1}\n  value={6.2}\n  unit=\"\"\n  markPoints={[\n    { value: 5.5, label: \"5.5\" },\n    { value: 6.0, label: \"6.0\" },\n    { value: 6.5, label: \"6.5\" }\n  ]}\n  helpText=\"Optimal pH for nutrient uptake\"\n/&gt;\n</code></pre>"},{"location":"development/coding-standards/#performance-optimization","title":"Performance Optimization","text":"<pre><code>// Use React 19's \"use cache\" directive\nimport { cache } from 'react'\n\nconst getCachedFarmData = cache(async (farmId: string) =&gt; {\n  'use cache'\n  cacheLife: 3600 // Cache for 1 hour\n\n  const farms = await farmService.getFarmById(farmId)\n  return farms\n})\n\n// Optimistic updates with useOptimistic\nfunction DeviceToggle({ device }) {\n  const [optimisticState, setOptimisticState] = useOptimistic(\n    device.isOn,\n    (currentState, newState) =&gt; newState\n  )\n\n  async function toggle() {\n    setOptimisticState(!optimisticState)\n    await deviceService.toggle(device.id)\n  }\n}\n</code></pre>"},{"location":"development/coding-standards/#backend-standards-fastapi-python-313","title":"\ud83d\udc0d Backend Standards (FastAPI / Python 3.13)","text":""},{"location":"development/coding-standards/#project-structure","title":"Project Structure","text":"<pre><code>backend/app/\n\u251c\u2500\u2500 api/v1/              # API endpoints\n\u2502   \u251c\u2500\u2500 farms.py\n\u2502   \u251c\u2500\u2500 devices.py\n\u2502   \u2514\u2500\u2500 analytics.py\n\u251c\u2500\u2500 core/                # Core functionality\n\u2502   \u251c\u2500\u2500 config.py\n\u2502   \u251c\u2500\u2500 security.py\n\u2502   \u2514\u2500\u2500 exceptions.py\n\u251c\u2500\u2500 crud/                # Database operations\n\u2502   \u251c\u2500\u2500 base.py\n\u2502   \u2514\u2500\u2500 farm.py\n\u251c\u2500\u2500 models/              # SQLAlchemy models\n\u2502   \u2514\u2500\u2500 farm.py\n\u251c\u2500\u2500 schemas/             # Pydantic schemas\n\u2502   \u2514\u2500\u2500 farm.py\n\u251c\u2500\u2500 services/            # Business logic\n\u2502   \u251c\u2500\u2500 base.py\n\u2502   \u2514\u2500\u2500 farm_service.py\n\u2514\u2500\u2500 tests/               # Test files\n    \u251c\u2500\u2500 unit/\n    \u2514\u2500\u2500 integration/\n</code></pre>"},{"location":"development/coding-standards/#code-style","title":"Code Style","text":""},{"location":"development/coding-standards/#type-hints-required","title":"Type Hints (Required)","text":"<pre><code>from typing import Optional, List, Dict, Any\nfrom datetime import datetime\nfrom uuid import UUID\n\nasync def get_farm_by_id(\n    farm_id: UUID,\n    user_id: UUID,\n    include_devices: bool = False\n) -&gt; Optional[Farm]:\n    \"\"\"\n    Retrieve a farm by ID with optional device information.\n\n    Args:\n        farm_id: The unique identifier of the farm\n        user_id: The ID of the requesting user\n        include_devices: Whether to include device data\n\n    Returns:\n        Farm object if found and user has access, None otherwise\n\n    Raises:\n        PermissionError: If user lacks access to the farm\n    \"\"\"\n    pass\n</code></pre>"},{"location":"development/coding-standards/#async-patterns","title":"Async Patterns","text":"<pre><code># Always use async/await for I/O operations\nasync def create_farm(farm_data: FarmCreate) -&gt; Farm:\n    async with get_db() as db:\n        farm = Farm(**farm_data.dict())\n        db.add(farm)\n        await db.commit()\n        await db.refresh(farm)\n        return farm\n\n# Use asyncio for concurrent operations\nasync def process_sensor_data(sensor_ids: List[UUID]):\n    tasks = [\n        fetch_sensor_data(sensor_id) \n        for sensor_id in sensor_ids\n    ]\n    results = await asyncio.gather(*tasks)\n    return results\n</code></pre>"},{"location":"development/coding-standards/#error-handling","title":"Error Handling","text":"<pre><code>from fastapi import HTTPException, status\n\nclass FarmService:\n    async def update_farm(\n        self,\n        farm_id: UUID,\n        farm_update: FarmUpdate,\n        user_id: UUID\n    ) -&gt; Farm:\n        try:\n            farm = await self.get_farm(farm_id, user_id)\n            if not farm:\n                raise HTTPException(\n                    status_code=status.HTTP_404_NOT_FOUND,\n                    detail=f\"Farm {farm_id} not found\"\n                )\n\n            # Update logic\n            return updated_farm\n\n        except IntegrityError as e:\n            raise HTTPException(\n                status_code=status.HTTP_409_CONFLICT,\n                detail=\"Farm name already exists\"\n            )\n        except Exception as e:\n            logger.error(f\"Error updating farm {farm_id}: {e}\")\n            raise HTTPException(\n                status_code=status.HTTP_500_INTERNAL_SERVER_ERROR,\n                detail=\"Failed to update farm\"\n            )\n</code></pre>"},{"location":"development/coding-standards/#pydantic-models","title":"Pydantic Models","text":"<pre><code>from pydantic import BaseModel, Field, validator\nfrom typing import Optional\nfrom datetime import datetime\n\nclass FarmBase(BaseModel):\n    name: str = Field(..., min_length=1, max_length=100)\n    location: Optional[str] = Field(None, max_length=200)\n    size_sqm: float = Field(..., gt=0, le=10000)\n\n    @validator('name')\n    def validate_name(cls, v):\n        if not v.strip():\n            raise ValueError('Farm name cannot be empty')\n        return v.strip()\n\nclass FarmCreate(FarmBase):\n    pass\n\nclass Farm(FarmBase):\n    id: UUID\n    user_id: UUID\n    created_at: datetime\n    updated_at: datetime\n\n    class Config:\n        from_attributes = True  # Python 3.13 Pydantic v2\n</code></pre>"},{"location":"development/coding-standards/#api-design","title":"API Design","text":"<pre><code>from fastapi import APIRouter, Depends, Query\nfrom typing import List, Optional\n\nrouter = APIRouter(prefix=\"/api/v1/farms\", tags=[\"farms\"])\n\n@router.get(\"/\", response_model=List[FarmResponse])\nasync def list_farms(\n    skip: int = Query(0, ge=0),\n    limit: int = Query(100, ge=1, le=100),\n    search: Optional[str] = None,\n    current_user: User = Depends(get_current_user),\n    db: AsyncSession = Depends(get_db)\n) -&gt; List[Farm]:\n    \"\"\"\n    List all farms accessible to the current user.\n\n    - **skip**: Number of records to skip (pagination)\n    - **limit**: Maximum number of records to return\n    - **search**: Optional search term for farm name\n    \"\"\"\n    service = FarmService(db)\n    return await service.list_user_farms(\n        user_id=current_user.id,\n        skip=skip,\n        limit=limit,\n        search=search\n    )\n</code></pre>"},{"location":"development/coding-standards/#database-standards-supabasepostgresql","title":"\ud83d\uddc4\ufe0f Database Standards (Supabase/PostgreSQL)","text":""},{"location":"development/coding-standards/#migration-naming","title":"Migration Naming","text":"<pre><code>-- Format: YYYYMMDDHHMMSS_descriptive_name.sql\n-- Example: 20240115143000_add_sensor_calibration_table.sql\n\n-- Always include up and down migrations\n-- UP Migration\nCREATE TABLE sensor_calibration (\n    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n    sensor_id UUID NOT NULL REFERENCES sensors(id) ON DELETE CASCADE,\n    calibrated_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),\n    calibration_data JSONB NOT NULL,\n    created_by UUID NOT NULL REFERENCES auth.users(id)\n);\n\n-- Create indexes for foreign keys\nCREATE INDEX idx_sensor_calibration_sensor_id ON sensor_calibration(sensor_id);\nCREATE INDEX idx_sensor_calibration_created_by ON sensor_calibration(created_by);\n\n-- DOWN Migration (commented)\n-- DROP TABLE IF EXISTS sensor_calibration;\n</code></pre>"},{"location":"development/coding-standards/#row-level-security-rls","title":"Row Level Security (RLS)","text":"<pre><code>-- Enable RLS on all tables\nALTER TABLE farms ENABLE ROW LEVEL SECURITY;\n\n-- Policy: Users can only see their own farms\nCREATE POLICY \"Users can view own farms\" ON farms\n    FOR SELECT\n    TO authenticated\n    USING (user_id = auth.uid());\n\n-- Policy: Users can create farms for themselves\nCREATE POLICY \"Users can create own farms\" ON farms\n    FOR INSERT\n    TO authenticated\n    WITH CHECK (user_id = auth.uid());\n\n-- Policy: Users can update their own farms\nCREATE POLICY \"Users can update own farms\" ON farms\n    FOR UPDATE\n    TO authenticated\n    USING (user_id = auth.uid())\n    WITH CHECK (user_id = auth.uid());\n\n-- Policy: Users can delete their own farms\nCREATE POLICY \"Users can delete own farms\" ON farms\n    FOR DELETE\n    TO authenticated\n    USING (user_id = auth.uid());\n</code></pre>"},{"location":"development/coding-standards/#mobile-first-design","title":"\ud83d\udcf1 Mobile-First Design","text":""},{"location":"development/coding-standards/#responsive-utilities","title":"Responsive Utilities","text":"<pre><code>/* Mobile-first breakpoints */\n/* Default: Mobile (&lt;640px) */\n/* sm: 640px+ */\n/* md: 768px+ */\n/* lg: 1024px+ */\n/* xl: 1280px+ */\n\n/* Mobile container with appropriate padding */\n.mobile-container {\n  padding: var(--spacing-plant);\n  max-width: 100%;\n}\n\n/* Touch-friendly targets */\n.touch-target {\n  min-height: var(--touch-target-min);\n  min-width: var(--touch-target-min);\n  padding: var(--touch-spacing);\n}\n\n/* Mobile stack layout */\n.mobile-stack {\n  display: flex;\n  flex-direction: column;\n  gap: var(--spacing-row);\n}\n\n/* Responsive grid */\n.mobile-grid {\n  display: grid;\n  grid-template-columns: 1fr;\n  gap: var(--spacing-plant);\n}\n\n@media (min-width: 640px) {\n  .mobile-grid {\n    grid-template-columns: repeat(2, 1fr);\n  }\n}\n\n@media (min-width: 1024px) {\n  .mobile-grid {\n    grid-template-columns: repeat(3, 1fr);\n  }\n}\n</code></pre>"},{"location":"development/coding-standards/#touch-optimization","title":"Touch Optimization","text":"<pre><code>// Large touch targets for mobile\n&lt;FarmControlButton \n  size=\"lg\"  // Uses touch-target class\n  variant=\"primary\"\n  onClick={handleAction}\n&gt;\n  Control Device\n&lt;/FarmControlButton&gt;\n\n// Mobile-optimized forms\n&lt;form className=\"mobile-stack\"&gt;\n  &lt;FarmInput \n    inputSize=\"lg\"\n    label=\"Temperature\"\n    type=\"number\"\n    inputMode=\"decimal\"  // Mobile keyboard optimization\n  /&gt;\n  &lt;FarmSelect \n    inputSize=\"lg\"\n    options={options}\n  /&gt;\n  &lt;FarmControlButton size=\"lg\" type=\"submit\"&gt;\n    Save Settings\n  &lt;/FarmControlButton&gt;\n&lt;/form&gt;\n</code></pre>"},{"location":"development/coding-standards/#code-review-checklist","title":"\u2705 Code Review Checklist","text":""},{"location":"development/coding-standards/#frontend","title":"Frontend","text":"<ul> <li>[ ] Server Components used by default</li> <li>[ ] Service layer pattern followed (no direct Supabase calls)</li> <li>[ ] Proper error handling with user-friendly messages</li> <li>[ ] TypeScript types for all props and returns</li> <li>[ ] Accessibility: ARIA labels, keyboard navigation</li> <li>[ ] Mobile responsive design tested</li> <li>[ ] Performance: No unnecessary re-renders</li> <li>[ ] Design tokens used instead of hardcoded values</li> </ul>"},{"location":"development/coding-standards/#backend","title":"Backend","text":"<ul> <li>[ ] Type hints on all functions</li> <li>[ ] Async/await used consistently</li> <li>[ ] Proper error handling with appropriate HTTP status codes</li> <li>[ ] Pydantic models for request/response validation</li> <li>[ ] Database queries optimized with proper indexes</li> <li>[ ] RLS policies implemented for new tables</li> <li>[ ] API documentation updated</li> <li>[ ] Unit tests for business logic</li> </ul>"},{"location":"development/coding-standards/#general","title":"General","text":"<ul> <li>[ ] No sensitive data in code</li> <li>[ ] Environment variables used for configuration</li> <li>[ ] Code follows established patterns</li> <li>[ ] Tests written and passing</li> <li>[ ] Documentation updated</li> <li>[ ] No console.log or print statements</li> <li>[ ] Imports properly organized</li> </ul>"},{"location":"development/coding-standards/#performance-guidelines","title":"\ud83d\ude80 Performance Guidelines","text":""},{"location":"development/coding-standards/#frontend-performance","title":"Frontend Performance","text":"<ul> <li>Lighthouse score &gt;90 for all metrics</li> <li>First Contentful Paint &lt;1.5s</li> <li>Time to Interactive &lt;3.5s</li> <li>Bundle size monitored and optimized</li> <li>Images optimized with Next.js Image component</li> <li>Code splitting with dynamic imports</li> </ul>"},{"location":"development/coding-standards/#backend-performance","title":"Backend Performance","text":"<ul> <li>API response time &lt;200ms (p95)</li> <li>Database queries &lt;50ms for indexed queries</li> <li>Proper caching strategy implemented</li> <li>Connection pooling configured</li> <li>Background tasks for heavy operations</li> <li>Rate limiting on public endpoints</li> </ul>"},{"location":"development/coding-standards/#database-performance","title":"Database Performance","text":"<ul> <li>Indexes on all foreign keys</li> <li>Composite indexes for common query patterns</li> <li>EXPLAIN ANALYZE on complex queries</li> <li>Vacuum and analyze scheduled regularly</li> <li>Connection pooling via Supavisor</li> <li>Query result caching where appropriate</li> </ul> <p>This style guide is a living document. Propose changes via pull request with justification for the modification.</p>"},{"location":"development/contributing/","title":"Contributing to Vertical Farm","text":"<p>Welcome! This comprehensive guide helps you contribute effectively to the Vertical Farm project - a full-stack vertical farming management platform.</p>"},{"location":"development/contributing/#quick-start","title":"\ud83d\ude80 Quick Start","text":""},{"location":"development/contributing/#prerequisites","title":"Prerequisites","text":"<ul> <li>Docker and Docker Compose</li> <li>Git </li> <li>Node.js (v18+) and npm</li> <li>Python (3.13+)</li> <li>Claude Code (claude.ai/code)</li> <li>Cursor IDE with MCP servers:</li> <li>GitHub MCP server</li> <li>Sequential Thinking MCP server</li> <li>Context7 MCP Server</li> <li>Playwright MCP server</li> <li>Supabase MCP server</li> </ul>"},{"location":"development/contributing/#getting-developer-secrets","title":"Getting Developer Secrets","text":"<p>Contact @eddie-rowe on GitHub to receive the required secrets for developing on the platform. These include: - Supabase credentials - Test user accounts - API keys</p>"},{"location":"development/contributing/#environment-setup","title":"Environment Setup","text":"<ol> <li> <p>Clone the repository: <pre><code>git clone https://github.com/eddie-rowe/vertical-farm.git\ncd vertical-farm\n</code></pre></p> </li> <li> <p>Set up environment variables: <pre><code># Copy environment template\ncp .env.example .env\n</code></pre></p> </li> <li> <p>Configure development values in <code>.env</code>: <pre><code># Supabase Configuration (required)\nSUPABASE_URL=https://PROJECT_ID.supabase.co\nSUPABASE_ANON_KEY=your_anon_key\nSUPABASE_SERVICE_KEY=your_service_key\nSUPABASE_JWT_SECRET=your_jwt_secret\nSUPABASE_ACCESS_TOKEN=your_access_token\nSUPABASE_DB_PASSWORD=your_db_password\n\n# Next.js Frontend\nNEXT_PUBLIC_SUPABASE_URL=https://PROJECT_ID.supabase.co\nNEXT_PUBLIC_SUPABASE_ANON_KEY=your_anon_key\nNEXT_PUBLIC_API_URL=http://localhost:8000\n\n# Backend API\nDATABASE_URL=postgresql://...\nJWT_SECRET=your_jwt_secret\n</code></pre></p> </li> <li> <p>Start development environment: <pre><code># Using Docker Compose (recommended)\ndocker-compose up -d\n\n# Or run services individually\ncd backend &amp;&amp; uvicorn app.main:app --reload --port 8000\ncd frontend &amp;&amp; npm run dev\n</code></pre></p> </li> <li> <p>Verify services are running: <pre><code># Check container status\ndocker-compose ps\n\n# View logs if needed\ndocker-compose logs -f [service_name]\n</code></pre></p> </li> <li> <p>Access the application:</p> </li> <li>Frontend: http://localhost:3000</li> <li>Backend API: http://localhost:8000</li> <li>API Documentation: http://localhost:8000/docs</li> </ol>"},{"location":"development/contributing/#development-workflow","title":"\ud83d\udd04 Development Workflow","text":""},{"location":"development/contributing/#1-claiming-a-task","title":"1. Claiming a Task","text":"<ol> <li>Visit the Vertical Farm Project Board</li> <li>Browse tasks in the <code>Ready</code> column</li> <li>When selecting a task:</li> <li>Set <code>Assignee</code> to your GitHub username</li> <li>Update <code>Projects</code> status to <code>In Progress</code></li> <li>Create a feature branch:</li> <li>Click <code>Create a branch</code> in the Development section</li> <li>Use auto-generated name</li> <li>Branch from <code>main</code></li> <li>Checkout locally</li> </ol>"},{"location":"development/contributing/#2-planning-your-work","title":"2. Planning Your Work","text":"<p>Use Cursor AI to analyze and plan the implementation:</p> <pre><code>You are a senior full stack software developer.\nYour task is to:\n1. Use GitHub MCP server to analyze [ISSUE ##]\n2. Plan its implementation by breaking it down into smaller, ordered subtasks\n3. Ensure full stack implications are considered\n4. Create output in this table format:\nSUBTASK | DETAILS | REASONING | COMPLEXITY | ETC\n\nCall sequential thinking MCP server to perform your task.\nCall context7 MCP server for up-to-date documentation when necessary.\n</code></pre>"},{"location":"development/contributing/#3-implementation","title":"3. Implementation","text":""},{"location":"development/contributing/#critical-architecture-rules","title":"Critical Architecture Rules","text":"<p>\ud83d\udea8 MANDATORY: Service Layer Pattern <pre><code>// \u2705 CORRECT: Always use service layer\nconst farmService = FarmService.getInstance()\nconst farms = await farmService.getFarmsByUser(userId)\n\n// \u274c WRONG: Never bypass service layer\nconst { data } = await supabase.from('farms').select('*')  // FORBIDDEN\n</code></pre></p>"},{"location":"development/contributing/#development-guidelines","title":"Development Guidelines","text":"<ul> <li>Frontend (Next.js 15 / React 19):</li> <li>Server Components by default</li> <li>Use <code>'use client'</code> only when needed</li> <li>Implement <code>useOptimistic</code> for instant UI feedback</li> <li> <p>Follow existing component patterns in <code>src/components/</code></p> </li> <li> <p>Backend (FastAPI / Python 3.13):</p> </li> <li>Use async/await patterns consistently</li> <li>Implement Pydantic models for validation</li> <li>Follow dependency injection patterns</li> <li> <p>Add comprehensive error handling</p> </li> <li> <p>Database (Supabase):</p> </li> <li>Always enable RLS (Row Level Security)</li> <li>Use migrations for schema changes</li> <li>Never expose service keys to frontend</li> <li>Test query performance</li> </ul>"},{"location":"development/contributing/#4-testing-your-work","title":"4. Testing Your Work","text":"<pre><code># Run all tests\n./test-all.sh\n\n# Backend tests\ncd backend &amp;&amp; pytest -v\ncd backend &amp;&amp; pytest --cov=app --cov-report=html\n\n# Frontend tests\ncd frontend &amp;&amp; npm test\ncd frontend &amp;&amp; npm run test:e2e\n\n# Integration tests\ncd tests &amp;&amp; node run-all-tests.js\n\n# Type checking\ncd backend &amp;&amp; pyright\ncd frontend &amp;&amp; npm run type-check\n</code></pre>"},{"location":"development/contributing/#5-committing-changes","title":"5. Committing Changes","text":"<p>Follow conventional commit format:</p> <pre><code># Format: type(scope): description\n\n# Examples:\ngit commit -m \"feat(frontend): add temperature monitoring chart\"\ngit commit -m \"fix(backend): resolve sensor data caching issue\"\ngit commit -m \"docs(setup): update development environment guide\"\n</code></pre> <p>Commit Types: - <code>feat</code> - New feature - <code>fix</code> - Bug fix - <code>docs</code> - Documentation - <code>style</code> - Formatting changes - <code>refactor</code> - Code restructuring - <code>test</code> - Adding tests - <code>chore</code> - Maintenance tasks</p>"},{"location":"development/contributing/#6-creating-pull-requests","title":"6. Creating Pull Requests","text":"<ol> <li> <p>Push your branch:    <pre><code>git push origin feature-branch-name\n</code></pre></p> </li> <li> <p>Create PR with:</p> </li> <li>Descriptive title</li> <li>Link to issue: <code>Closes #123</code></li> <li>Summary of changes</li> <li>Test results</li> <li> <p>Screenshots (if UI changes)</p> </li> <li> <p>Request review from team member</p> </li> <li> <p>Address feedback and update</p> </li> <li> <p>Merge after approval</p> </li> </ol>"},{"location":"development/contributing/#code-standards","title":"\ud83d\udcda Code Standards","text":""},{"location":"development/contributing/#import-organization","title":"Import Organization","text":"<p>Required import order: <pre><code>// 1. Node built-ins\nimport fs from 'fs'\n\n// 2. React/Next.js\nimport React, { useState } from 'react'\nimport { useRouter } from 'next/navigation'\n\n// 3. External packages\nimport { createClient } from '@supabase/supabase-js'\n\n// 4. Internal - Services (MOST IMPORTANT)\nimport { FarmService } from '@/services/domain/farm/FarmService'\n\n// 5. Internal - Types\nimport type { Farm } from '@/types/farm'\n\n// 6. Internal - Components\nimport { Button } from '@/components/ui/Button'\n\n// 7. Relative imports\nimport { FarmCard } from './FarmCard'\n</code></pre></p>"},{"location":"development/contributing/#error-handling","title":"Error Handling","text":"<pre><code>// Service layer handles all errors\nclass FarmService extends BaseService {\n  async createFarm(data: FarmInput): Promise&lt;Farm&gt; {\n    try {\n      // Business logic\n      return farm\n    } catch (error) {\n      this.handleError(error, 'Failed to create farm')\n      throw new ServiceError('Farm creation failed', error)\n    }\n  }\n}\n\n// Components display user-friendly messages\nfunction FarmCreate() {\n  const handleSubmit = async (data) =&gt; {\n    try {\n      await farmService.createFarm(data)\n      toast.success('Farm created successfully')\n    } catch (error) {\n      toast.error('Failed to create farm. Please try again.')\n    }\n  }\n}\n</code></pre>"},{"location":"development/contributing/#testing-strategy","title":"\ud83e\uddea Testing Strategy","text":""},{"location":"development/contributing/#test-coverage-goals","title":"Test Coverage Goals","text":"<ul> <li>Backend: 90%+ for business logic, 80%+ overall</li> <li>Frontend: 80%+ for components, 70%+ overall</li> <li>Integration: 100% for critical user paths</li> </ul>"},{"location":"development/contributing/#writing-tests","title":"Writing Tests","text":"<pre><code># Backend test example\nasync def test_create_farm_with_valid_data():\n    \"\"\"Test farm creation with valid data returns created farm.\"\"\"\n    # Arrange\n    farm_data = FarmFactory.build()\n\n    # Act\n    response = await client.post(\"/api/v1/farms\", json=farm_data)\n\n    # Assert\n    assert response.status_code == 201\n    assert response.json()[\"name\"] == farm_data[\"name\"]\n</code></pre> <pre><code>// Frontend test example\ndescribe('FarmCard', () =&gt; {\n  it('displays farm information correctly', () =&gt; {\n    render(&lt;FarmCard farm={mockFarm} /&gt;)\n    expect(screen.getByText(mockFarm.name)).toBeInTheDocument()\n    expect(screen.getByText(mockFarm.location)).toBeInTheDocument()\n  })\n})\n</code></pre>"},{"location":"development/contributing/#collaboration-guidelines","title":"\ud83d\udc65 Collaboration Guidelines","text":""},{"location":"development/contributing/#communication","title":"Communication","text":"<ul> <li>Update issues with progress regularly</li> <li>Tag team members when you need input (<code>@username</code>)</li> <li>Ask questions early - don't get stuck</li> <li>Share learnings in documentation</li> </ul>"},{"location":"development/contributing/#code-review-best-practices","title":"Code Review Best Practices","text":"<ul> <li>Review within 24 hours</li> <li>Be constructive and specific</li> <li>Test changes locally before approving</li> <li>Check for:</li> <li>Security implications</li> <li>Performance impact</li> <li>Test coverage</li> <li>Documentation updates</li> </ul>"},{"location":"development/contributing/#work-division","title":"Work Division","text":"<ul> <li>Frontend: UI/UX, components, user flows</li> <li>Backend: APIs, business logic, integrations</li> <li>Shared: Testing, documentation, code reviews</li> </ul>"},{"location":"development/contributing/#emergency-procedures","title":"\ud83d\udea8 Emergency Procedures","text":""},{"location":"development/contributing/#if-something-breaks","title":"If Something Breaks","text":"<ol> <li>Stay calm - issues can be fixed</li> <li>Check recent changes: <pre><code>git log --oneline -10\ngit diff HEAD~1\n</code></pre></li> <li>Rollback if critical: <pre><code>git revert [commit-hash]\n</code></pre></li> <li>Communicate immediately - notify team</li> <li>Document the issue and resolution</li> </ol>"},{"location":"development/contributing/#getting-help","title":"Getting Help","text":"<ul> <li>Check existing issues for similar problems</li> <li>Search documentation in <code>docs/</code></li> <li>Ask in team discussions</li> <li>Use debugging tools (see debugging.md)</li> </ul>"},{"location":"development/contributing/#quality-standards","title":"\ud83c\udfaf Quality Standards","text":""},{"location":"development/contributing/#performance-requirements","title":"Performance Requirements","text":"<ul> <li>API Response: &lt;200ms for standard queries</li> <li>Page Load: &lt;2 seconds</li> <li>Database Queries: &lt;50ms for indexed queries</li> <li>Cache Hit Rate: &gt;80% for cacheable content</li> </ul>"},{"location":"development/contributing/#security-requirements","title":"Security Requirements","text":"<ul> <li>Input Validation: All inputs validated (frontend + backend)</li> <li>Authentication: JWT tokens with proper expiration</li> <li>Authorization: RLS policies on all tables</li> <li>Secrets: Never commit secrets, use environment variables</li> </ul>"},{"location":"development/contributing/#accessibility-requirements","title":"Accessibility Requirements","text":"<ul> <li>WCAG 2.1 AA compliance</li> <li>Keyboard navigation support</li> <li>Screen reader compatibility</li> <li>Proper ARIA labels</li> </ul>"},{"location":"development/contributing/#continuous-improvement","title":"\ud83d\udcc8 Continuous Improvement","text":""},{"location":"development/contributing/#regular-reviews","title":"Regular Reviews","text":"<ul> <li>Weekly: Team sync on progress</li> <li>Monthly: Code quality review</li> <li>Quarterly: Architecture review</li> </ul>"},{"location":"development/contributing/#documentation","title":"Documentation","text":"<ul> <li>Update docs with significant changes</li> <li>Document architectural decisions</li> <li>Keep API documentation current</li> <li>Add inline comments for complex logic</li> </ul>"},{"location":"development/contributing/#recognition","title":"\ud83c\udf89 Recognition","text":"<p>We value every contribution!  - Thank team members for good work - Share successes in team discussions - Learn from challenges together - Celebrate milestones</p> <p>Remember: We're building something amazing together. Every contribution makes the vertical farming system better for users worldwide! \ud83c\udf31</p> <p>Questions? Create an issue or ask in team discussions.</p>"},{"location":"development/database/","title":"Database Guide","text":""},{"location":"development/database/#quick-reference","title":"Quick Reference","text":"Command Purpose <code>make db-verify</code> Compare local vs production schema <code>make db-sync</code> Pull latest schema from production <code>make db-studio</code> Open Supabase Studio <code>supabase db reset</code> Reset local database <code>supabase migration up</code> Apply pending migrations <code>supabase db diff -f name</code> Create migration from changes"},{"location":"development/database/#daily-workflow","title":"Daily Workflow","text":""},{"location":"development/database/#before-starting-work","title":"Before Starting Work","text":"<pre><code>make db-verify              # Check if schema is current\n</code></pre>"},{"location":"development/database/#if-schema-is-out-of-sync","title":"If Schema is Out of Sync","text":"<pre><code>make db-sync                # Pull production schema\nsupabase db reset           # Apply to local database\n</code></pre>"},{"location":"development/database/#creating-schema-changes","title":"Creating Schema Changes","text":"<pre><code># 1. Make changes in Supabase Studio\nsupabase studio\n\n# 2. Generate migration\nsupabase db diff -f my_feature\n\n# 3. Test locally\nsupabase db reset\n\n# 4. Commit migration file\ngit add supabase/migrations/\n</code></pre>"},{"location":"development/database/#environment-files","title":"Environment Files","text":"File Purpose Created <code>.env.local</code> Local development Auto-generated by <code>make up</code> <code>.env.production</code> Production testing Manual from <code>.env.production.example</code>"},{"location":"development/database/#switch-environments","title":"Switch Environments","text":"<pre><code>make up           # Local development (default)\nmake test-prod    # Test with production config\nmake env-local    # Switch back to local\n</code></pre>"},{"location":"development/database/#reset-to-production-schema","title":"Reset to Production Schema","text":"<p>If local migrations are broken:</p> <pre><code># 1. Stop Supabase\nsupabase stop\n\n# 2. Backup and replace migrations\nmv supabase/migrations supabase/migrations.old\nmkdir supabase/migrations\n\n# 3. Pull production as new baseline\nsupabase db pull\n\n# 4. Start fresh\nsupabase start\n</code></pre>"},{"location":"development/database/#migration-rules","title":"Migration Rules","text":"<p>DO: - Keep migrations in version control - Test locally before production - Use descriptive migration names - Create new migrations for changes</p> <p>DON'T: - Edit existing migration files - Skip migrations and modify DB directly - Commit <code>.env.production</code> with real credentials - Copy production user data locally</p>"},{"location":"development/database/#troubleshooting","title":"Troubleshooting","text":""},{"location":"development/database/#schema-out-of-sync","title":"Schema Out of Sync","text":"<pre><code>make db-verify              # Check differences\nmake db-sync                # Pull latest\nsupabase db reset           # Apply\n</code></pre>"},{"location":"development/database/#migration-failed","title":"Migration Failed","text":"<pre><code>supabase migration list     # Check status\nsupabase logs               # View errors\nsupabase db reset           # Reset and retry\n</code></pre>"},{"location":"development/database/#cant-connect-to-production","title":"Can't Connect to Production","text":"<pre><code># Verify credentials exist\ncat .env.production | grep SUPABASE_URL\n\n# Test connection\ncurl $SUPABASE_URL/rest/v1/\n</code></pre>"},{"location":"development/database/#wrong-environment-running","title":"Wrong Environment Running","text":"<pre><code>make down                   # Stop everything\nmake env-check              # Verify state\nmake up                     # Start with local config\n</code></pre>"},{"location":"development/debugging/","title":"Debugging Guide","text":"<p>Comprehensive debugging techniques and tools for the Vertical Farm project.</p>"},{"location":"development/debugging/#debugging-philosophy","title":"\ud83d\udd0d Debugging Philosophy","text":"<ul> <li>Reproduce First - Always reproduce the issue before attempting fixes</li> <li>Isolate the Problem - Narrow down to the smallest possible scope</li> <li>Use the Right Tools - Different problems require different approaches</li> <li>Document Findings - Help future developers (including yourself)</li> </ul>"},{"location":"development/debugging/#debugging-tools","title":"\ud83d\udee0\ufe0f Debugging Tools","text":""},{"location":"development/debugging/#frontend-debugging","title":"Frontend Debugging","text":""},{"location":"development/debugging/#browser-devtools","title":"Browser DevTools","text":"<pre><code>// Console debugging\nconsole.log('Basic output:', variable)\nconsole.table(arrayOfObjects)  // Tabular display\nconsole.time('operation')      // Performance timing\n// ... code to measure\nconsole.timeEnd('operation')\nconsole.trace()                // Stack trace\n\n// Conditional breakpoints\nif (unexpectedCondition) {\n  debugger;  // Pauses execution\n}\n\n// Grouped logging\nconsole.group('User Actions')\nconsole.log('Action 1')\nconsole.log('Action 2')\nconsole.groupEnd()\n</code></pre>"},{"location":"development/debugging/#react-devtools","title":"React DevTools","text":"<pre><code>// Component debugging\n// Install React DevTools browser extension\n\n// Add display names for better debugging\nconst FarmCard = React.memo(({ farm }) =&gt; {\n  // Component logic\n})\nFarmCard.displayName = 'FarmCard'\n\n// Use React.StrictMode for detecting issues\nfunction App() {\n  return (\n    &lt;React.StrictMode&gt;\n      &lt;YourApp /&gt;\n    &lt;/React.StrictMode&gt;\n  )\n}\n\n// Debug renders with React DevTools Profiler\n// Helps identify unnecessary re-renders\n</code></pre>"},{"location":"development/debugging/#nextjs-debugging","title":"Next.js Debugging","text":"<pre><code>// Debug configuration (.vscode/launch.json)\n{\n  \"version\": \"0.2.0\",\n  \"configurations\": [\n    {\n      \"name\": \"Next.js: debug\",\n      \"type\": \"node\",\n      \"request\": \"launch\",\n      \"runtimeExecutable\": \"npm\",\n      \"runtimeArgs\": [\"run\", \"dev\"],\n      \"cwd\": \"${workspaceFolder}/frontend\",\n      \"port\": 9229,\n      \"env\": {\n        \"NODE_OPTIONS\": \"--inspect\"\n      }\n    }\n  ]\n}\n\n// Server-side debugging\nexport default async function Page() {\n  console.log('Server-side log')  // Appears in terminal\n\n  // Debug server components\n  const data = await fetchData()\n  console.dir(data, { depth: null })  // Deep object inspection\n\n  return &lt;Component data={data} /&gt;\n}\n</code></pre>"},{"location":"development/debugging/#service-layer-debugging","title":"Service Layer Debugging","text":"<pre><code>// Add debug logging to services\nclass FarmService extends BaseService {\n  private debug = process.env.NODE_ENV === 'development'\n\n  async getFarmsByUser(userId: string) {\n    if (this.debug) {\n      console.group(`FarmService.getFarmsByUser`)\n      console.log('userId:', userId)\n      console.time('Database query')\n    }\n\n    try {\n      const farms = await this.query(/* ... */)\n\n      if (this.debug) {\n        console.log('Found farms:', farms.length)\n        console.timeEnd('Database query')\n      }\n\n      return farms\n    } catch (error) {\n      if (this.debug) {\n        console.error('Error details:', error)\n      }\n      throw error\n    } finally {\n      if (this.debug) {\n        console.groupEnd()\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"development/debugging/#backend-debugging","title":"Backend Debugging","text":""},{"location":"development/debugging/#python-debugging-with-pdb","title":"Python Debugging with pdb","text":"<pre><code># Interactive debugging\nimport pdb\n\ndef problematic_function(data):\n    # Set breakpoint\n    pdb.set_trace()  # Or use breakpoint() in Python 3.7+\n\n    # Code continues here\n    result = process_data(data)\n    return result\n\n# Conditional debugging\nif unexpected_condition:\n    breakpoint()  # Drops into debugger\n\n# Post-mortem debugging\ntry:\n    risky_operation()\nexcept Exception:\n    import pdb\n    pdb.post_mortem()  # Debug after exception\n</code></pre>"},{"location":"development/debugging/#vs-code-python-debugging","title":"VS Code Python Debugging","text":"<pre><code>// .vscode/launch.json\n{\n  \"version\": \"0.2.0\",\n  \"configurations\": [\n    {\n      \"name\": \"FastAPI Debug\",\n      \"type\": \"python\",\n      \"request\": \"launch\",\n      \"module\": \"uvicorn\",\n      \"args\": [\n        \"app.main:app\",\n        \"--reload\",\n        \"--port\", \"8000\"\n      ],\n      \"cwd\": \"${workspaceFolder}/backend\",\n      \"env\": {\n        \"PYTHONPATH\": \"${workspaceFolder}/backend\",\n        \"DEBUG\": \"true\"\n      }\n    }\n  ]\n}\n</code></pre>"},{"location":"development/debugging/#logging-configuration","title":"Logging Configuration","text":"<pre><code># backend/app/core/logging.py\nimport logging\nimport sys\nfrom pathlib import Path\n\ndef setup_logging(debug: bool = False):\n    \"\"\"Configure application logging.\"\"\"\n    level = logging.DEBUG if debug else logging.INFO\n\n    # Console handler\n    console_handler = logging.StreamHandler(sys.stdout)\n    console_handler.setLevel(level)\n\n    # File handler\n    file_handler = logging.FileHandler('app.log')\n    file_handler.setLevel(logging.WARNING)\n\n    # Formatter\n    formatter = logging.Formatter(\n        '%(asctime)s - %(name)s - %(levelname)s - %(message)s'\n    )\n    console_handler.setFormatter(formatter)\n    file_handler.setFormatter(formatter)\n\n    # Root logger\n    root_logger = logging.getLogger()\n    root_logger.setLevel(level)\n    root_logger.addHandler(console_handler)\n    root_logger.addHandler(file_handler)\n\n    # Reduce noise from libraries\n    logging.getLogger('uvicorn').setLevel(logging.WARNING)\n    logging.getLogger('sqlalchemy').setLevel(logging.WARNING)\n\n# Usage in code\nlogger = logging.getLogger(__name__)\n\nasync def process_sensor_data(sensor_id: str):\n    logger.debug(f\"Processing sensor {sensor_id}\")\n\n    try:\n        data = await fetch_sensor_data(sensor_id)\n        logger.info(f\"Retrieved {len(data)} readings\")\n\n        processed = await process_readings(data)\n        logger.debug(f\"Processed data: {processed}\")\n\n        return processed\n    except Exception as e:\n        logger.error(f\"Error processing sensor {sensor_id}: {e}\", exc_info=True)\n        raise\n</code></pre>"},{"location":"development/debugging/#fastapi-request-debugging","title":"FastAPI Request Debugging","text":"<pre><code># Middleware for request/response logging\nfrom fastapi import Request\nimport time\nimport json\n\n@app.middleware(\"http\")\nasync def debug_middleware(request: Request, call_next):\n    # Log request\n    start_time = time.time()\n    body = await request.body()\n\n    logger.debug(f\"\"\"\n    Request:\n    - Method: {request.method}\n    - URL: {request.url}\n    - Headers: {dict(request.headers)}\n    - Body: {body.decode() if body else 'No body'}\n    \"\"\")\n\n    # Process request\n    response = await call_next(request)\n\n    # Log response\n    process_time = time.time() - start_time\n    logger.debug(f\"\"\"\n    Response:\n    - Status: {response.status_code}\n    - Process Time: {process_time:.3f}s\n    \"\"\")\n\n    response.headers[\"X-Process-Time\"] = str(process_time)\n    return response\n</code></pre>"},{"location":"development/debugging/#database-debugging","title":"Database Debugging","text":""},{"location":"development/debugging/#sql-query-debugging","title":"SQL Query Debugging","text":"<pre><code># Enable SQLAlchemy query logging\nimport logging\nlogging.basicConfig()\nlogging.getLogger('sqlalchemy.engine').setLevel(logging.INFO)\n\n# Or with echo parameter\nfrom sqlalchemy import create_engine\nengine = create_engine('postgresql://...', echo=True)\n\n# Query performance analysis\nfrom sqlalchemy import event\nfrom sqlalchemy.engine import Engine\nimport time\n\n@event.listens_for(Engine, \"before_cursor_execute\")\ndef before_cursor_execute(conn, cursor, statement, parameters, context, executemany):\n    conn.info.setdefault('query_start_time', []).append(time.time())\n    logger.debug(\"Start Query: %s\", statement)\n\n@event.listens_for(Engine, \"after_cursor_execute\")\ndef after_cursor_execute(conn, cursor, statement, parameters, context, executemany):\n    total = time.time() - conn.info['query_start_time'].pop(-1)\n    logger.debug(\"Query Complete in %.3fs\", total)\n    if total &gt; 0.5:  # Log slow queries\n        logger.warning(\"Slow query detected (%.3fs): %s\", total, statement)\n</code></pre>"},{"location":"development/debugging/#supabase-debugging","title":"Supabase Debugging","text":"<pre><code>-- Check query performance\nEXPLAIN ANALYZE\nSELECT * FROM farms\nWHERE user_id = 'user-123'\nAND created_at &gt; NOW() - INTERVAL '30 days';\n\n-- View active queries\nSELECT \n    pid,\n    now() - pg_stat_activity.query_start AS duration,\n    query,\n    state\nFROM pg_stat_activity\nWHERE (now() - pg_stat_activity.query_start) &gt; interval '5 minutes';\n\n-- Check table sizes\nSELECT\n    schemaname AS table_schema,\n    tablename AS table_name,\n    pg_size_pretty(pg_total_relation_size(schemaname||'.'||tablename)) AS size\nFROM pg_tables\nORDER BY pg_total_relation_size(schemaname||'.'||tablename) DESC;\n\n-- Debug RLS policies\nSELECT * FROM pg_policies WHERE tablename = 'farms';\n</code></pre>"},{"location":"development/debugging/#network-debugging","title":"Network Debugging","text":""},{"location":"development/debugging/#api-request-debugging","title":"API Request Debugging","text":"<pre><code>// Frontend API debugging\nclass DebugClient {\n  private baseURL: string\n\n  constructor(baseURL: string) {\n    this.baseURL = baseURL\n  }\n\n  async request(endpoint: string, options: RequestInit = {}) {\n    const url = `${this.baseURL}${endpoint}`\n\n    console.group(`API Request: ${options.method || 'GET'} ${endpoint}`)\n    console.log('URL:', url)\n    console.log('Options:', options)\n    console.time('Request duration')\n\n    try {\n      const response = await fetch(url, options)\n      const data = await response.json()\n\n      console.log('Status:', response.status)\n      console.log('Headers:', Object.fromEntries(response.headers.entries()))\n      console.log('Response:', data)\n      console.timeEnd('Request duration')\n\n      if (!response.ok) {\n        console.error('Request failed:', response.statusText)\n      }\n\n      return data\n    } catch (error) {\n      console.error('Request error:', error)\n      console.timeEnd('Request duration')\n      throw error\n    } finally {\n      console.groupEnd()\n    }\n  }\n}\n\n// Usage\nconst debug = new DebugClient('http://localhost:8000')\nawait debug.request('/api/v1/farms', {\n  method: 'POST',\n  headers: { 'Content-Type': 'application/json' },\n  body: JSON.stringify({ name: 'Test Farm' })\n})\n</code></pre>"},{"location":"development/debugging/#websocket-debugging","title":"WebSocket Debugging","text":"<pre><code>// Debug WebSocket connections\nclass DebugWebSocket {\n  private ws: WebSocket\n  private debug: boolean = true\n\n  connect(url: string) {\n    this.ws = new WebSocket(url)\n\n    this.ws.onopen = (event) =&gt; {\n      if (this.debug) console.log('WebSocket opened:', event)\n    }\n\n    this.ws.onmessage = (event) =&gt; {\n      if (this.debug) {\n        console.log('WebSocket message:', JSON.parse(event.data))\n      }\n    }\n\n    this.ws.onerror = (error) =&gt; {\n      console.error('WebSocket error:', error)\n    }\n\n    this.ws.onclose = (event) =&gt; {\n      if (this.debug) {\n        console.log('WebSocket closed:', event.code, event.reason)\n      }\n    }\n  }\n\n  send(data: any) {\n    const message = JSON.stringify(data)\n    if (this.debug) {\n      console.log('Sending:', data)\n    }\n    this.ws.send(message)\n  }\n}\n</code></pre>"},{"location":"development/debugging/#common-issues-solutions","title":"\ud83d\udc1b Common Issues &amp; Solutions","text":""},{"location":"development/debugging/#frontend-issues","title":"Frontend Issues","text":""},{"location":"development/debugging/#issue-component-not-re-rendering","title":"Issue: Component Not Re-rendering","text":"<pre><code>// Problem: State updates not triggering re-render\nconst [items, setItems] = useState([])\n\n// \u274c Wrong: Mutating existing array\nitems.push(newItem)\nsetItems(items)\n\n// \u2705 Correct: Creating new array\nsetItems([...items, newItem])\n\n// Debug: Check if props/state actually changed\nuseEffect(() =&gt; {\n  console.log('Items changed:', items)\n}, [items])\n</code></pre>"},{"location":"development/debugging/#issue-infinite-re-renders","title":"Issue: Infinite Re-renders","text":"<pre><code>// Problem: Effect causing infinite loop\nuseEffect(() =&gt; {\n  // \u274c Wrong: Updates dependency in effect\n  setData(processData(data))\n}, [data])\n\n// \u2705 Correct: Use callback or memoization\nconst processedData = useMemo(() =&gt; processData(data), [data])\n\n// Debug: Add counter to detect loops\nconst renderCount = useRef(0)\nrenderCount.current++\nif (renderCount.current &gt; 100) {\n  console.error('Possible infinite loop detected!')\n}\n</code></pre>"},{"location":"development/debugging/#issue-hydration-mismatch","title":"Issue: Hydration Mismatch","text":"<pre><code>// Problem: Server and client render differently\n// Debug: Check for client-only code\nconst [mounted, setMounted] = useState(false)\n\nuseEffect(() =&gt; {\n  setMounted(true)\n}, [])\n\nif (!mounted) {\n  return &lt;LoadingState /&gt;  // Same on server and client\n}\n\nreturn &lt;ClientOnlyComponent /&gt;  // Only after hydration\n</code></pre>"},{"location":"development/debugging/#backend-issues","title":"Backend Issues","text":""},{"location":"development/debugging/#issue-slow-api-response","title":"Issue: Slow API Response","text":"<pre><code># Debug: Profile the endpoint\nimport cProfile\nimport pstats\nfrom io import StringIO\n\ndef profile_endpoint():\n    pr = cProfile.Profile()\n    pr.enable()\n\n    # Your slow code here\n    result = slow_function()\n\n    pr.disable()\n    s = StringIO()\n    ps = pstats.Stats(pr, stream=s).sort_stats('cumulative')\n    ps.print_stats(10)  # Top 10 slow functions\n    print(s.getvalue())\n\n    return result\n\n# Common solutions:\n# 1. Add database indexes\n# 2. Implement caching\n# 3. Use async operations\n# 4. Optimize queries (N+1 problem)\n</code></pre>"},{"location":"development/debugging/#issue-memory-leaks","title":"Issue: Memory Leaks","text":"<pre><code># Debug: Monitor memory usage\nimport tracemalloc\nimport gc\n\n# Start tracing\ntracemalloc.start()\n\n# Your code here\nresult = process_large_dataset()\n\n# Get memory snapshot\nsnapshot = tracemalloc.take_snapshot()\ntop_stats = snapshot.statistics('lineno')\n\nprint(\"[ Top 10 memory consumers ]\")\nfor stat in top_stats[:10]:\n    print(stat)\n\n# Force garbage collection\ngc.collect()\n\n# Common causes:\n# 1. Circular references\n# 2. Global variables holding large data\n# 3. Unclosed connections/files\n# 4. Cache without expiration\n</code></pre>"},{"location":"development/debugging/#issue-database-connection-errors","title":"Issue: Database Connection Errors","text":"<pre><code># Debug: Connection pool monitoring\nfrom sqlalchemy.pool import QueuePool\nimport logging\n\nlogging.basicConfig()\nlogging.getLogger('sqlalchemy.pool').setLevel(logging.DEBUG)\n\n# Create engine with pool logging\nengine = create_engine(\n    DATABASE_URL,\n    poolclass=QueuePool,\n    pool_size=5,\n    max_overflow=10,\n    pool_pre_ping=True,  # Test connections before using\n    echo_pool=True  # Log pool checkouts/checkins\n)\n\n# Monitor pool status\n@app.on_event(\"startup\")\nasync def startup_event():\n    # Log pool status periodically\n    async def log_pool_status():\n        while True:\n            pool = engine.pool\n            logger.info(f\"\"\"\n            Pool Status:\n            - Size: {pool.size()}\n            - Checked out: {pool.checked_out_connections}\n            - Overflow: {pool.overflow}\n            - Total: {pool.size() + pool.overflow}\n            \"\"\")\n            await asyncio.sleep(60)\n\n    asyncio.create_task(log_pool_status())\n</code></pre>"},{"location":"development/debugging/#advanced-debugging-techniques","title":"\ud83d\udd2c Advanced Debugging Techniques","text":""},{"location":"development/debugging/#remote-debugging","title":"Remote Debugging","text":"<pre><code># Python remote debugging with debugpy\nimport debugpy\n\n# Enable debugging on port 5678\ndebugpy.listen((\"0.0.0.0\", 5678))\nprint(\"Waiting for debugger attach...\")\ndebugpy.wait_for_client()\nprint(\"Debugger attached!\")\n\n# VS Code configuration for remote debugging\n{\n  \"name\": \"Python: Remote Attach\",\n  \"type\": \"python\",\n  \"request\": \"attach\",\n  \"connect\": {\n    \"host\": \"localhost\",\n    \"port\": 5678\n  },\n  \"pathMappings\": [\n    {\n      \"localRoot\": \"${workspaceFolder}/backend\",\n      \"remoteRoot\": \"/app\"\n    }\n  ]\n}\n</code></pre>"},{"location":"development/debugging/#production-debugging","title":"Production Debugging","text":"<pre><code>// Feature flags for debug mode\nconst DEBUG_MODE = process.env.NEXT_PUBLIC_DEBUG === 'true'\n\nexport function debugLog(...args: any[]) {\n  if (DEBUG_MODE) {\n    console.log('[DEBUG]', new Date().toISOString(), ...args)\n  }\n}\n\n// Conditional debug UI\nexport function DebugPanel({ data }: { data: any }) {\n  if (!DEBUG_MODE) return null\n\n  return (\n    &lt;div className=\"fixed bottom-0 right-0 p-4 bg-black text-white\"&gt;\n      &lt;pre&gt;{JSON.stringify(data, null, 2)}&lt;/pre&gt;\n    &lt;/div&gt;\n  )\n}\n\n// Performance monitoring\nexport function measurePerformance(name: string, fn: () =&gt; void) {\n  if (!DEBUG_MODE) return fn()\n\n  performance.mark(`${name}-start`)\n  const result = fn()\n  performance.mark(`${name}-end`)\n  performance.measure(name, `${name}-start`, `${name}-end`)\n\n  const measure = performance.getEntriesByName(name)[0]\n  debugLog(`Performance: ${name} took ${measure.duration}ms`)\n\n  return result\n}\n</code></pre>"},{"location":"development/debugging/#docker-debugging","title":"Docker Debugging","text":"<pre><code># Debug running container\ndocker exec -it &lt;container_id&gt; /bin/bash\n\n# View container logs\ndocker logs -f --tail 100 &lt;container_id&gt;\n\n# Inspect container configuration\ndocker inspect &lt;container_id&gt;\n\n# Monitor resource usage\ndocker stats &lt;container_id&gt;\n\n# Debug networking\ndocker network inspect bridge\n\n# Debug volumes\ndocker volume inspect &lt;volume_name&gt;\n</code></pre> <pre><code># docker-compose.yml debugging configuration\nservices:\n  backend:\n    image: backend:latest\n    environment:\n      - DEBUG=true\n      - LOG_LEVEL=debug\n    volumes:\n      - ./backend:/app  # Mount for hot reload\n    ports:\n      - \"8000:8000\"\n      - \"5678:5678\"  # Debug port\n    command: python -m debugpy --listen 0.0.0.0:5678 -m uvicorn app.main:app --reload\n</code></pre>"},{"location":"development/debugging/#debug-checklist","title":"\ud83d\udcdd Debug Checklist","text":""},{"location":"development/debugging/#before-debugging","title":"Before Debugging","text":"<ul> <li>[ ] Can you reproduce the issue consistently?</li> <li>[ ] Have you checked the error messages/logs?</li> <li>[ ] Is this a regression? (Did it work before?)</li> <li>[ ] Have you isolated the problem area?</li> </ul>"},{"location":"development/debugging/#during-debugging","title":"During Debugging","text":"<ul> <li>[ ] Use appropriate debugging tools</li> <li>[ ] Add strategic logging/breakpoints</li> <li>[ ] Test your hypothesis systematically</li> <li>[ ] Document your findings</li> </ul>"},{"location":"development/debugging/#after-debugging","title":"After Debugging","text":"<ul> <li>[ ] Remove debug code/console.logs</li> <li>[ ] Add test to prevent regression</li> <li>[ ] Document the solution</li> <li>[ ] Share knowledge with team</li> </ul>"},{"location":"development/debugging/#performance-debugging","title":"\ud83d\ude80 Performance Debugging","text":""},{"location":"development/debugging/#frontend-performance","title":"Frontend Performance","text":"<pre><code>// React DevTools Profiler\n// Measures component render performance\n\n// Performance Observer API\nconst observer = new PerformanceObserver((list) =&gt; {\n  for (const entry of list.getEntries()) {\n    console.log('LCP:', entry.startTime, entry)\n  }\n})\nobserver.observe({ entryTypes: ['largest-contentful-paint'] })\n\n// Custom performance marks\nperformance.mark('fetch-start')\nawait fetchData()\nperformance.mark('fetch-end')\nperformance.measure('fetch', 'fetch-start', 'fetch-end')\n</code></pre>"},{"location":"development/debugging/#backend-performance","title":"Backend Performance","text":"<pre><code># Line profiling\nfrom line_profiler import LineProfiler\n\ndef profile_function(func):\n    lp = LineProfiler()\n    lp_wrapper = lp(func)\n    lp_wrapper()\n    lp.print_stats()\n\n# Memory profiling\nfrom memory_profiler import profile\n\n@profile\ndef memory_intensive_function():\n    # Your code here\n    pass\n\n# Async profiling\nimport asyncio\nimport time\n\nasync def profile_async(coro):\n    start = time.perf_counter()\n    result = await coro\n    elapsed = time.perf_counter() - start\n    print(f\"Execution time: {elapsed:.3f}s\")\n    return result\n</code></pre> <p>Debugging is twice as hard as writing the code in the first place. Therefore, if you write the code as cleverly as possible, you are, by definition, not smart enough to debug it. - Brian Kernighan</p>"},{"location":"development/docker/","title":"Docker Guide","text":""},{"location":"development/docker/#quick-reference","title":"Quick Reference","text":"Command Purpose <code>make up</code> Start all services <code>make down</code> Stop all services <code>make logs</code> View all logs <code>supabase status</code> Check Supabase status <code>supabase db reset</code> Reset database"},{"location":"development/docker/#local-development","title":"Local Development","text":""},{"location":"development/docker/#prerequisites","title":"Prerequisites","text":"<ul> <li>Docker Desktop</li> <li>Supabase CLI: <code>brew install supabase/tap/supabase</code></li> </ul>"},{"location":"development/docker/#start-development","title":"Start Development","text":"<pre><code>make up\n</code></pre> <p>This starts: - Frontend: http://localhost:3000 - Backend: http://localhost:8000 - Supabase Studio: http://localhost:54323</p>"},{"location":"development/docker/#daily-workflow","title":"Daily Workflow","text":"<pre><code>make up                  # Morning: start everything\nmake logs               # Check for errors\nmake down               # End of day: stop everything\n</code></pre>"},{"location":"development/docker/#common-tasks","title":"Common Tasks","text":"<pre><code># Restart a service\ndocker-compose -f docker-compose.local.yml restart backend\n\n# View specific service logs\ndocker logs vf-backend-local -f\n\n# Rebuild container\ndocker-compose -f docker-compose.local.yml build --no-cache backend\n\n# Include Datadog monitoring\ndocker-compose -f docker-compose.local.yml --profile monitoring up -d\n</code></pre>"},{"location":"development/docker/#production-unraid","title":"Production (unRAID)","text":""},{"location":"development/docker/#deployment","title":"Deployment","text":"<ul> <li>Automatic: Push to <code>main</code> triggers <code>deploy-unraid.yml</code></li> <li>Manual: GitHub Actions workflow dispatch</li> </ul>"},{"location":"development/docker/#required-secrets","title":"Required Secrets","text":"<p>Configure in GitHub repository settings: - <code>SUPABASE_URL</code>, <code>SUPABASE_ANON_KEY</code>, <code>SUPABASE_SERVICE_KEY</code> - <code>NEXT_PUBLIC_SUPABASE_URL</code>, <code>NEXT_PUBLIC_SUPABASE_ANON_KEY</code> - <code>NEXT_PUBLIC_API_URL</code>, <code>GHCR_TOKEN</code> - <code>DD_API_KEY</code>, <code>DD_SITE</code>, <code>DD_SERVICE</code></p>"},{"location":"development/docker/#manual-container-management","title":"Manual Container Management","text":"<pre><code># View running containers\ndocker ps --filter \"network=vertical-farm-network\"\n\n# View logs\ndocker logs backend -f --tail=100\n\n# Restart service\ndocker restart backend\n\n# Update a service\ndocker pull ghcr.io/eddie-rowe/vertical-farm/backend:latest\ndocker rm -f backend\ndocker run -d --name backend --network vertical-farm-network -p 8000:8000 ...\n</code></pre>"},{"location":"development/docker/#local-vs-production","title":"Local vs Production","text":"Aspect Local Production Deployment docker-compose Individual containers Supabase Local CLI Cloud instance Hot Reload Enabled Disabled Monitoring Optional Always enabled Runner Local Self-hosted on unRAID"},{"location":"development/docker/#troubleshooting","title":"Troubleshooting","text":""},{"location":"development/docker/#supabase-issues","title":"Supabase Issues","text":"<pre><code>supabase status          # Check status\nsupabase stop &amp;&amp; supabase start  # Reset\n</code></pre>"},{"location":"development/docker/#port-conflicts","title":"Port Conflicts","text":"<pre><code>lsof -i :3000           # Find process using port\nkill -9 &lt;PID&gt;           # Kill it\n</code></pre>"},{"location":"development/docker/#container-issues","title":"Container Issues","text":"<pre><code>docker-compose -f docker-compose.local.yml logs backend  # Check logs\ndocker-compose -f docker-compose.local.yml build --no-cache backend  # Rebuild\n</code></pre>"},{"location":"development/docker/#connection-to-supabase","title":"Connection to Supabase","text":"<ul> <li>From container: <code>http://host.docker.internal:54321</code></li> <li>From host: <code>http://localhost:54321</code></li> </ul>"},{"location":"development/new-developer/","title":"New Developer Guide","text":""},{"location":"development/new-developer/#prerequisites","title":"Prerequisites","text":"Tool Install Purpose Docker Desktop Download Containers Supabase CLI <code>brew install supabase/tap/supabase</code> Local database Node.js 20+ <code>brew install node</code> Frontend Python 3.12 <code>brew install python@3.12</code> Backend Git <code>brew install git</code> Version control GitHub CLI <code>brew install gh</code> GitHub ops Claude Code <code>npm i -g @anthropic-ai/claude-code</code> AI assistant act <code>brew install act</code> Local CI runner Playwright <code>npx playwright install</code> E2E testing"},{"location":"development/new-developer/#verify-installation","title":"Verify Installation","text":"<pre><code>docker --version &amp;&amp; supabase --version &amp;&amp; node --version &amp;&amp; python3 --version &amp;&amp; gh --version &amp;&amp; claude --version &amp;&amp; act --version\n</code></pre>"},{"location":"development/new-developer/#setup-github-cli","title":"Setup GitHub CLI","text":"<p>Authenticate with GitHub for PR creation and issue management:</p> <pre><code># Login to GitHub (opens browser)\ngh auth login\n\n# Select:\n# - GitHub.com\n# - HTTPS\n# - Yes (authenticate Git with GitHub credentials)\n# - Login with a web browser\n</code></pre> <p>Verify authentication: <pre><code>gh auth status\n</code></pre></p>"},{"location":"development/new-developer/#setup-act-local-ci","title":"Setup act (Local CI)","text":"<p><code>act</code> runs GitHub Actions locally for 1:1 CI parity before pushing.</p> <pre><code># Create local storage directories\nmkdir -p .act/artifacts .act/cache\n\n# Generate secrets from Supabase (after running make up)\n./scripts/create-act-secrets.sh\n</code></pre> <p>The <code>.actrc</code> file configures act with these paths: <pre><code>--artifact-server-path .act/artifacts\n--cache-server-path .act/cache\n</code></pre></p> <p>Run local CI with <code>/tools:02_development:test</code> or manually: <pre><code>act -j backend-tests -W .github/workflows/main-pipeline.yml\n</code></pre></p>"},{"location":"development/new-developer/#quick-start","title":"Quick Start","text":"<pre><code># 1. Clone and enter project\ngit clone https://github.com/eddie-rowe/vertical-farm.git\ncd vertical-farm\n\n# 2. Start environment\n/tools:02_development:up #in Claude Code\n\n# 3. Access the app\n# Frontend: http://localhost:3000\n# Backend: http://localhost:8000\n# Supabase Studio: http://localhost:54323\n</code></pre> <p>Test Logins:</p> User Email Password Purpose Seeded <code>seeded@test.dev</code> <code>password123</code> Has sample data (farms, grows, devices) Blank <code>blank@test.dev</code> <code>password123</code> Empty state (profile only) <p>Use different browser sessions or incognito to switch between users.</p>"},{"location":"development/new-developer/#development-workflow","title":"Development Workflow","text":"<p>For your first issue and all development tasks, follow the Standard Dev Flow.</p> <p>This guide covers the complete workflow: - Picking issues from the project board - Creating feature branches - Using Claude Code slash commands - PR review process - Merging and cleanup</p>"},{"location":"development/new-developer/#project-structure","title":"Project Structure","text":"<pre><code>vertical-farm/\n\u251c\u2500\u2500 frontend/src/\n\u2502   \u251c\u2500\u2500 app/           # Pages (App Router)\n\u2502   \u251c\u2500\u2500 components/    # UI components\n\u2502   \u251c\u2500\u2500 services/      # Data access (CRITICAL!)\n\u2502   \u2514\u2500\u2500 types/         # TypeScript\n\u251c\u2500\u2500 backend/app/\n\u2502   \u251c\u2500\u2500 api/v1/        # Endpoints\n\u2502   \u2514\u2500\u2500 services/      # Business logic\n\u251c\u2500\u2500 supabase/\n\u2502   \u2514\u2500\u2500 migrations/    # Database schema\n\u2514\u2500\u2500 docs/              # Documentation\n</code></pre>"},{"location":"development/new-developer/#critical-rules","title":"Critical Rules","text":"<ol> <li>Read CLAUDE.md - Contains all coding standards</li> <li>Asking questions is cool - Better to clarify than assume</li> </ol>"},{"location":"development/new-developer/#troubleshooting","title":"Troubleshooting","text":""},{"location":"development/new-developer/#something-fails","title":"Something Fails","text":"<pre><code># Ask Claude\n\"The tests are failing with [error]. Can you help?\"\n</code></pre>"},{"location":"development/new-developer/#start-over-if-something-is-really-messy","title":"Start over if something is really messy","text":"<pre><code># Get the main working branch\ngit checkout main\n# Delete your old branch\ngit branch -D &lt;branch-name&gt;\n# Run /plan again and continue the process from there\n</code></pre>"},{"location":"development/new-developer/#next-steps","title":"Next Steps","text":"<ol> <li>Complete local setup (Prerequisites + Quick Start above)</li> <li>Log in and explore the app (http://localhost)</li> <li>Read CLAUDE.md for coding guidelines</li> <li>Read Standard Dev Flow for the development process</li> <li>Pick a <code>good first issue</code> from the project board</li> <li>Ask questions early - Eddie on Slack, Claude in IDE</li> </ol> <p>Welcome to the team!</p>"},{"location":"development/standard-dev-flow/","title":"Standard Development Flow","text":"<p>Step-by-step guide for developing features on the Vertical Farm project using Claude Code slash commands.</p>"},{"location":"development/standard-dev-flow/#overview","title":"Overview","text":"<pre><code>Browser Setup -&gt; IDE Development -&gt; PR Review -&gt; Merge &amp; Cleanup\n</code></pre> Phase Location Actions 1. Setup Browser + IDE Pick issue, create branch 2. Development IDE (Claude Code) Plan, code, test, deploy 3. Review Text Message + GitHub Request review, address feedback 4. Finalization IDE (Claude Code) Merge, cleanup"},{"location":"development/standard-dev-flow/#prerequisites","title":"Prerequisites","text":"<p>IMPORTANT!</p> <p>Before starting, complete the New Developer Guide.</p>"},{"location":"development/standard-dev-flow/#phase-1-administrative-setup","title":"Phase 1: Administrative Setup","text":""},{"location":"development/standard-dev-flow/#11-select-an-issue-browser","title":"1.1 Select an Issue (Browser)","text":"<ol> <li>Go to the GitHub Project Board</li> <li>Find an issue in the Ready column</li> <li>Assign yourself to the issue</li> <li>Move the issue to In Progress</li> <li>Note the issue number (e.g., <code>#123</code>)</li> </ol>"},{"location":"development/standard-dev-flow/#12-create-a-feature-branch-github","title":"1.2 Create a Feature Branch (GitHub)","text":"<ol> <li>On the issue page, find the Development section in the right sidebar</li> <li>Click \"Create a branch\"</li> <li>Keep the default branch name (GitHub auto-generates it from the issue title)</li> <li>Click \"Create branch\"</li> </ol>"},{"location":"development/standard-dev-flow/#13-checkout-the-branch-ide-terminal","title":"1.3 Checkout the Branch (IDE Terminal)","text":"<p>Tip: GitHub shows the exact checkout command after creating the branch - just copy and paste it.</p>"},{"location":"development/standard-dev-flow/#phase-2-ide-development-flow","title":"Phase 2: IDE Development Flow","text":""},{"location":"development/standard-dev-flow/#21-start-development-environment","title":"2.1 Start Development Environment","text":"<pre><code>/tools:02_development:up\n</code></pre> <p>This starts Docker containers for: - Frontend (Next.js on port 3000) - Backend (FastAPI on port 8000) - Database (Supabase on port 54323)</p> <p>Wait for all services to be healthy before proceeding.</p>"},{"location":"development/standard-dev-flow/#22-plan-the-implementation","title":"2.2 Plan the Implementation","text":"<pre><code>/tools:02_development:plan 123\n</code></pre> <p>Replace <code>123</code> with your issue number. This command: - Analyzes the GitHub issue - Creates an implementation plan - Breaks down into subtasks - Identifies affected files</p> <p>Review the plan before proceeding. Ask questions if anything is unclear.</p>"},{"location":"development/standard-dev-flow/#23-develop-the-feature","title":"2.3 Develop the Feature","text":"<pre><code>/tools:02_development:dev 123\n</code></pre> <p>Replace <code>123</code> with your issue number. This command: - Implements the feature based on the plan - Uses specialized agents for frontend/backend/database - Follows project coding standards - Creates necessary tests</p> <p>Stay engaged during development. Claude will ask clarifying questions - answer them to guide the implementation.</p>"},{"location":"development/standard-dev-flow/#24-validate-with-e2e-tests","title":"2.4 Validate with E2E Tests","text":"<pre><code>/tools:02_development:validate 123\n</code></pre> <p>Replace <code>123</code> with your issue number. This command: - Runs Playwright E2E tests - Tests the actual user flows - Takes screenshots for verification - Validates acceptance criteria</p>"},{"location":"development/standard-dev-flow/#25-run-local-tests","title":"2.5 Run Local Tests","text":"<pre><code>/tools:02_development:test\n</code></pre> <p>This runs the full test suite: - Frontend unit tests (Jest) - Backend unit tests (pytest) - Type checking (TypeScript, mypy) - Linting (ESLint, Black)</p> <p>All tests must pass before proceeding. Fix any failures before moving on.</p>"},{"location":"development/standard-dev-flow/#26-create-pull-request","title":"2.6 Create Pull Request","text":"<pre><code>/tools:02_development:deploy 123\n</code></pre> <p>Replace <code>123</code> with your issue number. This command: - Commits all changes - Pushes to remote - Creates a PR with proper description - Links the PR to the issue - Returns the PR URL (e.g., <code>#68</code>)</p> <p>Note the PR number - you'll need it for the next steps.</p>"},{"location":"development/standard-dev-flow/#phase-3-pr-review","title":"Phase 3: PR Review","text":""},{"location":"development/standard-dev-flow/#31-request-review-from-eddie","title":"3.1 Request Review from Eddie","text":"<p>After <code>/deploy</code> completes, send Eddie a text message:</p> <pre><code>Hey Eddie - PR ready for review :D\n</code></pre>"},{"location":"development/standard-dev-flow/#32-wait-for-review","title":"3.2 Wait for Review","text":"<p>Eddie will either: - Approve the PR - proceed to Phase 4 - Request changes - see below</p> <p>Feel free to begin working on another branch while waiting for review. Here's how:</p> <pre><code># Switch to main and get latest changes\ngit checkout main\ngit pull origin main\n\n# Start a new issue (repeat Phase 1 steps)\n# 1. Pick another issue from the Ready column\n# 2. Create a branch from GitHub's issue page\n# 3. Checkout the new branch:\ngit fetch origin\ngit checkout 456-another-issue-title\n</code></pre> <p>When Eddie responds to your original PR: <pre><code># Stash any uncommitted work on current branch (if needed)\ngit stash\n\n# Switch back to original branch\ngit checkout 123-issue-title-here\n\n# Address feedback and push updates\n# Then switch back to continue other work:\ngit checkout 456-another-issue-title\ngit stash pop  # Restore stashed changes (if any)\n</code></pre></p> <p>Tip: Keep track of which branches you're juggling. Use <code>git branch</code> to list your local branches.</p>"},{"location":"development/standard-dev-flow/#33-reflect-on-development","title":"3.3 Reflect on Development","text":"<p>While waiting for review, run a reflection to analyze your work:</p> <pre><code>/tools:02_development:reflect\n</code></pre> <p>This command: - Analyzes your recent commits for patterns - Identifies common errors or debugging sessions - Reviews code quality and consistency - Suggests workflow improvements - Saves a report to <code>.claude/reports/reflections/</code></p> <p>Options: <pre><code>/tools:02_development:reflect 5              # Analyze last 5 commits\n/tools:02_development:reflect 10 typescript  # Focus on TypeScript code\n/tools:02_development:reflect 20 backend     # Deep dive on Python backend\n</code></pre></p> <p>Available scopes: <code>all</code>, <code>typescript</code>, <code>backend</code>, <code>testing</code>, <code>infrastructure</code>, <code>database</code>, <code>security</code>, <code>performance</code></p> <p>Review the reflection report and note any action items for future work.</p>"},{"location":"development/standard-dev-flow/#34-address-requested-changes-if-any","title":"3.4 Address Requested Changes (If Any)","text":"<p>If Eddie requests changes:</p> <ol> <li>Read the review comments on GitHub</li> <li>Make the requested changes in your IDE</li> <li>Run tests again:    <pre><code>/tools:02_development:test\n</code></pre></li> <li>Push updates:    <pre><code>git add .\ngit commit -m \"Address review feedback\"\ngit push\n</code></pre></li> <li>Reply to review comments on GitHub</li> <li>Notify Eddie the changes are ready for re-review</li> </ol>"},{"location":"development/standard-dev-flow/#phase-4-merge-and-finalization","title":"Phase 4: Merge and Finalization","text":""},{"location":"development/standard-dev-flow/#41-check-pr-status-optional","title":"4.1 Check PR Status (Optional)","text":"<pre><code>/tools:02_development:review 68\n</code></pre> <p>Replace <code>68</code> with your PR number. Verifies: - CI/CD pipeline status - Review approval status - Merge readiness</p>"},{"location":"development/standard-dev-flow/#42-merge-the-pr","title":"4.2 Merge the PR","text":"<p>Only after Eddie approves:</p> <pre><code>/tools:02_development:merge 68\n</code></pre> <p>Replace <code>68</code> with your PR number. This command: - Verifies approval - Squash merges to main - Deletes the feature branch on remote</p>"},{"location":"development/standard-dev-flow/#43-finalize-the-issue","title":"4.3 Finalize the Issue","text":"<pre><code>/tools:02_development:finalize 123\n</code></pre> <p>Replace <code>123</code> with your issue number. This command: - Closes the GitHub issue - Updates documentation if needed - Links the merged PR</p>"},{"location":"development/standard-dev-flow/#44-cleanup","title":"4.4 Cleanup","text":"<pre><code># Switch back to main\ngit checkout main\n\n# Pull the latest (includes your merged changes)\ngit pull origin main\n\n# Stop Docker environment (optional, saves resources)\nmake down &amp;&amp; supabase stop\n</code></pre>"},{"location":"development/standard-dev-flow/#quick-reference","title":"Quick Reference","text":""},{"location":"development/standard-dev-flow/#full-command-list","title":"Full Command List","text":"Step Command Input Start environment <code>/tools:02_development:up</code> None Plan implementation <code>/tools:02_development:plan 123</code> Issue # Develop feature <code>/tools:02_development:dev 123</code> Issue # E2E validation <code>/tools:02_development:validate 123</code> Issue # Run tests <code>/tools:02_development:test</code> None Create PR <code>/tools:02_development:deploy 123</code> Issue # Reflect on work <code>/tools:02_development:reflect</code> Commits, Scope Check PR status <code>/tools:02_development:review 68</code> PR # Merge PR <code>/tools:02_development:merge 68</code> PR # Close issue <code>/tools:02_development:finalize 123</code> Issue #"},{"location":"development/standard-dev-flow/#typical-flow","title":"Typical Flow","text":"<pre><code>/tools:02_development:up\n/tools:02_development:plan 123\n/tools:02_development:dev 123\n/tools:02_development:validate 123\n/tools:02_development:test\n/tools:02_development:deploy 123\n/tools:02_development:reflect\n# ... wait for Eddie's approval ...\n/tools:02_development:merge 68\n/tools:02_development:finalize 123\n</code></pre>"},{"location":"development/standard-dev-flow/#troubleshooting-commands","title":"Troubleshooting Commands","text":"Issue Command CI/CD pipeline fails <code>/tools:02_development:pipeline 68</code> Need to debug Use Claude chat directly Merge conflicts Ask Claude: \"Help me resolve merge conflicts\""},{"location":"development/standard-dev-flow/#tips-for-success","title":"Tips for Success","text":"<ol> <li>Read the issue thoroughly before starting</li> <li>Ask questions early - don't guess at requirements</li> <li>Commit often - small, logical commits</li> <li>Test locally first - don't rely only on CI</li> <li>Keep PRs focused - one issue per PR</li> <li>Respond to reviews quickly - keeps momentum</li> </ol>"},{"location":"development/standard-dev-flow/#getting-help","title":"Getting Help","text":"<ul> <li>Technical questions: Ask Claude in the IDE</li> <li>Process questions: Send text message to Eddie</li> </ul>"},{"location":"development/standard-dev-flow/#related-documentation","title":"Related Documentation","text":"<ul> <li>Coding Standards</li> <li>Testing Guide</li> <li>CLAUDE.md - Project rules and patterns</li> </ul>"},{"location":"development/testing/","title":"Testing Guide","text":"<p>Comprehensive testing strategy and implementation guide for the Vertical Farm project.</p>"},{"location":"development/testing/#testing-philosophy","title":"\ud83c\udfaf Testing Philosophy","text":"<p>We follow the Testing Pyramid approach: - Many Unit Tests - Fast, isolated, high coverage - Some Integration Tests - Component interaction validation - Few E2E Tests - Critical user journey validation - Continuous Production Testing - Real-world validation</p>"},{"location":"development/testing/#test-organization","title":"\ud83d\udcc1 Test Organization","text":"<pre><code>vertical-farm/\n\u251c\u2500\u2500 backend/app/tests/          # Backend Python tests\n\u2502   \u251c\u2500\u2500 conftest.py            # Shared fixtures and mocks\n\u2502   \u251c\u2500\u2500 unit/                  # Unit tests\n\u2502   \u251c\u2500\u2500 integration/           # Integration tests\n\u2502   \u2514\u2500\u2500 api/                   # API endpoint tests\n\u251c\u2500\u2500 frontend/tests/             # Frontend JavaScript/TypeScript tests\n\u2502   \u251c\u2500\u2500 unit/                  # Component unit tests\n\u2502   \u251c\u2500\u2500 integration/           # Feature integration tests\n\u2502   \u2514\u2500\u2500 e2e/                   # End-to-end tests\n\u251c\u2500\u2500 tests/                      # Cross-system tests\n\u2502   \u251c\u2500\u2500 auth/                  # Authentication flow tests\n\u2502   \u251c\u2500\u2500 caching/              # Cache performance tests\n\u2502   \u251c\u2500\u2500 integration/          # Full-stack integration\n\u2502   \u2514\u2500\u2500 iot/                  # IoT device tests\n\u2514\u2500\u2500 .github/workflows/tests.yml # CI/CD test automation\n</code></pre>"},{"location":"development/testing/#running-tests","title":"\ud83d\ude80 Running Tests","text":""},{"location":"development/testing/#quick-commands","title":"Quick Commands","text":"<pre><code># Run ALL tests (recommended before committing)\n./test-all.sh\n\n# Backend tests only\ncd backend &amp;&amp; pytest -v\ncd backend &amp;&amp; pytest --cov=app --cov-report=html\n\n# Frontend tests only  \ncd frontend &amp;&amp; npm test\ncd frontend &amp;&amp; npm run test:e2e\n\n# Integration tests only\ncd tests &amp;&amp; node run-all-tests.js\n\n# Specific test suites\npytest backend/app/tests/unit/          # Backend unit tests\npytest backend/app/tests/integration/   # Backend integration\nnpm test -- --testPathPattern=unit      # Frontend unit tests\n</code></pre>"},{"location":"development/testing/#docker-testing","title":"Docker Testing","text":"<pre><code># Run tests in Docker containers\ndocker-compose exec backend pytest\ndocker-compose exec frontend npm test\n\n# Run with coverage\ndocker-compose exec backend pytest --cov=app\ndocker-compose exec frontend npm test -- --coverage\n</code></pre>"},{"location":"development/testing/#writing-tests","title":"\u270d\ufe0f Writing Tests","text":""},{"location":"development/testing/#backend-tests-pythonfastapi","title":"Backend Tests (Python/FastAPI)","text":""},{"location":"development/testing/#unit-test-example","title":"Unit Test Example","text":"<pre><code># backend/app/tests/unit/test_farm_service.py\nimport pytest\nfrom unittest.mock import Mock, AsyncMock\nfrom app.services.farm_service import FarmService\nfrom app.schemas.farm import FarmCreate\n\n@pytest.mark.asyncio\nasync def test_create_farm_with_valid_data():\n    \"\"\"Test that creating a farm with valid data returns the created farm.\"\"\"\n    # Arrange\n    mock_db = AsyncMock()\n    service = FarmService(mock_db)\n    farm_data = FarmCreate(\n        name=\"Test Farm\",\n        location=\"Test Location\",\n        size_sqm=100.0\n    )\n\n    # Act\n    result = await service.create_farm(farm_data, user_id=\"test-user\")\n\n    # Assert\n    assert result.name == farm_data.name\n    assert result.location == farm_data.location\n    mock_db.add.assert_called_once()\n    mock_db.commit.assert_called_once()\n</code></pre>"},{"location":"development/testing/#integration-test-example","title":"Integration Test Example","text":"<pre><code># backend/app/tests/integration/test_farm_endpoints.py\nimport pytest\nfrom httpx import AsyncClient\nfrom app.main import app\n\n@pytest.mark.asyncio\nasync def test_farm_crud_workflow():\n    \"\"\"Test complete CRUD workflow for farms.\"\"\"\n    async with AsyncClient(app=app, base_url=\"http://test\") as client:\n        # Create farm\n        create_response = await client.post(\n            \"/api/v1/farms\",\n            json={\"name\": \"Test Farm\", \"location\": \"Test\", \"size_sqm\": 100},\n            headers={\"Authorization\": f\"Bearer {test_token}\"}\n        )\n        assert create_response.status_code == 201\n        farm_id = create_response.json()[\"id\"]\n\n        # Read farm\n        get_response = await client.get(\n            f\"/api/v1/farms/{farm_id}\",\n            headers={\"Authorization\": f\"Bearer {test_token}\"}\n        )\n        assert get_response.status_code == 200\n        assert get_response.json()[\"name\"] == \"Test Farm\"\n\n        # Update farm\n        update_response = await client.patch(\n            f\"/api/v1/farms/{farm_id}\",\n            json={\"name\": \"Updated Farm\"},\n            headers={\"Authorization\": f\"Bearer {test_token}\"}\n        )\n        assert update_response.status_code == 200\n\n        # Delete farm\n        delete_response = await client.delete(\n            f\"/api/v1/farms/{farm_id}\",\n            headers={\"Authorization\": f\"Bearer {test_token}\"}\n        )\n        assert delete_response.status_code == 204\n</code></pre>"},{"location":"development/testing/#test-fixtures","title":"Test Fixtures","text":"<pre><code># backend/app/tests/conftest.py\nimport pytest\nfrom typing import AsyncGenerator\nfrom sqlalchemy.ext.asyncio import AsyncSession\nfrom app.core.database import get_db\nfrom app.core.security import create_access_token\n\n@pytest.fixture\nasync def db_session() -&gt; AsyncGenerator[AsyncSession, None]:\n    \"\"\"Provide a transactional database session for tests.\"\"\"\n    async with get_db() as session:\n        yield session\n        await session.rollback()\n\n@pytest.fixture\ndef test_user():\n    \"\"\"Provide a test user object.\"\"\"\n    return {\n        \"id\": \"test-user-123\",\n        \"email\": \"test@example.com\",\n        \"role\": \"admin\"\n    }\n\n@pytest.fixture\ndef auth_headers(test_user):\n    \"\"\"Provide authentication headers with test token.\"\"\"\n    token = create_access_token(test_user)\n    return {\"Authorization\": f\"Bearer {token}\"}\n</code></pre>"},{"location":"development/testing/#frontend-tests-typescriptreact","title":"Frontend Tests (TypeScript/React)","text":""},{"location":"development/testing/#component-unit-test","title":"Component Unit Test","text":"<pre><code>// frontend/tests/unit/components/FarmCard.test.tsx\nimport { render, screen, fireEvent } from '@testing-library/react'\nimport { FarmCard } from '@/components/features/agriculture/FarmCard'\nimport { mockFarm } from '../fixtures/farms'\n\ndescribe('FarmCard', () =&gt; {\n  it('renders farm information correctly', () =&gt; {\n    render(&lt;FarmCard farm={mockFarm} /&gt;)\n\n    expect(screen.getByText(mockFarm.name)).toBeInTheDocument()\n    expect(screen.getByText(mockFarm.location)).toBeInTheDocument()\n    expect(screen.getByText(`${mockFarm.size_sqm} m\u00b2`)).toBeInTheDocument()\n  })\n\n  it('handles click events', async () =&gt; {\n    const handleClick = jest.fn()\n    render(&lt;FarmCard farm={mockFarm} onClick={handleClick} /&gt;)\n\n    const card = screen.getByRole('article')\n    fireEvent.click(card)\n\n    expect(handleClick).toHaveBeenCalledWith(mockFarm.id)\n  })\n\n  it('shows correct status indicator', () =&gt; {\n    const offlineFarm = { ...mockFarm, status: 'offline' }\n    render(&lt;FarmCard farm={offlineFarm} /&gt;)\n\n    const statusIndicator = screen.getByTestId('status-indicator')\n    expect(statusIndicator).toHaveClass('state-offline')\n  })\n})\n</code></pre>"},{"location":"development/testing/#service-test","title":"Service Test","text":"<pre><code>// frontend/tests/unit/services/FarmService.test.ts\nimport { FarmService } from '@/services/domain/farm/FarmService'\nimport { createClient } from '@/utils/supabase/client'\n\njest.mock('@/utils/supabase/client')\n\ndescribe('FarmService', () =&gt; {\n  let service: FarmService\n  let mockSupabase: any\n\n  beforeEach(() =&gt; {\n    mockSupabase = {\n      from: jest.fn().mockReturnThis(),\n      select: jest.fn().mockReturnThis(),\n      insert: jest.fn().mockReturnThis(),\n      update: jest.fn().mockReturnThis(),\n      delete: jest.fn().mockReturnThis(),\n      eq: jest.fn().mockReturnThis(),\n      single: jest.fn()\n    }\n    ;(createClient as jest.Mock).mockReturnValue(mockSupabase)\n    service = FarmService.getInstance()\n  })\n\n  describe('getFarmsByUser', () =&gt; {\n    it('returns user farms successfully', async () =&gt; {\n      const mockFarms = [{ id: '1', name: 'Farm 1' }]\n      mockSupabase.select.mockResolvedValue({ data: mockFarms, error: null })\n\n      const result = await service.getFarmsByUser('user-123')\n\n      expect(result).toEqual(mockFarms)\n      expect(mockSupabase.from).toHaveBeenCalledWith('farms')\n      expect(mockSupabase.eq).toHaveBeenCalledWith('user_id', 'user-123')\n    })\n\n    it('handles errors gracefully', async () =&gt; {\n      mockSupabase.select.mockResolvedValue({ \n        data: null, \n        error: { message: 'Database error' } \n      })\n\n      await expect(service.getFarmsByUser('user-123')).rejects.toThrow('Failed to fetch farms')\n    })\n  })\n})\n</code></pre>"},{"location":"development/testing/#integration-test","title":"Integration Test","text":"<pre><code>// frontend/tests/integration/farm-management.test.tsx\nimport { render, screen, waitFor } from '@testing-library/react'\nimport userEvent from '@testing-library/user-event'\nimport { FarmManagement } from '@/app/(app)/farms/page'\nimport { mockServer } from '../mocks/server'\n\ndescribe('Farm Management Integration', () =&gt; {\n  beforeAll(() =&gt; mockServer.listen())\n  afterEach(() =&gt; mockServer.resetHandlers())\n  afterAll(() =&gt; mockServer.close())\n\n  it('completes farm creation workflow', async () =&gt; {\n    const user = userEvent.setup()\n    render(&lt;FarmManagement /&gt;)\n\n    // Open create form\n    const createButton = screen.getByRole('button', { name: /create farm/i })\n    await user.click(createButton)\n\n    // Fill form\n    await user.type(screen.getByLabelText(/farm name/i), 'New Test Farm')\n    await user.type(screen.getByLabelText(/location/i), 'Test Location')\n    await user.type(screen.getByLabelText(/size/i), '250')\n\n    // Submit\n    const submitButton = screen.getByRole('button', { name: /save/i })\n    await user.click(submitButton)\n\n    // Verify success\n    await waitFor(() =&gt; {\n      expect(screen.getByText('Farm created successfully')).toBeInTheDocument()\n      expect(screen.getByText('New Test Farm')).toBeInTheDocument()\n    })\n  })\n})\n</code></pre>"},{"location":"development/testing/#e2e-tests-playwright","title":"E2E Tests (Playwright)","text":"<pre><code>// frontend/tests/e2e/farm-workflow.spec.ts\nimport { test, expect } from '@playwright/test'\n\ntest.describe('Farm Management Workflow', () =&gt; {\n  test.beforeEach(async ({ page }) =&gt; {\n    await page.goto('/login')\n    await page.fill('[name=\"email\"]', 'test@example.com')\n    await page.fill('[name=\"password\"]', 'testpassword')\n    await page.click('button[type=\"submit\"]')\n    await page.waitForURL('/dashboard')\n  })\n\n  test('create and manage farm', async ({ page }) =&gt; {\n    // Navigate to farms\n    await page.click('a[href=\"/farms\"]')\n\n    // Create new farm\n    await page.click('button:has-text(\"Create Farm\")')\n    await page.fill('input[name=\"name\"]', 'E2E Test Farm')\n    await page.fill('input[name=\"location\"]', 'E2E Location')\n    await page.fill('input[name=\"size_sqm\"]', '500')\n    await page.click('button:has-text(\"Save\")')\n\n    // Verify creation\n    await expect(page.locator('text=Farm created successfully')).toBeVisible()\n    await expect(page.locator('text=E2E Test Farm')).toBeVisible()\n\n    // Edit farm\n    await page.click('button[aria-label=\"Edit E2E Test Farm\"]')\n    await page.fill('input[name=\"name\"]', 'Updated E2E Farm')\n    await page.click('button:has-text(\"Update\")')\n\n    // Verify update\n    await expect(page.locator('text=Farm updated successfully')).toBeVisible()\n    await expect(page.locator('text=Updated E2E Farm')).toBeVisible()\n  })\n})\n</code></pre>"},{"location":"development/testing/#production-testing","title":"\ud83c\udfed Production Testing","text":""},{"location":"development/testing/#load-testing","title":"Load Testing","text":"<pre><code>// tests/performance/load-test.js\nimport http from 'k6/http'\nimport { check, sleep } from 'k6'\n\nexport const options = {\n  stages: [\n    { duration: '2m', target: 100 }, // Ramp up to 100 users\n    { duration: '5m', target: 100 }, // Stay at 100 users\n    { duration: '2m', target: 0 },   // Ramp down to 0 users\n  ],\n  thresholds: {\n    http_req_duration: ['p(95)&lt;500'], // 95% of requests under 500ms\n    http_req_failed: ['rate&lt;0.1'],    // Error rate under 10%\n  },\n}\n\nexport default function () {\n  const res = http.get('http://localhost:8000/api/v1/farms')\n  check(res, {\n    'status is 200': (r) =&gt; r.status === 200,\n    'response time &lt; 500ms': (r) =&gt; r.timings.duration &lt; 500,\n  })\n  sleep(1)\n}\n</code></pre>"},{"location":"development/testing/#production-monitoring","title":"Production Monitoring","text":"<pre><code># backend/app/tests/production/health_check.py\nimport asyncio\nimport aiohttp\nfrom datetime import datetime\n\nasync def production_health_check():\n    \"\"\"Run production health checks.\"\"\"\n    checks = {\n        'api_health': 'http://api.example.com/health',\n        'database': 'http://api.example.com/api/v1/test/db-health',\n        'cache': 'http://api.example.com/api/v1/test/cache-health',\n        'home_assistant': 'http://api.example.com/api/v1/test/ha-health'\n    }\n\n    results = {}\n    async with aiohttp.ClientSession() as session:\n        for name, url in checks.items():\n            try:\n                async with session.get(url, timeout=5) as response:\n                    results[name] = {\n                        'status': response.status,\n                        'healthy': response.status == 200,\n                        'response_time': response.headers.get('X-Response-Time'),\n                        'timestamp': datetime.utcnow().isoformat()\n                    }\n            except Exception as e:\n                results[name] = {\n                    'healthy': False,\n                    'error': str(e),\n                    'timestamp': datetime.utcnow().isoformat()\n                }\n\n    return results\n</code></pre>"},{"location":"development/testing/#chaos-engineering","title":"Chaos Engineering","text":"<pre><code># tests/chaos/network_failures.py\nimport random\nimport asyncio\n\nasync def simulate_network_failures():\n    \"\"\"Simulate various network failure scenarios.\"\"\"\n    scenarios = [\n        simulate_high_latency,\n        simulate_packet_loss,\n        simulate_connection_timeout,\n        simulate_intermittent_failures\n    ]\n\n    for scenario in scenarios:\n        print(f\"Running: {scenario.__name__}\")\n        result = await scenario()\n        print(f\"Result: {result}\")\n        await asyncio.sleep(5)  # Cool down between scenarios\n\nasync def simulate_high_latency():\n    \"\"\"Add 500ms latency to all requests.\"\"\"\n    # Implementation using tc or proxy\n    pass\n\nasync def simulate_packet_loss():\n    \"\"\"Drop 10% of packets randomly.\"\"\"\n    # Implementation using iptables or tc\n    pass\n</code></pre>"},{"location":"development/testing/#test-coverage","title":"\ud83d\udcca Test Coverage","text":""},{"location":"development/testing/#coverage-goals","title":"Coverage Goals","text":"Component Target Current Status Backend Business Logic 90% 85% \ud83d\udfe1 Backend Overall 80% 75% \ud83d\udfe1 Frontend Components 80% 45% \ud83d\udd34 Frontend Overall 70% 40% \ud83d\udd34 Integration Tests 100% 90% \ud83d\udfe1 E2E Critical Paths 100% 80% \ud83d\udfe1"},{"location":"development/testing/#generating-coverage-reports","title":"Generating Coverage Reports","text":"<pre><code># Backend coverage with HTML report\ncd backend\npytest --cov=app --cov-report=html --cov-report=term\nopen htmlcov/index.html\n\n# Frontend coverage with HTML report\ncd frontend\nnpm test -- --coverage --watchAll=false\nopen coverage/lcov-report/index.html\n\n# Combined coverage report\n./scripts/generate-coverage-report.sh\n</code></pre>"},{"location":"development/testing/#coverage-configuration","title":"Coverage Configuration","text":"<pre><code># backend/.coveragerc\n[run]\nsource = app\nomit = \n    */tests/*\n    */migrations/*\n    */__pycache__/*\n\n[report]\nexclude_lines =\n    pragma: no cover\n    def __repr__\n    raise AssertionError\n    raise NotImplementedError\n    if __name__ == .__main__.:\n</code></pre> <pre><code>// frontend/jest.config.js\nmodule.exports = {\n  collectCoverageFrom: [\n    'src/**/*.{ts,tsx}',\n    '!src/**/*.d.ts',\n    '!src/**/*.stories.tsx',\n    '!src/**/index.ts',\n  ],\n  coverageThresholds: {\n    global: {\n      branches: 70,\n      functions: 70,\n      lines: 70,\n      statements: 70,\n    },\n  },\n}\n</code></pre>"},{"location":"development/testing/#cicd-testing","title":"\ud83d\udd04 CI/CD Testing","text":""},{"location":"development/testing/#github-actions-workflow","title":"GitHub Actions Workflow","text":"<pre><code># .github/workflows/tests.yml\nname: Test Suite\n\non:\n  push:\n    branches: [main, develop]\n  pull_request:\n    branches: [main, develop]\n\njobs:\n  backend-tests:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v3\n      - uses: actions/setup-python@v4\n        with:\n          python-version: '3.13'\n      - name: Install dependencies\n        run: |\n          cd backend\n          pip install -r requirements.txt\n          pip install -r requirements-dev.txt\n      - name: Run linting\n        run: |\n          cd backend\n          black --check .\n          isort --check .\n          flake8 .\n      - name: Run type checking\n        run: |\n          cd backend\n          mypy app/\n      - name: Run tests with coverage\n        run: |\n          cd backend\n          pytest --cov=app --cov-report=xml\n      - name: Upload coverage\n        uses: codecov/codecov-action@v3\n        with:\n          file: ./backend/coverage.xml\n\n  frontend-tests:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v3\n      - uses: actions/setup-node@v3\n        with:\n          node-version: '18'\n          cache: 'npm'\n      - name: Install dependencies\n        run: |\n          cd frontend\n          npm ci\n      - name: Run linting\n        run: |\n          cd frontend\n          npm run lint\n      - name: Run type checking\n        run: |\n          cd frontend\n          npm run type-check\n      - name: Run tests with coverage\n        run: |\n          cd frontend\n          npm test -- --coverage --watchAll=false\n      - name: Upload coverage\n        uses: codecov/codecov-action@v3\n        with:\n          file: ./frontend/coverage/lcov.info\n\n  e2e-tests:\n    needs: [backend-tests, frontend-tests]\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v3\n      - name: Start services\n        run: docker-compose up -d\n      - name: Wait for services\n        run: |\n          npm install -g wait-on\n          wait-on http://localhost:3000 http://localhost:8000/health\n      - name: Run E2E tests\n        run: |\n          cd frontend\n          npm run test:e2e\n      - name: Upload test results\n        if: always()\n        uses: actions/upload-artifact@v3\n        with:\n          name: playwright-report\n          path: frontend/playwright-report/\n</code></pre>"},{"location":"development/testing/#debugging-tests","title":"\ud83d\udc1b Debugging Tests","text":""},{"location":"development/testing/#backend-debugging","title":"Backend Debugging","text":"<pre><code># Use pytest debugging\npytest -v -s  # Verbose with print statements\npytest --pdb  # Drop into debugger on failure\npytest --trace  # Drop into debugger at start\n\n# Debug specific test\npytest backend/app/tests/test_farms.py::test_create_farm -vv\n\n# Use logging in tests\nimport logging\nlogging.basicConfig(level=logging.DEBUG)\nlogger = logging.getLogger(__name__)\n\ndef test_something():\n    logger.debug(\"Debug information\")\n    # Test code\n</code></pre>"},{"location":"development/testing/#frontend-debugging","title":"Frontend Debugging","text":"<pre><code>// Use debug mode\nnpm test -- --no-coverage --verbose\n\n// Debug specific test\nnpm test -- --testNamePattern=\"FarmCard\"\n\n// Use debug utilities\nimport { debug } from '@testing-library/react'\n\ntest('debug component', () =&gt; {\n  const { container } = render(&lt;Component /&gt;)\n  debug(container)  // Prints DOM structure\n})\n\n// Use breakpoints\ntest('with breakpoint', () =&gt; {\n  debugger;  // Execution stops here when debugging\n  // Test code\n})\n</code></pre>"},{"location":"development/testing/#test-quality-checklist","title":"\u2705 Test Quality Checklist","text":""},{"location":"development/testing/#before-writing-tests","title":"Before Writing Tests","text":"<ul> <li>[ ] Understand the requirement/bug being tested</li> <li>[ ] Plan test cases (happy path, edge cases, error cases)</li> <li>[ ] Set up proper test data/fixtures</li> <li>[ ] Consider test maintainability</li> </ul>"},{"location":"development/testing/#while-writing-tests","title":"While Writing Tests","text":"<ul> <li>[ ] Follow AAA pattern (Arrange, Act, Assert)</li> <li>[ ] Use descriptive test names</li> <li>[ ] One assertion per test (when possible)</li> <li>[ ] Mock external dependencies</li> <li>[ ] Clean up after tests</li> </ul>"},{"location":"development/testing/#after-writing-tests","title":"After Writing Tests","text":"<ul> <li>[ ] Tests pass locally</li> <li>[ ] Tests are deterministic (not flaky)</li> <li>[ ] Coverage increased or maintained</li> <li>[ ] Tests documented if complex</li> <li>[ ] CI/CD pipeline passes</li> </ul>"},{"location":"development/testing/#testing-metrics","title":"\ud83d\udcc8 Testing Metrics","text":""},{"location":"development/testing/#key-performance-indicators","title":"Key Performance Indicators","text":"<ul> <li>Test Execution Time: &lt;5 minutes for unit tests</li> <li>Test Reliability: &lt;1% flaky test rate</li> <li>Coverage Trend: Increasing or stable</li> <li>Test-to-Code Ratio: 1:1 minimum</li> <li>Bug Detection Rate: &gt;80% caught by tests</li> </ul>"},{"location":"development/testing/#monthly-testing-report","title":"Monthly Testing Report","text":"<p>Track and report: - Total tests written/updated - Coverage changes - Test execution time trends - Flaky tests identified and fixed - Production issues that tests missed</p> <p>Testing is not about finding bugs, it's about building confidence in our code.</p>"},{"location":"guides/","title":"Guides","text":""},{"location":"guides/#integrations","title":"Integrations","text":"Guide Description Home Assistant IoT automation and device integration Square POS Payment processing integration"},{"location":"guides/#support","title":"Support","text":"Guide Description Troubleshooting Common issues and solutions"},{"location":"guides/#related","title":"Related","text":"<ul> <li>New Developer Guide - Getting started</li> <li>API Reference - Endpoint documentation</li> <li>CLAUDE.md - Architecture and coding standards</li> </ul>"},{"location":"guides/home-assistant/","title":"Home Assistant Integration Guide","text":"<p>Complete guide for integrating Home Assistant with your Vertical Farm platform for advanced IoT automation and device control.</p>"},{"location":"guides/home-assistant/#overview","title":"Overview","text":"<p>Home Assistant integration enables advanced automation, extended device compatibility, and sophisticated control scenarios for your vertical farm. This guide covers setup, configuration, and advanced automation features.</p>"},{"location":"guides/home-assistant/#benefits-of-integration","title":"Benefits of Integration","text":""},{"location":"guides/home-assistant/#extended-device-support","title":"Extended Device Support","text":"<ul> <li>Connect 2000+ device types and brands</li> <li>Support for legacy and proprietary protocols</li> <li>Bridge incompatible systems</li> <li>Custom device integrations</li> </ul>"},{"location":"guides/home-assistant/#advanced-automation","title":"Advanced Automation","text":"<ul> <li>Complex conditional logic</li> <li>Multi-device orchestration</li> <li>Time-based and event-driven automation</li> <li>Machine learning capabilities</li> </ul>"},{"location":"guides/home-assistant/#enhanced-monitoring","title":"Enhanced Monitoring","text":"<ul> <li>Unified dashboard for all devices</li> <li>Custom visualization options</li> <li>Historical data analysis</li> <li>Predictive analytics</li> </ul>"},{"location":"guides/home-assistant/#prerequisites","title":"Prerequisites","text":"<p>Before starting: - Vertical Farm platform account with admin access - Home Assistant instance (local or cloud) - Network connectivity between systems - API tokens for authentication</p>"},{"location":"guides/home-assistant/#setup-methods","title":"Setup Methods","text":""},{"location":"guides/home-assistant/#method-1-direct-access-localpublic","title":"Method 1: Direct Access (Local/Public)","text":"<p>For Home Assistant instances accessible directly via URL.</p>"},{"location":"guides/home-assistant/#requirements","title":"Requirements","text":"<ul> <li>Home Assistant URL (e.g., <code>http://192.168.1.100:8123</code>)</li> <li>Long-lived access token from Home Assistant</li> </ul>"},{"location":"guides/home-assistant/#configuration-steps","title":"Configuration Steps","text":"<ol> <li> <p>Generate Home Assistant Token <pre><code># In Home Assistant:\n1. Navigate to Profile (bottom left)\n2. Go to Security tab\n3. Create Long-Lived Access Token\n4. Name: \"Vertical Farm Integration\"\n5. Copy and save the token securely\n</code></pre></p> </li> <li> <p>Configure Backend <pre><code># In your backend .env file\nHOME_ASSISTANT_ENABLED=true\nHOME_ASSISTANT_URL=http://192.168.1.100:8123\nHOME_ASSISTANT_TOKEN=your_token_here\nCLOUDFLARE_ACCESS_PROTECTED=false\n</code></pre></p> </li> <li> <p>Test Connection <pre><code>cd backend\npython test_home_assistant_connection.py\n</code></pre></p> </li> </ol>"},{"location":"guides/home-assistant/#method-2-cloudflare-protected-access","title":"Method 2: Cloudflare Protected Access","text":"<p>For Home Assistant behind Cloudflare Zero Trust.</p>"},{"location":"guides/home-assistant/#additional-requirements","title":"Additional Requirements","text":"<ul> <li>Cloudflare Service Token (Client ID &amp; Secret)</li> <li>Cloudflare Access configuration</li> </ul>"},{"location":"guides/home-assistant/#configuration-steps_1","title":"Configuration Steps","text":"<ol> <li> <p>Create Cloudflare Service Token <pre><code>1. Log into Cloudflare Zero Trust Dashboard\n2. Navigate to Access \u2192 Service Auth \u2192 Service Tokens\n3. Create Service Token:\n   - Name: \"Vertical Farm HA Access\"\n   - Duration: 1 year (recommended)\n4. Save Client ID and Client Secret\n</code></pre></p> </li> <li> <p>Configure Access Policy <pre><code># In Cloudflare Access:\n1. Go to your Home Assistant application\n2. Edit access policy\n3. Add Service Token as allowed identity\n4. Save policy\n</code></pre></p> </li> <li> <p>Configure Backend <pre><code># In your backend .env file\nHOME_ASSISTANT_ENABLED=true\nHOME_ASSISTANT_URL=https://ha.yourdomain.com\nHOME_ASSISTANT_TOKEN=your_ha_token_here\nCLOUDFLARE_ACCESS_PROTECTED=true\nCLOUDFLARE_SERVICE_CLIENT_ID=your_cf_client_id\nCLOUDFLARE_SERVICE_CLIENT_SECRET=your_cf_secret\n</code></pre></p> </li> </ol>"},{"location":"guides/home-assistant/#device-mapping","title":"Device Mapping","text":""},{"location":"guides/home-assistant/#automatic-discovery","title":"Automatic Discovery","text":"<ol> <li> <p>Enable Discovery <pre><code>// In platform settings\n{\n  home_assistant: {\n    auto_discovery: true,\n    discovery_prefix: \"vertical_farm\",\n    discovery_interval: 300 // seconds\n  }\n}\n</code></pre></p> </li> <li> <p>Review Discovered Devices</p> </li> <li>Navigate to Integrations \u2192 Home Assistant</li> <li>Click Discovered Devices</li> <li>Map to farm zones</li> <li>Configure sync settings</li> </ol>"},{"location":"guides/home-assistant/#manual-device-mapping","title":"Manual Device Mapping","text":"<ol> <li>Access Mapping Interface</li> <li>Go to Devices \u2192 Integration Mapping</li> <li> <p>Select Home Assistant tab</p> </li> <li> <p>Create Mappings <pre><code>{\n  platform_device: \"SENSOR-001\",\n  ha_entity: \"sensor.greenhouse_temperature\",\n  sync_direction: \"bidirectional\", // from_ha, to_ha, bidirectional\n  update_interval: 30, // seconds\n  value_template: \"{{ value | float }}\",\n  unit_conversion: {\n    from: \"fahrenheit\",\n    to: \"celsius\"\n  }\n}\n</code></pre></p> </li> </ol>"},{"location":"guides/home-assistant/#device-type-mappings","title":"Device Type Mappings","text":"<p>Sensors <pre><code># Platform \u2192 Home Assistant\ntemperature_sensor \u2192 sensor.temperature\nhumidity_sensor \u2192 sensor.humidity\nco2_sensor \u2192 sensor.co2\nph_sensor \u2192 sensor.ph\nec_sensor \u2192 sensor.conductivity\nlight_sensor \u2192 sensor.illuminance\n</code></pre></p> <p>Controllers <pre><code># Platform \u2192 Home Assistant\nlight_controller \u2192 light.grow_light\npump_controller \u2192 switch.water_pump\nvalve_controller \u2192 switch.irrigation_valve\nfan_controller \u2192 fan.exhaust_fan\nclimate_controller \u2192 climate.hvac_system\n</code></pre></p>"},{"location":"guides/home-assistant/#automation-setup","title":"Automation Setup","text":""},{"location":"guides/home-assistant/#basic-automations","title":"Basic Automations","text":"<p>Temperature Control <pre><code>automation:\n  - alias: \"Greenhouse Temperature Control\"\n    trigger:\n      - platform: numeric_state\n        entity_id: sensor.greenhouse_temperature\n        above: 30\n    condition:\n      - condition: time\n        after: \"10:00\"\n        before: \"18:00\"\n    action:\n      - service: fan.turn_on\n        entity_id: fan.greenhouse_exhaust\n        data:\n          speed: high\n      - service: notify.farm_manager\n        data:\n          message: \"High temperature detected - cooling activated\"\n</code></pre></p> <p>Lighting Schedule <pre><code>automation:\n  - alias: \"Growth Lighting Schedule\"\n    trigger:\n      - platform: time\n        at: \"06:00:00\"\n    action:\n      - service: light.turn_on\n        entity_id: group.grow_lights\n        data:\n          brightness: 255\n          color_temp: 450\n\n  - alias: \"Night Mode\"\n    trigger:\n      - platform: time\n        at: \"22:00:00\"\n    action:\n      - service: light.turn_off\n        entity_id: group.grow_lights\n</code></pre></p>"},{"location":"guides/home-assistant/#advanced-automations","title":"Advanced Automations","text":"<p>Nutrient Dosing System <pre><code>automation:\n  - alias: \"Intelligent Nutrient Management\"\n    trigger:\n      - platform: state\n        entity_id: sensor.ec_level\n    condition:\n      - condition: template\n        value_template: &gt;\n          {{ states('sensor.ec_level') | float &lt; 1.8 }}\n      - condition: state\n        entity_id: binary_sensor.dosing_tank_full\n        state: 'on'\n    action:\n      - service: script.calculate_nutrient_dose\n        data:\n          current_ec: \"{{ states('sensor.ec_level') }}\"\n          target_ec: 2.2\n          tank_volume: 1000\n      - service: switch.turn_on\n        entity_id: switch.nutrient_pump_a\n      - delay:\n          seconds: \"{{ dose_time_a }}\"\n      - service: switch.turn_off\n        entity_id: switch.nutrient_pump_a\n</code></pre></p> <p>Climate Optimization <pre><code>automation:\n  - alias: \"VPD Optimization\"\n    trigger:\n      - platform: time_pattern\n        minutes: \"/5\"\n    action:\n      - service: script.calculate_vpd\n        data:\n          temperature: \"{{ states('sensor.air_temperature') }}\"\n          humidity: \"{{ states('sensor.relative_humidity') }}\"\n      - choose:\n          - conditions:\n              - condition: template\n                value_template: \"{{ vpd &lt; 0.8 }}\"\n            sequence:\n              - service: climate.set_temperature\n                entity_id: climate.greenhouse\n                data:\n                  temperature: &gt;\n                    {{ states('sensor.air_temperature') | float + 1 }}\n          - conditions:\n              - condition: template\n                value_template: \"{{ vpd &gt; 1.2 }}\"\n            sequence:\n              - service: humidifier.turn_on\n                entity_id: humidifier.greenhouse\n</code></pre></p>"},{"location":"guides/home-assistant/#integration-features","title":"Integration Features","text":""},{"location":"guides/home-assistant/#real-time-synchronization","title":"Real-Time Synchronization","text":"<p>Bidirectional Data Flow <pre><code>// Configuration\n{\n  sync: {\n    enabled: true,\n    direction: \"bidirectional\",\n    conflict_resolution: \"platform_priority\", // or \"ha_priority\"\n    sync_interval: 30,\n    batch_size: 100\n  }\n}\n</code></pre></p> <p>Event Streaming - State changes propagated instantly - Command execution in real-time - Alert synchronization - Status updates</p>"},{"location":"guides/home-assistant/#custom-components","title":"Custom Components","text":"<p>Creating Platform Entities in HA <pre><code># custom_components/vertical_farm/sensor.py\nclass VerticalFarmSensor(Entity):\n    def __init__(self, farm_id, sensor_type):\n        self._farm_id = farm_id\n        self._sensor_type = sensor_type\n        self._state = None\n\n    @property\n    def name(self):\n        return f\"Farm {self._farm_id} {self._sensor_type}\"\n\n    @property\n    def state(self):\n        return self._state\n\n    def update(self):\n        # Fetch from Vertical Farm API\n        self._state = fetch_sensor_data(\n            self._farm_id, \n            self._sensor_type\n        )\n</code></pre></p>"},{"location":"guides/home-assistant/#dashboard-integration","title":"Dashboard Integration","text":"<p>Lovelace Card Configuration <pre><code># Home Assistant dashboard\nviews:\n  - title: Vertical Farm\n    cards:\n      - type: vertical-stack\n        cards:\n          - type: sensor\n            entity: sensor.farm_temperature\n            graph: line\n            hours_to_show: 24\n\n          - type: gauge\n            entity: sensor.farm_humidity\n            min: 0\n            max: 100\n            severity:\n              green: 40\n              yellow: 30\n              red: 20\n\n          - type: entities\n            entities:\n              - light.grow_lights\n              - switch.irrigation_pump\n              - fan.exhaust_system\n</code></pre></p>"},{"location":"guides/home-assistant/#voice-control","title":"Voice Control","text":""},{"location":"guides/home-assistant/#setup-voice-assistants","title":"Setup Voice Assistants","text":"<p>Google Assistant Integration <pre><code>google_assistant:\n  project_id: your-project-id\n  service_account: !include service_account.json\n  exposed_domains:\n    - light\n    - switch\n    - sensor\n  entity_config:\n    light.grow_lights:\n      name: \"Greenhouse Lights\"\n      room: \"Farm\"\n    switch.irrigation:\n      name: \"Watering System\"\n      room: \"Farm\"\n</code></pre></p> <p>Alexa Integration <pre><code>alexa:\n  smart_home:\n    filter:\n      include_entities:\n        - light.grow_lights\n        - switch.irrigation_pump\n        - sensor.greenhouse_temperature\n    entity_config:\n      light.grow_lights:\n        display_categories: LIGHT\n        description: \"Main greenhouse lighting\"\n</code></pre></p>"},{"location":"guides/home-assistant/#voice-commands","title":"Voice Commands","text":"<p>Common commands: - \"Turn on greenhouse lights\" - \"What's the temperature in zone A?\" - \"Start irrigation cycle\" - \"Set grow lights to 75 percent\" - \"What's the humidity level?\"</p>"},{"location":"guides/home-assistant/#monitoring-alerts","title":"Monitoring &amp; Alerts","text":""},{"location":"guides/home-assistant/#alert-configuration","title":"Alert Configuration","text":"<p>Critical Alerts <pre><code>alert:\n  high_temperature:\n    name: High Temperature Alert\n    entity_id: binary_sensor.high_temp_alarm\n    state: 'on'\n    repeat: 30\n    can_acknowledge: true\n    skip_first: false\n    notifiers:\n      - farm_manager\n      - mobile_app\n    message: &gt;\n      Temperature in {{ trigger.to_state.attributes.location }} \n      is {{ states('sensor.temperature') }}\u00b0C\n</code></pre></p>"},{"location":"guides/home-assistant/#notification-channels","title":"Notification Channels","text":"<p>Configure multiple notification methods: <pre><code>notify:\n  - platform: smtp\n    name: email_notification\n    server: smtp.gmail.com\n    port: 587\n    sender: farm@example.com\n\n  - platform: pushbullet\n    name: push_notification\n    api_key: YOUR_API_KEY\n\n  - platform: telegram\n    name: telegram_notification\n    chat_id: YOUR_CHAT_ID\n</code></pre></p>"},{"location":"guides/home-assistant/#troubleshooting","title":"Troubleshooting","text":""},{"location":"guides/home-assistant/#connection-issues","title":"Connection Issues","text":"<p>Problem: Can't connect to Home Assistant <pre><code># Diagnostic steps\n1. Test HA URL in browser\n2. Verify token validity:\n   curl -X GET http://ha-url:8123/api/ \\\n     -H \"Authorization: Bearer YOUR_TOKEN\"\n3. Check network connectivity\n4. Review firewall rules\n5. Verify Cloudflare settings (if applicable)\n</code></pre></p> <p>Problem: Devices not syncing <pre><code># Solutions\n1. Check entity naming conventions\n2. Verify device mappings\n3. Review HA entity states\n4. Check sync intervals\n5. Review error logs\n</code></pre></p>"},{"location":"guides/home-assistant/#performance-optimization","title":"Performance Optimization","text":"<p>Reduce Latency - Use local Home Assistant instance - Optimize polling intervals - Enable WebSocket connections - Use MQTT for high-frequency data</p> <p>Improve Reliability - Implement retry logic - Use connection pooling - Cache frequently accessed data - Monitor connection health</p>"},{"location":"guides/home-assistant/#advanced-configuration","title":"Advanced Configuration","text":""},{"location":"guides/home-assistant/#mqtt-bridge","title":"MQTT Bridge","text":"<p>Setup MQTT Integration <pre><code># Home Assistant configuration.yaml\nmqtt:\n  broker: localhost\n  port: 1883\n  username: mqtt_user\n  password: mqtt_password\n  discovery: true\n  discovery_prefix: vertical_farm\n</code></pre></p> <p>Device Discovery via MQTT <pre><code>{\n  \"topic\": \"vertical_farm/sensor/temperature/config\",\n  \"payload\": {\n    \"name\": \"Greenhouse Temperature\",\n    \"state_topic\": \"vertical_farm/sensor/temperature/state\",\n    \"unit_of_measurement\": \"\u00b0C\",\n    \"device_class\": \"temperature\",\n    \"unique_id\": \"vf_temp_001\"\n  }\n}\n</code></pre></p>"},{"location":"guides/home-assistant/#custom-scripts","title":"Custom Scripts","text":"<p>Harvest Reminder Script <pre><code>script:\n  harvest_reminder:\n    alias: \"Check Harvest Schedule\"\n    sequence:\n      - service: vertical_farm.get_harvest_schedule\n        data:\n          days_ahead: 7\n      - condition: template\n        value_template: \"{{ harvest_items | length &gt; 0 }}\"\n      - service: notify.all\n        data:\n          title: \"Upcoming Harvests\"\n          message: &gt;\n            {{ harvest_items | length }} crops ready \n            for harvest this week\n</code></pre></p>"},{"location":"guides/home-assistant/#security-best-practices","title":"Security Best Practices","text":""},{"location":"guides/home-assistant/#token-management","title":"Token Management","text":"<ul> <li>Use long, random tokens</li> <li>Rotate tokens regularly</li> <li>Store securely (never in code)</li> <li>Use environment variables</li> <li>Implement token expiration</li> </ul>"},{"location":"guides/home-assistant/#network-security","title":"Network Security","text":"<ul> <li>Use HTTPS for remote access</li> <li>Implement VPN for local access</li> <li>Segregate IoT networks</li> <li>Enable firewall rules</li> <li>Monitor access logs</li> </ul>"},{"location":"guides/home-assistant/#access-control","title":"Access Control","text":"<ul> <li>Limit entity exposure</li> <li>Use read-only tokens where possible</li> <li>Implement user permissions</li> <li>Audit access regularly</li> <li>Log all actions</li> </ul>"},{"location":"guides/home-assistant/#maintenance","title":"Maintenance","text":""},{"location":"guides/home-assistant/#regular-tasks","title":"Regular Tasks","text":"<p>Weekly - Review automation logs - Check device connectivity - Verify data synchronization - Test critical automations</p> <p>Monthly - Update Home Assistant - Review and optimize automations - Clean up unused entities - Backup configurations</p> <p>Quarterly - Audit security settings - Review access tokens - Update integration mappings - Performance optimization</p>"},{"location":"guides/home-assistant/#related-resources","title":"Related Resources","text":"<ul> <li>Home Assistant Documentation</li> <li>Troubleshooting Guide</li> <li>API Reference</li> </ul>"},{"location":"guides/home-assistant/#next-steps","title":"Next Steps","text":"<ol> <li>Complete basic setup and test connection</li> <li>Map your critical devices</li> <li>Create essential automations</li> <li>Set up monitoring and alerts</li> <li>Explore advanced features</li> </ol> <p>For API documentation, see API Reference | For support, visit Troubleshooting</p>"},{"location":"guides/square-integration/","title":"Square POS Integration - Technical Documentation","text":""},{"location":"guides/square-integration/#executive-summary","title":"Executive Summary","text":"<p>The Square POS integration enables the Vertical Farm platform to seamlessly connect with Square's payment processing and business management ecosystem. This integration provides real-time synchronization of sales data, customer information, inventory tracking, and financial metrics, creating a unified business operations dashboard for vertical farm operators.</p> <p>Key Business Value: - Unified sales and operations dashboard - Real-time revenue tracking and analytics - Automated inventory synchronization - Customer relationship management - Financial reconciliation and reporting</p>"},{"location":"guides/square-integration/#table-of-contents","title":"Table of Contents","text":"<ol> <li>Architecture Overview</li> <li>Core Components</li> <li>Data Flow &amp; Synchronization</li> <li>Service Layer Implementation</li> <li>Database Schema &amp; Caching Strategy</li> <li>API Integration</li> <li>Security Model</li> <li>Configuration Guide</li> <li>Usage Examples</li> <li>Performance Characteristics</li> <li>Troubleshooting</li> </ol>"},{"location":"guides/square-integration/#architecture-overview","title":"Architecture Overview","text":""},{"location":"guides/square-integration/#system-boundaries","title":"System Boundaries","text":"<p>The Square integration operates as a bridge between Square's cloud-based POS system and the Vertical Farm platform, implementing a sophisticated caching layer to optimize performance and reduce API costs.</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    Vertical Farm Platform                    \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                             \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510         \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510         \u2502\n\u2502  \u2502  Business Page  \u2502\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25b6\u2502 Business Data    \u2502         \u2502\n\u2502  \u2502   (React UI)    \u2502         \u2502    Service       \u2502         \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518         \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518         \u2502\n\u2502           \u2502                           \u2502                    \u2502\n\u2502           \u25bc                           \u25bc                    \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510         \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510         \u2502\n\u2502  \u2502 Square Service  \u2502\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25b6\u2502   Supabase       \u2502         \u2502\n\u2502  \u2502   (Frontend)    \u2502         \u2502 Cache Tables     \u2502         \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518         \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518         \u2502\n\u2502           \u2502                           \u25b2                    \u2502\n\u2502           \u25bc                           \u2502                    \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510          \u2502\n\u2502  \u2502         FastAPI Backend                      \u2502          \u2502\n\u2502  \u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510      \u2502          \u2502\n\u2502  \u2502  \u2502 Square API   \u2502\u2500\u2500\u2500\u25b6\u2502 Cache Sync   \u2502      \u2502          \u2502\n\u2502  \u2502  \u2502  Endpoints   \u2502    \u2502   Service    \u2502      \u2502          \u2502\n\u2502  \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518      \u2502          \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518          \u2502\n\u2502                      \u2502                                     \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                       \u2502\n                       \u25bc\n              \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n              \u2502   Square API     \u2502\n              \u2502   (External)     \u2502\n              \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"guides/square-integration/#design-decisions","title":"Design Decisions","text":"<ol> <li>Cache-First Architecture: All Square data is cached in Supabase tables with TTL-based invalidation</li> <li>Service Layer Pattern: Mandatory use of service classes for all data operations</li> <li>Optimistic Synchronization: Background sync processes update cache without blocking UI</li> <li>Multi-Tenant Isolation: Row-Level Security ensures complete data separation between users</li> </ol>"},{"location":"guides/square-integration/#core-components","title":"Core Components","text":""},{"location":"guides/square-integration/#1-square-service-frontend","title":"1. Square Service (Frontend)","text":"<p>Location: <code>/frontend/src/services/squareService.ts</code></p> <p>The Square Service is the primary interface for all Square-related operations in the frontend. It implements:</p> <ul> <li>Configuration management (CRUD operations for Square API credentials)</li> <li>Connection testing and validation</li> <li>Data fetching from Square API (via backend proxy)</li> <li>Cache synchronization triggers</li> <li>Status monitoring</li> </ul> <p>Key Methods: <pre><code>// Configuration Management\ngetConfigs(): Promise&lt;SquareConfig[]&gt;\ncreateConfig(config: SquareConfigCreate): Promise&lt;SquareConfig&gt;\nupdateConfig(configId: string, config: SquareConfigUpdate): Promise&lt;SquareConfig&gt;\ndeleteConfig(configId: string): Promise&lt;void&gt;\nsetActiveConfig(configId: string): Promise&lt;SquareConfig&gt;\n\n// Data Operations\ngetLocations(configId: string): Promise&lt;SquareLocation[]&gt;\ngetProducts(configId: string): Promise&lt;SquareProduct[]&gt;\ngetCustomers(configId: string): Promise&lt;SquareCustomer[]&gt;\ngetOrders(configId: string, locationId?: string): Promise&lt;SquareOrder[]&gt;\ngetPayments(configId: string, locationId?: string): Promise&lt;SquarePayment[]&gt;\n\n// Synchronization\nsyncAllData(configId?: string): Promise&lt;void&gt;\nsyncCustomers(configId: string): Promise&lt;void&gt;\nsyncOrders(configId: string): Promise&lt;void&gt;\nsyncPayments(configId: string): Promise&lt;void&gt;\ngetSyncStatus(configId?: string): Promise&lt;SyncStatus&gt;\n</code></pre></p>"},{"location":"guides/square-integration/#2-business-data-service","title":"2. Business Data Service","text":"<p>Location: <code>/frontend/src/services/businessDataService.ts</code></p> <p>The Business Data Service aggregates Square data for business intelligence and reporting:</p> <ul> <li>Revenue metrics and growth calculations</li> <li>Customer analytics and segmentation</li> <li>Order trend analysis</li> <li>Time-series data preparation</li> <li>Cache status monitoring</li> </ul> <p>Key Aggregations: <pre><code>interface BusinessMetrics {\n  totalRevenue: number;\n  totalCustomers: number;\n  totalOrders: number;\n  averageOrderValue: number;\n  totalRefunds: number;\n  totalDisputes: number;\n  totalPayouts: number;\n  revenueGrowth: number;\n  customerGrowth: number;\n  orderGrowth: number;\n}\n</code></pre></p>"},{"location":"guides/square-integration/#3-backend-api-layer","title":"3. Backend API Layer","text":"<p>Location: <code>/backend/app/api/v1/endpoints/square.py</code></p> <p>The FastAPI backend provides:</p> <ul> <li>Secure proxy to Square API with credential management</li> <li>Webhook endpoint for real-time updates</li> <li>Cache synchronization orchestration</li> <li>Rate limiting and error handling</li> <li>Batch operations for efficiency</li> </ul>"},{"location":"guides/square-integration/#4-database-cache-layer","title":"4. Database Cache Layer","text":"<p>Migration: <code>/supabase/migrations/20250831151238_create_square_data_cache_tables.sql</code></p> <p>Comprehensive cache tables for all Square data types:</p> <ul> <li><code>square_cache_customers</code> - Customer profiles and contact information</li> <li><code>square_cache_orders</code> - Order details and line items</li> <li><code>square_cache_payments</code> - Payment transactions and methods</li> <li><code>square_cache_products</code> - Product catalog and variations</li> <li><code>square_cache_inventory</code> - Real-time inventory counts</li> <li><code>square_cache_refunds</code> - Refund transactions</li> <li><code>square_cache_disputes</code> - Payment disputes and chargebacks</li> <li><code>square_cache_payouts</code> - Bank payouts and settlements</li> <li><code>square_cache_team_members</code> - Staff and employee data</li> </ul>"},{"location":"guides/square-integration/#data-flow-synchronization","title":"Data Flow &amp; Synchronization","text":""},{"location":"guides/square-integration/#initial-setup-flow","title":"Initial Setup Flow","text":"<ol> <li>User enters Square API credentials in configuration UI</li> <li>Frontend calls <code>squareService.createConfig()</code></li> <li>Backend validates credentials with Square API</li> <li>Configuration stored in <code>user_square_configs</code> table</li> <li>Initial data sync triggered automatically</li> </ol>"},{"location":"guides/square-integration/#data-synchronization-process","title":"Data Synchronization Process","text":"<pre><code>User Action                 Frontend Service           Backend API              Square API\n    \u2502                            \u2502                         \u2502                        \u2502\n    \u251c\u2500\u2500\u2500\u2500 Sync Request \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25b6\u2502                         \u2502                        \u2502\n    \u2502                            \u251c\u2500\u2500\u2500\u2500 API Call \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25b6\u2502                        \u2502\n    \u2502                            \u2502                         \u251c\u2500\u2500\u2500\u2500 Fetch Data \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25b6\u2502\n    \u2502                            \u2502                         \u2502\u25c0\u2500\u2500\u2500\u2500 Raw Data \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n    \u2502                            \u2502                         \u2502                        \u2502\n    \u2502                            \u2502                    [Transform]                   \u2502\n    \u2502                            \u2502                         \u2502                        \u2502\n    \u2502                            \u2502                    [Cache Write]                 \u2502\n    \u2502                            \u2502                         \u25bc                        \u2502\n    \u2502                            \u2502                    Supabase DB                   \u2502\n    \u2502                            \u2502\u25c0\u2500\u2500\u2500\u2500 Success \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524                        \u2502\n    \u2502\u25c0\u2500\u2500\u2500\u2500 UI Update \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524                         \u2502                        \u2502\n</code></pre>"},{"location":"guides/square-integration/#cache-invalidation-strategy","title":"Cache Invalidation Strategy","text":"<p>Each cache table implements TTL-based invalidation:</p> <ul> <li>High Frequency (30 min): Inventory counts</li> <li>Medium Frequency (1 hour): Orders, active transactions</li> <li>Low Frequency (24 hours): Customers, completed payments</li> <li>Static (12 hours): Products, team members</li> </ul>"},{"location":"guides/square-integration/#service-layer-implementation","title":"Service Layer Implementation","text":""},{"location":"guides/square-integration/#base-service-pattern","title":"Base Service Pattern","text":"<p>All services extend from <code>BaseService</code> implementing:</p> <pre><code>class BusinessDataService extends BaseService {\n  private static instance: BusinessDataService;\n\n  static getInstance(): BusinessDataService {\n    if (!BusinessDataService.instance) {\n      BusinessDataService.instance = new BusinessDataService();\n    }\n    return BusinessDataService.instance;\n  }\n\n  private constructor() {\n    super();\n  }\n}\n</code></pre>"},{"location":"guides/square-integration/#error-handling","title":"Error Handling","text":"<p>Services implement comprehensive error handling:</p> <pre><code>async getBusinessMetrics(): Promise&lt;BusinessMetrics&gt; {\n  return this.executeWithAuth(async () =&gt; {\n    // Business logic here\n  }, \"Get business metrics\");\n}\n</code></pre>"},{"location":"guides/square-integration/#data-validation","title":"Data Validation","text":"<p>All inputs validated at service layer before database operations:</p> <pre><code>private async validateSquareConfig(config: SquareConfigCreate): Promise&lt;void&gt; {\n  if (!config.application_id || !config.access_token) {\n    throw new Error(\"Missing required Square credentials\");\n  }\n\n  if (![\"sandbox\", \"production\"].includes(config.environment)) {\n    throw new Error(\"Invalid environment specified\");\n  }\n}\n</code></pre>"},{"location":"guides/square-integration/#database-schema-caching-strategy","title":"Database Schema &amp; Caching Strategy","text":""},{"location":"guides/square-integration/#schema-design-principles","title":"Schema Design Principles","text":"<ol> <li>Normalization: Each Square entity has dedicated cache table</li> <li>Denormalization: Calculated fields stored for query performance</li> <li>Audit Trail: All tables include created_at, updated_at timestamps</li> <li>Soft Deletes: Data marked as deleted rather than removed</li> </ol>"},{"location":"guides/square-integration/#cache-key-generation","title":"Cache Key Generation","text":"<p>Cache keys ensure uniqueness across multi-tenant environment:</p> <pre><code>cache_key = CONCAT(user_id, ':', config_id, ':', entity_type, ':', entity_id)\n</code></pre>"},{"location":"guides/square-integration/#row-level-security","title":"Row-Level Security","text":"<p>Every cache table implements RLS policies:</p> <pre><code>-- Example: Customers table RLS\nCREATE POLICY \"customers_cache_select_own\" \n  ON public.square_cache_customers \n  FOR SELECT \n  USING (user_id = auth.uid());\n</code></pre>"},{"location":"guides/square-integration/#index-strategy","title":"Index Strategy","text":"<p>Strategic indexes for common query patterns:</p> <pre><code>-- Performance indexes for orders\nCREATE INDEX idx_square_cache_orders_created_at_square \n  ON public.square_cache_orders(created_at_square DESC);\n\nCREATE INDEX idx_square_cache_orders_state \n  ON public.square_cache_orders(state);\n\nCREATE INDEX idx_square_cache_orders_customer \n  ON public.square_cache_orders(customer_id);\n</code></pre>"},{"location":"guides/square-integration/#api-integration","title":"API Integration","text":""},{"location":"guides/square-integration/#authentication-flow","title":"Authentication Flow","text":"<pre><code>class SquareClient:\n    def __init__(self, config: SquareConfig):\n        self.client = Client(\n            access_token=config.access_token,\n            environment=config.environment\n        )\n</code></pre>"},{"location":"guides/square-integration/#rate-limiting","title":"Rate Limiting","text":"<p>Backend implements intelligent rate limiting:</p> <pre><code>@router.get(\"/sync/all/{config_id}\")\n@rate_limit(calls=10, period=timedelta(minutes=1))\nasync def sync_all_data(\n    config_id: str,\n    current_user: User = Depends(get_current_user)\n):\n    # Sync implementation\n</code></pre>"},{"location":"guides/square-integration/#webhook-processing","title":"Webhook Processing","text":"<p>Real-time updates via Square webhooks:</p> <pre><code>@router.post(\"/webhook\")\nasync def process_webhook(\n    request: Request,\n    payload: SquareWebhookPayload\n):\n    # Verify signature\n    if not verify_webhook_signature(request, payload):\n        raise HTTPException(status_code=401)\n\n    # Process event\n    await process_square_event(payload.event_type, payload.data)\n</code></pre>"},{"location":"guides/square-integration/#security-model","title":"Security Model","text":""},{"location":"guides/square-integration/#credential-storage","title":"Credential Storage","text":"<ul> <li>API tokens encrypted at rest using Supabase encryption</li> <li>Access tokens never exposed to frontend</li> <li>Environment-specific credential isolation</li> </ul>"},{"location":"guides/square-integration/#api-key-rotation","title":"API Key Rotation","text":"<pre><code>async rotateApiKey(configId: string): Promise&lt;void&gt; {\n  // 1. Generate new key in Square\n  // 2. Update configuration\n  // 3. Test new credentials\n  // 4. Invalidate old key\n}\n</code></pre>"},{"location":"guides/square-integration/#audit-logging","title":"Audit Logging","text":"<p>All Square operations logged for compliance:</p> <pre><code>this.logOperation(\"syncPayments\", {\n  configId,\n  timestamp: new Date(),\n  userId: currentUser.id,\n  recordCount: payments.length\n});\n</code></pre>"},{"location":"guides/square-integration/#configuration-guide","title":"Configuration Guide","text":""},{"location":"guides/square-integration/#initial-setup","title":"Initial Setup","text":"<ol> <li>Obtain Square Credentials</li> <li>Log into Square Developer Dashboard</li> <li>Create new application</li> <li>Generate access token</li> <li> <p>Note application ID</p> </li> <li> <p>Configure in Platform <pre><code>const config = {\n  name: \"Production POS\",\n  application_id: \"sq0idp-xxxxx\",\n  access_token: \"EAAAAE-xxxxx\",\n  environment: \"production\"\n};\n\nawait squareService.createConfig(config);\n</code></pre></p> </li> <li> <p>Activate Configuration <pre><code>await squareService.setActiveConfig(configId);\n</code></pre></p> </li> <li> <p>Initial Sync <pre><code>await squareService.syncAllData();\n</code></pre></p> </li> </ol>"},{"location":"guides/square-integration/#environment-variables","title":"Environment Variables","text":"<p>Required environment variables:</p> <pre><code># Backend\nSQUARE_WEBHOOK_SIGNATURE_KEY=your_webhook_key\nSQUARE_API_VERSION=2024-01-18\n\n# Frontend (Next.js)\nNEXT_PUBLIC_SQUARE_APP_ID=your_app_id\nNEXT_PUBLIC_SQUARE_ENVIRONMENT=sandbox\n</code></pre>"},{"location":"guides/square-integration/#usage-examples","title":"Usage Examples","text":""},{"location":"guides/square-integration/#displaying-business-metrics","title":"Displaying Business Metrics","text":"<pre><code>// In React component\nconst BusinessDashboard = () =&gt; {\n  const [metrics, setMetrics] = useState&lt;BusinessMetrics | null&gt;(null);\n\n  useEffect(() =&gt; {\n    const loadMetrics = async () =&gt; {\n      const data = await businessDataService.getBusinessMetrics();\n      setMetrics(data);\n    };\n\n    loadMetrics();\n  }, []);\n\n  return (\n    &lt;MetricsGrid&gt;\n      &lt;MetricCard\n        title=\"Total Revenue\"\n        value={metrics?.totalRevenue}\n        formatter={MetricFormatters.currency}\n      /&gt;\n      &lt;MetricCard\n        title=\"Total Orders\"\n        value={metrics?.totalOrders}\n        formatter={MetricFormatters.number}\n      /&gt;\n    &lt;/MetricsGrid&gt;\n  );\n};\n</code></pre>"},{"location":"guides/square-integration/#syncing-fresh-data","title":"Syncing Fresh Data","text":"<pre><code>// Manual sync trigger\nconst handleSyncData = async () =&gt; {\n  try {\n    setLoading(true);\n    await squareService.syncAllData();\n\n    // Refresh UI with new data\n    const metrics = await businessDataService.getBusinessMetrics();\n    setBusinessData(metrics);\n\n    toast.success(\"Data synchronized successfully\");\n  } catch (error) {\n    toast.error(\"Sync failed: \" + error.message);\n  } finally {\n    setLoading(false);\n  }\n};\n</code></pre>"},{"location":"guides/square-integration/#revenue-time-series","title":"Revenue Time Series","text":"<pre><code>// Generate revenue chart data\nconst getRevenueChartData = async (days: number = 30) =&gt; {\n  const timeSeries = await businessDataService.getRevenueTimeSeries(days);\n\n  return {\n    labels: timeSeries.map(d =&gt; d.date),\n    datasets: [{\n      label: 'Revenue',\n      data: timeSeries.map(d =&gt; d.revenue),\n      borderColor: 'rgb(75, 192, 192)',\n      tension: 0.1\n    }]\n  };\n};\n</code></pre>"},{"location":"guides/square-integration/#performance-characteristics","title":"Performance Characteristics","text":""},{"location":"guides/square-integration/#cache-performance","title":"Cache Performance","text":"<ul> <li>Cache Hit Ratio: Target &gt;90% for read operations</li> <li>Cache Miss Penalty: ~200-500ms for Square API call</li> <li>Bulk Sync Time: ~5-10 seconds for 1000 records</li> </ul>"},{"location":"guides/square-integration/#query-optimization","title":"Query Optimization","text":"<p>Optimized queries using proper indexes:</p> <pre><code>-- Fast customer lookup with order stats\nSELECT \n  c.*,\n  COUNT(o.id) as order_count,\n  SUM(o.total_amount) as total_spent\nFROM square_cache_customers c\nLEFT JOIN square_cache_orders o ON c.square_customer_id = o.customer_id\nWHERE c.user_id = auth.uid()\nGROUP BY c.id\nLIMIT 50;\n</code></pre>"},{"location":"guides/square-integration/#memory-management","title":"Memory Management","text":"<p>Service layer implements connection pooling:</p> <pre><code>class BusinessDataService extends BaseService {\n  private dbPool: ConnectionPool;\n\n  constructor() {\n    super();\n    this.dbPool = new ConnectionPool({\n      max: 10,\n      idleTimeoutMillis: 30000\n    });\n  }\n}\n</code></pre>"},{"location":"guides/square-integration/#troubleshooting","title":"Troubleshooting","text":""},{"location":"guides/square-integration/#common-issues","title":"Common Issues","text":""},{"location":"guides/square-integration/#1-authentication-failures","title":"1. Authentication Failures","text":"<p>Symptom: 401 errors when syncing data</p> <p>Solution: <pre><code>// Verify and refresh credentials\nconst status = await squareService.testConnection(configId);\nif (!status.connected) {\n  // Re-authenticate with Square\n  await squareService.updateConfig(configId, {\n    access_token: newToken\n  });\n}\n</code></pre></p>"},{"location":"guides/square-integration/#2-stale-cache-data","title":"2. Stale Cache Data","text":"<p>Symptom: Dashboard shows outdated information</p> <p>Solution: <pre><code>// Force cache refresh\nawait squareService.syncAllData(configId);\n\n// Check cache status\nconst cacheStatus = await businessDataService.getCacheStatus();\nif (cacheStatus.isStale) {\n  // Trigger background sync\n  await triggerBackgroundSync();\n}\n</code></pre></p>"},{"location":"guides/square-integration/#3-rate-limit-errors","title":"3. Rate Limit Errors","text":"<p>Symptom: 429 errors from Square API</p> <p>Solution: - Implement exponential backoff - Use batch operations - Increase cache TTLs - Implement queue-based sync</p>"},{"location":"guides/square-integration/#debug-logging","title":"Debug Logging","text":"<p>Enable detailed logging for troubleshooting:</p> <pre><code>// Frontend\nlocalStorage.setItem('DEBUG_SQUARE', 'true');\n\n// Backend\nLOG_LEVEL=DEBUG\nSQUARE_API_DEBUG=true\n</code></pre>"},{"location":"guides/square-integration/#health-checks","title":"Health Checks","text":"<p>Monitor integration health:</p> <pre><code>const checkSquareHealth = async () =&gt; {\n  const health = {\n    api: await squareService.testConnection(),\n    cache: await businessDataService.getCacheStatus(),\n    webhook: await checkWebhookStatus()\n  };\n\n  return health;\n};\n</code></pre>"},{"location":"guides/square-integration/#migration-path","title":"Migration Path","text":""},{"location":"guides/square-integration/#from-manual-pos-to-integrated-system","title":"From Manual POS to Integrated System","text":"<ol> <li>Phase 1: Read-only integration</li> <li>Import historical data</li> <li>Validate data accuracy</li> <li> <p>Train staff on dashboards</p> </li> <li> <p>Phase 2: Active synchronization</p> </li> <li>Enable webhooks</li> <li>Real-time inventory updates</li> <li> <p>Automated reporting</p> </li> <li> <p>Phase 3: Full integration</p> </li> <li>Bidirectional sync</li> <li>Automated reconciliation</li> <li>Predictive analytics</li> </ol>"},{"location":"guides/square-integration/#future-enhancements","title":"Future Enhancements","text":""},{"location":"guides/square-integration/#planned-features","title":"Planned Features","text":"<ol> <li>Advanced Analytics</li> <li>Predictive revenue forecasting</li> <li>Customer lifetime value calculation</li> <li> <p>Inventory optimization algorithms</p> </li> <li> <p>Automation</p> </li> <li>Automatic reorder points</li> <li>Smart pricing recommendations</li> <li> <p>Customer segmentation</p> </li> <li> <p>Integration Expansion</p> </li> <li>Square Loyalty integration</li> <li>Gift card management</li> <li>Appointment scheduling</li> </ol>"},{"location":"guides/square-integration/#api-version-management","title":"API Version Management","text":"<p>Stay current with Square API updates:</p> <pre><code>// Version check\nconst checkApiVersion = async () =&gt; {\n  const currentVersion = \"2024-01-18\";\n  const latestVersion = await getLatestSquareApiVersion();\n\n  if (currentVersion &lt; latestVersion) {\n    console.warn(`Square API update available: ${latestVersion}`);\n  }\n};\n</code></pre>"},{"location":"guides/square-integration/#conclusion","title":"Conclusion","text":"<p>The Square POS integration represents a sophisticated bridge between point-of-sale operations and farm management, enabling data-driven decision making through real-time business intelligence. The architecture prioritizes performance through intelligent caching, security through strict isolation, and reliability through comprehensive error handling.</p> <p>Key architectural wins: - Performance: Sub-100ms dashboard loads via caching - Scalability: Handles thousands of transactions efficiently - Security: Complete multi-tenant isolation with RLS - Maintainability: Clear service boundaries and patterns - Extensibility: Easy to add new Square features</p> <p>The integration follows the platform's core principles of service-layer architecture, mandatory RLS, and mobile-first design, ensuring consistency across the entire Vertical Farm ecosystem.</p>"},{"location":"guides/troubleshooting/","title":"Common Issues &amp; Solutions","text":"<p>Quick reference guide for resolving frequently encountered problems in the Vertical Farm platform.</p>"},{"location":"guides/troubleshooting/#login-authentication-issues","title":"Login &amp; Authentication Issues","text":""},{"location":"guides/troubleshooting/#cannot-login","title":"Cannot Login","text":"<p>Symptoms: Login button doesn't work, credentials rejected, spinning loader</p> <p>Common Causes &amp; Solutions:</p> <ol> <li> <p>Invalid Credentials <pre><code># Verify email/password are correct\n# Check for typos, caps lock\n# Try password reset if forgotten\n</code></pre></p> </li> <li> <p>Account Locked</p> </li> <li>Too many failed attempts (5+ in 30 minutes)</li> <li>Wait 30 minutes or contact admin</li> <li> <p>Check email for unlock instructions</p> </li> <li> <p>Browser Issues <pre><code>// Clear browser data\nlocalStorage.clear();\nsessionStorage.clear();\n// Clear cookies for the domain\n// Try incognito/private mode\n</code></pre></p> </li> <li> <p>Network Problems <pre><code># Check connectivity\nping api.vertical-farm.com\n# Check DNS resolution\nnslookup api.vertical-farm.com\n# Try different network/VPN\n</code></pre></p> </li> </ol>"},{"location":"guides/troubleshooting/#session-expired","title":"Session Expired","text":"<p>Symptoms: Suddenly logged out, \"Session expired\" message</p> <p>Solutions: <pre><code>// Extend session timeout (admin only)\n{\n  session: {\n    idle_timeout: 1800, // 30 minutes\n    absolute_timeout: 43200 // 12 hours\n  }\n}\n</code></pre></p> <ul> <li>Log in again</li> <li>Enable \"Remember me\" for longer sessions</li> <li>Check system time is correct</li> </ul>"},{"location":"guides/troubleshooting/#mfa-not-working","title":"MFA Not Working","text":"<p>Symptoms: MFA code rejected, can't receive codes</p> <p>Solutions: 1. Verify device time is synced 2. Use backup codes if available 3. Try SMS fallback if configured 4. Contact admin to reset MFA</p>"},{"location":"guides/troubleshooting/#farm-device-management","title":"Farm &amp; Device Management","text":""},{"location":"guides/troubleshooting/#farm-not-appearing","title":"Farm Not Appearing","text":"<p>Symptoms: Created farm doesn't show in list</p> <p>Diagnostic Steps: <pre><code>-- Check database (admin only)\nSELECT * FROM farms WHERE user_id = 'USER_ID';\n-- Verify RLS policies\nSELECT * FROM farms; -- Should filter automatically\n</code></pre></p> <p>Solutions: 1. Check filters in UI (active/inactive) 2. Verify user permissions 3. Refresh page (Ctrl+F5) 4. Check organization assignment</p>"},{"location":"guides/troubleshooting/#devices-showing-offline","title":"Devices Showing Offline","text":"<p>Symptoms: All devices show red/offline status</p> <p>Diagnostic Commands: <pre><code># Check device connectivity\ncurl -X GET https://api.vertical-farm.com/api/v1/devices/DEVICE_ID/status\n\n# Check MQTT broker\nmosquitto_sub -h mqtt.vertical-farm.com -t \"devices/+/status\" -v\n\n# Verify device configuration\ncat /etc/vertical-farm/device.conf\n</code></pre></p> <p>Solutions: 1. Network Issues    - Check device network connection    - Verify firewall rules (port 1883/8883 for MQTT)    - Test with ping/traceroute</p> <ol> <li>Authentication</li> <li>Regenerate device token</li> <li>Update device credentials</li> <li> <p>Check certificate expiration</p> </li> <li> <p>Power/Hardware</p> </li> <li>Verify device power supply</li> <li>Check physical connections</li> <li>Restart device</li> </ol>"},{"location":"guides/troubleshooting/#cannot-control-devices","title":"Cannot Control Devices","text":"<p>Symptoms: Control commands not working, buttons disabled</p> <p>Solutions: <pre><code>// Check user permissions\nconst permissions = await checkUserPermissions(userId, deviceId);\nconsole.log('Can control:', permissions.canControl);\n\n// Verify device is online\nconst status = await getDeviceStatus(deviceId);\nif (status !== 'online') {\n  console.error('Device offline');\n}\n\n// Check for automation conflicts\nconst automations = await getActiveAutomations(deviceId);\n</code></pre></p> <ol> <li>Verify device is online</li> <li>Check user has control permissions</li> <li>Disable conflicting automations</li> <li>Check device control limits</li> <li>Try manual override mode</li> </ol>"},{"location":"guides/troubleshooting/#data-analytics-issues","title":"Data &amp; Analytics Issues","text":""},{"location":"guides/troubleshooting/#missing-sensor-data","title":"Missing Sensor Data","text":"<p>Symptoms: Gaps in charts, no recent data</p> <p>Diagnostic Queries: <pre><code>-- Check latest data\nSELECT MAX(created_at) as last_reading \nFROM sensor_data \nWHERE device_id = 'DEVICE_ID';\n\n-- Check data frequency\nSELECT DATE_TRUNC('hour', created_at) as hour,\n       COUNT(*) as readings\nFROM sensor_data\nWHERE device_id = 'DEVICE_ID'\n  AND created_at &gt; NOW() - INTERVAL '24 hours'\nGROUP BY hour\nORDER BY hour;\n</code></pre></p> <p>Solutions: 1. Verify device is sending data 2. Check data retention policies 3. Verify time zone settings 4. Check sensor calibration 5. Review data filtering rules</p>"},{"location":"guides/troubleshooting/#reports-not-generating","title":"Reports Not Generating","text":"<p>Symptoms: Export fails, PDF blank, timeout errors</p> <p>Solutions: 1. Reduce Date Range <pre><code>// Instead of full year, try monthly\nconst report = await generateReport({\n  start: '2024-01-01',\n  end: '2024-01-31'\n});\n</code></pre></p> <ol> <li> <p>Check Background Jobs <pre><code># Check job queue status\nSELECT * FROM job_queue WHERE type = 'report_generation';\n</code></pre></p> </li> <li> <p>Memory Issues</p> </li> <li>Reduce data complexity</li> <li>Export CSV instead of PDF</li> <li>Use pagination for large datasets</li> </ol>"},{"location":"guides/troubleshooting/#incorrect-calculations","title":"Incorrect Calculations","text":"<p>Symptoms: Wrong totals, averages don't match</p> <p>Verification: <pre><code>-- Manual calculation to verify\nSELECT \n  AVG(value) as avg_value,\n  MIN(value) as min_value,\n  MAX(value) as max_value,\n  COUNT(*) as total_readings\nFROM sensor_data\nWHERE device_id = 'DEVICE_ID'\n  AND created_at BETWEEN '2024-01-01' AND '2024-01-31';\n</code></pre></p> <p>Solutions: 1. Check timezone conversions 2. Verify aggregation periods 3. Check for null/invalid values 4. Review calculation formulas 5. Verify unit conversions</p>"},{"location":"guides/troubleshooting/#performance-issues","title":"Performance Issues","text":""},{"location":"guides/troubleshooting/#slow-page-loading","title":"Slow Page Loading","text":"<p>Symptoms: Pages take &gt;3 seconds to load</p> <p>Browser Diagnostics: <pre><code>// Check performance timing\nconsole.log(performance.timing);\n\n// Measure specific operations\nperformance.mark('start-fetch');\nawait fetchData();\nperformance.mark('end-fetch');\nperformance.measure('fetch-time', 'start-fetch', 'end-fetch');\n</code></pre></p> <p>Solutions: 1. Clear browser cache 2. Disable browser extensions 3. Check network speed 4. Try different browser 5. Contact support if persistent</p>"},{"location":"guides/troubleshooting/#api-timeouts","title":"API Timeouts","text":"<p>Symptoms: \"Request timeout\" errors, spinning loaders</p> <p>Diagnostic Tools: <pre><code># Test API response time\ntime curl https://api.vertical-farm.com/health\n\n# Check specific endpoint\ncurl -w \"@curl-format.txt\" -o /dev/null -s \\\n  https://api.vertical-farm.com/api/v1/farms\n\n# curl-format.txt:\ntime_namelookup:  %{time_namelookup}\\n\ntime_connect:  %{time_connect}\\n\ntime_appconnect:  %{time_appconnect}\\n\ntime_pretransfer:  %{time_pretransfer}\\n\ntime_redirect:  %{time_redirect}\\n\ntime_starttransfer:  %{time_starttransfer}\\n\ntime_total:  %{time_total}\\n\n</code></pre></p> <p>Solutions: 1. Check server status page 2. Reduce request payload size 3. Implement pagination 4. Use caching where possible 5. Try during off-peak hours</p>"},{"location":"guides/troubleshooting/#integration-problems","title":"Integration Problems","text":""},{"location":"guides/troubleshooting/#home-assistant-not-connecting","title":"Home Assistant Not Connecting","text":"<p>Symptoms: \"Connection failed\", devices not syncing</p> <p>Diagnostic Steps: <pre><code># Test connection script\nimport requests\n\n# Test Home Assistant\nresponse = requests.get(\n    'http://homeassistant.local:8123/api/',\n    headers={'Authorization': f'Bearer {TOKEN}'}\n)\nprint(f\"Status: {response.status_code}\")\nprint(f\"Response: {response.json()}\")\n</code></pre></p> <p>Solutions: 1. Verify HA URL is correct 2. Check token hasn't expired 3. Verify network connectivity 4. Check Cloudflare service token (if used) 5. Review HA logs for errors</p>"},{"location":"guides/troubleshooting/#square-payment-failures","title":"Square Payment Failures","text":"<p>Symptoms: Payments not processing, \"Payment failed\"</p> <p>Debugging: <pre><code>// Check Square webhook logs\nconst webhookLogs = await getSquareWebhookLogs();\nconsole.log('Recent failures:', webhookLogs.filter(l =&gt; l.status === 'failed'));\n\n// Verify configuration\nconst config = await getSquareConfig();\nconsole.log('Environment:', config.environment); // Should be 'production' for real payments\n</code></pre></p> <p>Solutions: 1. Verify Square credentials 2. Check sandbox vs production mode 3. Verify webhook URLs 4. Check payment method validity 5. Review Square dashboard for errors</p>"},{"location":"guides/troubleshooting/#mobile-app-issues","title":"Mobile App Issues","text":""},{"location":"guides/troubleshooting/#pwa-not-installing","title":"PWA Not Installing","text":"<p>Symptoms: No install prompt, \"Add to Home Screen\" missing</p> <p>Requirements Check: <pre><code>// Check PWA requirements\nif ('serviceWorker' in navigator) {\n  console.log('\u2713 Service Worker supported');\n}\nif (window.location.protocol === 'https:') {\n  console.log('\u2713 HTTPS enabled');\n}\n// Check manifest\nfetch('/manifest.json')\n  .then(r =&gt; r.json())\n  .then(m =&gt; console.log('\u2713 Manifest valid:', m));\n</code></pre></p> <p>Solutions: 1. Ensure using HTTPS 2. Clear browser cache 3. Check manifest.json is valid 4. Verify service worker registration 5. Try different browser</p>"},{"location":"guides/troubleshooting/#push-notifications-not-working","title":"Push Notifications Not Working","text":"<p>Symptoms: Not receiving notifications, permission denied</p> <p>Diagnostic Code: <pre><code>// Check notification permission\nconsole.log('Permission:', Notification.permission);\n\n// Request permission\nNotification.requestPermission().then(permission =&gt; {\n  console.log('New permission:', permission);\n});\n\n// Test notification\nif (Notification.permission === 'granted') {\n  new Notification('Test', { body: 'This is a test notification' });\n}\n</code></pre></p> <p>Solutions: 1. Check browser notification settings 2. Verify VAPID keys configured 3. Check service worker is active 4. Review device settings 5. Test with different browser</p>"},{"location":"guides/troubleshooting/#database-issues","title":"Database Issues","text":""},{"location":"guides/troubleshooting/#connection-pool-exhausted","title":"Connection Pool Exhausted","text":"<p>Symptoms: \"Too many connections\", intermittent failures</p> <p>Monitoring: <pre><code>-- Check connection count\nSELECT count(*) FROM pg_stat_activity;\n\n-- View active connections\nSELECT pid, usename, application_name, state, query_start\nFROM pg_stat_activity\nWHERE state != 'idle'\nORDER BY query_start;\n\n-- Kill long-running queries\nSELECT pg_terminate_backend(pid)\nFROM pg_stat_activity\nWHERE state != 'idle'\n  AND query_start &lt; NOW() - INTERVAL '10 minutes';\n</code></pre></p> <p>Solutions: 1. Increase connection pool size 2. Reduce connection timeout 3. Implement connection pooling 4. Fix connection leaks 5. Scale database resources</p>"},{"location":"guides/troubleshooting/#slow-queries","title":"Slow Queries","text":"<p>Symptoms: Timeouts, slow page loads</p> <p>Analysis: <pre><code>-- Find slow queries\nSELECT query, mean_exec_time, calls\nFROM pg_stat_statements\nWHERE mean_exec_time &gt; 1000 -- ms\nORDER BY mean_exec_time DESC\nLIMIT 10;\n\n-- Explain query plan\nEXPLAIN ANALYZE\nSELECT * FROM large_table WHERE condition = 'value';\n</code></pre></p> <p>Solutions: 1. Add missing indexes 2. Optimize query structure 3. Implement caching 4. Partition large tables 5. Upgrade database resources</p>"},{"location":"guides/troubleshooting/#quick-fixes-checklist","title":"Quick Fixes Checklist","text":""},{"location":"guides/troubleshooting/#browser-issues","title":"Browser Issues","text":"<ul> <li>[ ] Clear cache and cookies</li> <li>[ ] Disable extensions</li> <li>[ ] Try incognito mode</li> <li>[ ] Update browser</li> <li>[ ] Try different browser</li> </ul>"},{"location":"guides/troubleshooting/#network-issues","title":"Network Issues","text":"<ul> <li>[ ] Check internet connection</li> <li>[ ] Disable VPN/proxy</li> <li>[ ] Check firewall settings</li> <li>[ ] Verify DNS resolution</li> <li>[ ] Try mobile hotspot</li> </ul>"},{"location":"guides/troubleshooting/#account-issues","title":"Account Issues","text":"<ul> <li>[ ] Verify credentials</li> <li>[ ] Check account status</li> <li>[ ] Review permissions</li> <li>[ ] Check organization membership</li> <li>[ ] Contact administrator</li> </ul>"},{"location":"guides/troubleshooting/#data-issues","title":"Data Issues","text":"<ul> <li>[ ] Refresh page</li> <li>[ ] Check filters</li> <li>[ ] Verify date range</li> <li>[ ] Check timezone</li> <li>[ ] Clear local storage</li> </ul>"},{"location":"guides/troubleshooting/#performance-issues_1","title":"Performance Issues","text":"<ul> <li>[ ] Reduce data range</li> <li>[ ] Enable pagination</li> <li>[ ] Clear cache</li> <li>[ ] Check network speed</li> <li>[ ] Try off-peak hours</li> </ul>"},{"location":"guides/troubleshooting/#getting-help","title":"Getting Help","text":""},{"location":"guides/troubleshooting/#before-contacting-support","title":"Before Contacting Support","text":"<ol> <li>Document the Issue:</li> <li>Screenshots/screen recordings</li> <li>Error messages (exact text)</li> <li>Steps to reproduce</li> <li>Time and date of occurrence</li> <li> <p>Browser/device information</p> </li> <li> <p>Basic Troubleshooting:</p> </li> <li>Try quick fixes above</li> <li>Check status page</li> <li>Search documentation</li> <li> <p>Review recent changes</p> </li> <li> <p>Gather Information:    <pre><code>// Browser info\nconsole.log(navigator.userAgent);\nconsole.log('Screen:', screen.width, 'x', screen.height);\n\n// Network info\nconsole.log('Online:', navigator.onLine);\nconsole.log('Connection:', navigator.connection?.effectiveType);\n</code></pre></p> </li> </ol>"},{"location":"guides/troubleshooting/#contact-support","title":"Contact Support","text":"<p>Email: support@vertical-farm.com Urgent: Use in-app chat during business hours Documentation: Check development debugging guide</p> <p>Include: - Account email - Issue description - Error messages - Steps to reproduce - Expected vs actual behavior - Screenshots if applicable</p> <p>For advanced debugging, see Debugging Guide | For integration help, check Guides</p>"},{"location":"operations/","title":"Operations","text":""},{"location":"operations/#deployment","title":"Deployment","text":"Doc Description Deployment Guide Production deployment (Cloudflare, unRAID)"},{"location":"operations/#key-metrics","title":"Key Metrics","text":"Service Target Response Time API 99.9% uptime &lt;200ms p95 Frontend 99.9% uptime &lt;1s FCP Database 99.95% uptime &lt;50ms p95"},{"location":"operations/#quick-reference","title":"Quick Reference","text":"<pre><code># View production logs (on unRAID)\ndocker logs backend -f --tail=100\ndocker logs frontend -f --tail=100\n\n# Check service health\ndocker ps --filter \"network=vertical-farm-network\"\n\n# Restart services\ndocker restart backend\ndocker restart frontend\n</code></pre>"},{"location":"operations/#related","title":"Related","text":"<ul> <li>Docker Guide - Container workflow</li> <li>Database Guide - Schema management</li> <li>CLAUDE.md - Architecture standards</li> </ul>"},{"location":"operations/deployment/","title":"Cloudflare Configuration Guide","text":"<p>Complete setup and configuration guide for Cloudflare CDN, caching, security, and performance optimization for the Vertical Farm platform.</p>"},{"location":"operations/deployment/#overview","title":"Overview","text":"<p>Cloudflare provides multiple layers of protection and performance enhancement: - CDN - Global content delivery network - Caching - Edge caching for static and dynamic content - Security - DDoS protection, WAF, bot management - Performance - Optimization, minification, compression</p>"},{"location":"operations/deployment/#initial-setup","title":"Initial Setup","text":""},{"location":"operations/deployment/#step-1-add-your-domain","title":"Step 1: Add Your Domain","text":"<ol> <li>Log into Cloudflare Dashboard</li> <li>Click Add a Site</li> <li>Enter your domain: <code>yourdomain.com</code></li> <li>Select plan (Pro recommended for production)</li> <li>Update nameservers at your registrar</li> </ol>"},{"location":"operations/deployment/#step-2-dns-configuration","title":"Step 2: DNS Configuration","text":"<pre><code># Required DNS Records\nA     @            YOUR_SERVER_IP        Proxied\nA     www          YOUR_SERVER_IP        Proxied\nCNAME api          api.render.com        Proxied\nCNAME app          app.render.com        Proxied\nTXT   _dmarc       v=DMARC1; p=none      DNS only\nMX    @            mail.yourdomain.com   DNS only\n</code></pre>"},{"location":"operations/deployment/#step-3-ssltls-configuration","title":"Step 3: SSL/TLS Configuration","text":"<ol> <li>Navigate to SSL/TLS &gt; Overview</li> <li>Set encryption mode: Full (Strict)</li> <li>Enable Always Use HTTPS</li> <li>Enable Automatic HTTPS Rewrites</li> </ol> <pre><code># SSL/TLS Settings\nEncryption Mode: Full (Strict)\nMinimum TLS Version: TLS 1.2\nOpportunistic Encryption: On\nTLS 1.3: On\nAutomatic HTTPS Rewrites: On\n</code></pre>"},{"location":"operations/deployment/#caching-configuration","title":"Caching Configuration","text":""},{"location":"operations/deployment/#page-rules-priority-order","title":"Page Rules (Priority Order)","text":"<pre><code># 1. Bypass health checks\nURL: *yourdomain.com/health*\nSettings:\n  - Cache Level: Bypass\n  - Security Level: Essentially Off\n\n# 2. Static assets - aggressive caching\nURL: *yourdomain.com/static/*\nSettings:\n  - Cache Level: Cache Everything\n  - Edge Cache TTL: 1 year\n  - Browser Cache TTL: 1 year\n\n# 3. API endpoints - smart caching\nURL: *yourdomain.com/api/*\nSettings:\n  - Cache Level: Standard\n  - Edge Cache TTL: 5 minutes\n  - Origin Cache Control: On\n  - Cache Deception Armor: On\n\n# 4. Frontend - standard caching\nURL: *yourdomain.com/*\nSettings:\n  - Cache Level: Standard\n  - Browser Cache TTL: 4 hours\n  - Origin Cache Control: On\n</code></pre>"},{"location":"operations/deployment/#cache-rules-new-method","title":"Cache Rules (New Method)","text":"<pre><code>// Modern cache rules configuration\n{\n  \"rules\": [\n    {\n      \"expression\": \"(http.request.uri.path contains \\\"/static/\\\")\",\n      \"action\": \"cache\",\n      \"action_parameters\": {\n        \"edge_ttl\": 31536000,\n        \"browser_ttl\": 31536000,\n        \"cache_key\": {\n          \"custom_key\": {\n            \"query_string\": { \"exclude\": [\"timestamp\"] }\n          }\n        }\n      }\n    },\n    {\n      \"expression\": \"(http.request.uri.path contains \\\"/api/\\\")\",\n      \"action\": \"cache\",\n      \"action_parameters\": {\n        \"edge_ttl\": 300,\n        \"respect_origin\": true,\n        \"cache_key\": {\n          \"custom_key\": {\n            \"header\": [\"Authorization\"],\n            \"query_string\": { \"include\": [\"*\"] }\n          }\n        }\n      }\n    }\n  ]\n}\n</code></pre>"},{"location":"operations/deployment/#cache-api-configuration","title":"Cache API Configuration","text":"<pre><code>// Cloudflare Worker for advanced caching\naddEventListener('fetch', event =&gt; {\n  event.respondWith(handleRequest(event.request))\n})\n\nasync function handleRequest(request) {\n  const cache = caches.default\n  const cacheKey = new Request(request.url, request)\n\n  // Check cache\n  let response = await cache.match(cacheKey)\n\n  if (!response) {\n    // Cache miss - fetch from origin\n    response = await fetch(request)\n\n    // Cache successful responses\n    if (response.status === 200) {\n      const headers = new Headers(response.headers)\n      headers.set('Cache-Control', 'public, max-age=300')\n\n      response = new Response(response.body, {\n        status: response.status,\n        statusText: response.statusText,\n        headers: headers\n      })\n\n      // Store in cache\n      event.waitUntil(cache.put(cacheKey, response.clone()))\n    }\n  }\n\n  return response\n}\n</code></pre>"},{"location":"operations/deployment/#security-configuration","title":"Security Configuration","text":""},{"location":"operations/deployment/#waf-web-application-firewall","title":"WAF (Web Application Firewall)","text":"<ol> <li>Navigate to Security &gt; WAF</li> <li>Enable Managed Rules</li> <li>Configure custom rules:</li> </ol> <pre><code># Custom WAF Rules\n- Name: Block SQL Injection\n  Expression: (http.request.uri.query contains \"union select\") or \n              (http.request.uri.query contains \"drop table\")\n  Action: Block\n\n- Name: Rate Limiting - API\n  Expression: (http.request.uri.path contains \"/api/\")\n  Action: Challenge\n  Rate: 100 requests per minute per IP\n\n- Name: Block Bad Bots\n  Expression: (cf.client.bot) and not (cf.verified_bot)\n  Action: Block\n\n- Name: Geo-blocking (if required)\n  Expression: (ip.geoip.country in {\"CN\" \"RU\" \"KP\"})\n  Action: Challenge\n</code></pre>"},{"location":"operations/deployment/#ddos-protection","title":"DDoS Protection","text":"<pre><code># DDoS Settings\nDDoS Protection: On\nSensitivity Level: High\n\n# Advanced DDoS\nHTTP DDoS attack protection:\n  Sensitivity: High\n  Action: Block\n\nNetwork-layer DDoS attack protection:\n  Sensitivity: High\n  Action: Block\n</code></pre>"},{"location":"operations/deployment/#bot-management","title":"Bot Management","text":"<pre><code># Bot Fight Mode\nBot Fight Mode: On\nVerified Bots: Allow\nJavaScript Detections: On\n\n# Super Bot Fight Mode (Pro)\nDefinitely Automated: Block\nLikely Automated: Challenge\nVerified Bots: Allow\nStatic Resources: Allow\n</code></pre>"},{"location":"operations/deployment/#security-headers","title":"Security Headers","text":"<pre><code># Transform Rules - Response Headers\nSet Headers:\n  X-Content-Type-Options: nosniff\n  X-Frame-Options: SAMEORIGIN\n  X-XSS-Protection: 1; mode=block\n  Referrer-Policy: strict-origin-when-cross-origin\n  Permissions-Policy: geolocation=(), microphone=(), camera=()\n\nContent-Security-Policy: &gt;\n  default-src 'self';\n  script-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net;\n  style-src 'self' 'unsafe-inline';\n  img-src 'self' data: https:;\n  font-src 'self' data:;\n  connect-src 'self' https://api.yourdomain.com wss://yourdomain.com;\n</code></pre>"},{"location":"operations/deployment/#performance-optimization","title":"Performance Optimization","text":""},{"location":"operations/deployment/#speed-settings","title":"Speed Settings","text":"<pre><code># Speed &gt; Optimization\nAuto Minify:\n  JavaScript: On\n  CSS: On\n  HTML: On\n\nBrotli: On\nRocket Loader: Off (can break React apps)\nMirage: On\nPolish: Lossy\nWebP: On\nEarly Hints: On\nHTTP/2: On\nHTTP/3 (QUIC): On\n0-RTT Connection Resumption: On\n</code></pre>"},{"location":"operations/deployment/#image-optimization","title":"Image Optimization","text":"<pre><code># Images &gt; Polish\nPolish: Lossy\nWebP: On\n\n# Resize images on-the-fly\nImage Resizing: On\nVariants:\n  thumbnail: width=150,height=150,fit=cover\n  mobile: width=640,quality=85\n  desktop: width=1920,quality=90\n</code></pre>"},{"location":"operations/deployment/#mobile-optimization","title":"Mobile Optimization","text":"<pre><code># Speed &gt; Optimization &gt; Mobile\nAccelerated Mobile Pages (AMP): On\nMobile Redirect: Off\n</code></pre>"},{"location":"operations/deployment/#analytics-monitoring","title":"Analytics &amp; Monitoring","text":""},{"location":"operations/deployment/#web-analytics-setup","title":"Web Analytics Setup","text":"<ol> <li>Navigate to Analytics &gt; Web Analytics</li> <li>Add your site</li> <li>Install tracking script (automatic with proxy)</li> </ol>"},{"location":"operations/deployment/#performance-monitoring","title":"Performance Monitoring","text":"<pre><code># Key Metrics to Monitor\n- Cache Hit Ratio: Target &gt; 90%\n- Bandwidth Saved: Track monthly\n- Threats Blocked: Security effectiveness\n- Response Time: Edge vs Origin\n- Error Rate: 4xx and 5xx responses\n</code></pre>"},{"location":"operations/deployment/#real-user-monitoring-rum","title":"Real User Monitoring (RUM)","text":"<pre><code>// Add to your frontend\n&lt;script defer src=\"https://static.cloudflareinsights.com/beacon.min.js\" \n        data-cf-beacon='{\"token\": \"YOUR_RUM_TOKEN\"}'&gt;&lt;/script&gt;\n</code></pre>"},{"location":"operations/deployment/#workers-configuration","title":"Workers Configuration","text":""},{"location":"operations/deployment/#deploy-edge-functions","title":"Deploy Edge Functions","text":"<pre><code>// wrangler.toml\nname = \"vertical-farm-worker\"\nmain = \"src/index.js\"\ncompatibility_date = \"2024-01-01\"\n\n[env.production]\nroute = \"yourdomain.com/api/*\"\nzone_id = \"YOUR_ZONE_ID\"\n\n[env.production.vars]\nAPI_KEY = \"YOUR_API_KEY\"\n</code></pre>"},{"location":"operations/deployment/#example-worker-api-rate-limiting","title":"Example Worker - API Rate Limiting","text":"<pre><code>// Rate limiting worker\nconst RATE_LIMIT = 100; // requests per minute\nconst cache = caches.default;\n\nasync function handleRequest(request) {\n  const ip = request.headers.get('CF-Connecting-IP');\n  const key = `rate-limit:${ip}`;\n\n  // Check rate limit\n  const count = await getCount(key);\n\n  if (count &gt; RATE_LIMIT) {\n    return new Response('Rate limit exceeded', { status: 429 });\n  }\n\n  // Increment counter\n  await incrementCount(key);\n\n  // Forward request\n  return fetch(request);\n}\n\nasync function getCount(key) {\n  const response = await cache.match(key);\n  if (!response) return 0;\n  return parseInt(await response.text());\n}\n\nasync function incrementCount(key) {\n  const count = await getCount(key) + 1;\n  const response = new Response(count.toString(), {\n    headers: { 'Cache-Control': 'max-age=60' }\n  });\n  await cache.put(key, response);\n}\n</code></pre>"},{"location":"operations/deployment/#zero-trust-configuration","title":"Zero Trust Configuration","text":""},{"location":"operations/deployment/#access-policies","title":"Access Policies","text":"<pre><code># Protect admin routes\nApplication: Admin Panel\nDomain: admin.yourdomain.com\nPolicy:\n  - Name: Require Authentication\n    Action: Allow\n    Include:\n      - Email ends with @yourdomain.com\n      - Country = US\n    Require:\n      - Purpose = admin\n      - Valid TOTP\n</code></pre>"},{"location":"operations/deployment/#service-tokens","title":"Service Tokens","text":"<pre><code># Create service token for API access\ncf access service-token create \\\n  --name \"Vertical Farm API\" \\\n  --duration 8760h\n</code></pre>"},{"location":"operations/deployment/#load-balancing","title":"Load Balancing","text":""},{"location":"operations/deployment/#configure-load-balancer","title":"Configure Load Balancer","text":"<pre><code># Load Balancing &gt; Create Pool\nPool Name: vertical-farm-backend\nOrigins:\n  - Address: backend1.yourdomain.com:443\n    Weight: 1\n    Enabled: true\n  - Address: backend2.yourdomain.com:443\n    Weight: 1\n    Enabled: true\n\nHealth Check:\n  Type: HTTPS\n  Path: /health\n  Interval: 60 seconds\n  Timeout: 5 seconds\n  Retries: 2\n\nLoad Balancer:\n  Name: vertical-farm-lb\n  Default Pool: vertical-farm-backend\n  Fallback Pool: vertical-farm-backup\n  Session Affinity: Cookie\n  Steering Policy: Dynamic\n</code></pre>"},{"location":"operations/deployment/#argo-smart-routing","title":"Argo Smart Routing","text":""},{"location":"operations/deployment/#enable-argo","title":"Enable Argo","text":"<ol> <li>Navigate to Traffic &gt; Argo</li> <li>Enable Argo Smart Routing</li> <li>Enable Tiered Caching</li> </ol> <p>Benefits: - 30% faster on average - Reduced origin load - Improved reliability - Real-time traffic routing</p>"},{"location":"operations/deployment/#troubleshooting","title":"Troubleshooting","text":""},{"location":"operations/deployment/#common-issues","title":"Common Issues","text":"<p>Cache Not Working <pre><code># Check cache headers\ncurl -I https://yourdomain.com/api/test\n# Look for CF-Cache-Status header\n\n# Purge cache\ncurl -X POST \"https://api.cloudflare.com/client/v4/zones/ZONE_ID/purge_cache\" \\\n  -H \"Authorization: Bearer API_TOKEN\" \\\n  -H \"Content-Type: application/json\" \\\n  --data '{\"purge_everything\":true}'\n</code></pre></p> <p>SSL Issues - Verify SSL mode is Full (Strict) - Check origin certificate validity - Ensure CAA records allow Cloudflare</p> <p>Performance Issues - Review Analytics for slow endpoints - Check origin response times - Verify caching rules - Monitor bandwidth usage</p>"},{"location":"operations/deployment/#debugging-tools","title":"Debugging Tools","text":"<pre><code># Test from Cloudflare edge\ncurl -H \"CF-Connecting-IP: TEST\" https://yourdomain.com/api/test\n\n# Check security events\n# Dashboard &gt; Security &gt; Events\n\n# View cache analytics\n# Dashboard &gt; Analytics &gt; Cache\n</code></pre>"},{"location":"operations/deployment/#monitoring-alerts","title":"Monitoring &amp; Alerts","text":""},{"location":"operations/deployment/#setup-notifications","title":"Setup Notifications","text":"<ol> <li>Navigate to Notifications</li> <li>Configure alerts for:</li> <li>DDoS attacks</li> <li>Origin errors</li> <li>SSL certificate expiration</li> <li>Usage spikes</li> <li>Security events</li> </ol>"},{"location":"operations/deployment/#api-monitoring","title":"API Monitoring","text":"<pre><code># Monitor Cloudflare metrics\nimport requests\n\nheaders = {\n    'Authorization': f'Bearer {API_TOKEN}',\n    'Content-Type': 'application/json'\n}\n\n# Get zone analytics\nresponse = requests.get(\n    f'https://api.cloudflare.com/client/v4/zones/{ZONE_ID}/analytics/dashboard',\n    headers=headers,\n    params={'since': '-1440', 'until': '0'}\n)\n\ndata = response.json()\nprint(f\"Requests: {data['result']['totals']['requests']}\")\nprint(f\"Cache hit ratio: {data['result']['totals']['cached_ratio']}%\")\n</code></pre>"},{"location":"operations/deployment/#cost-optimization","title":"Cost Optimization","text":""},{"location":"operations/deployment/#bandwidth-management","title":"Bandwidth Management","text":"<ul> <li>Enable Polish for image compression</li> <li>Use Cloudflare Images for transformations</li> <li>Implement aggressive caching</li> <li>Enable Argo Tiered Cache</li> </ul>"},{"location":"operations/deployment/#feature-recommendations","title":"Feature Recommendations","text":"<p>Essential (Free/Pro) - CDN &amp; Caching - SSL/TLS - DDoS Protection - Basic WAF</p> <p>Advanced (Business/Enterprise) - Advanced DDoS - Custom WAF rules - Image optimization - Load balancing - Argo routing</p>"},{"location":"operations/deployment/#best-practices","title":"Best Practices","text":"<ol> <li>Always proxy DNS records for protection</li> <li>Use Full (Strict) SSL mode</li> <li>Implement rate limiting on APIs</li> <li>Monitor cache hit ratios regularly</li> <li>Purge cache after deployments</li> <li>Backup DNS records externally</li> <li>Test rules in Log mode first</li> <li>Document all custom configurations</li> </ol>"},{"location":"operations/deployment/#related-documentation","title":"Related Documentation","text":"<ul> <li>Docker Guide</li> <li>Cloudflare Documentation</li> <li>CLAUDE.md - Architecture standards</li> </ul> <p>For support, check Cloudflare Status | For API reference, see Cloudflare API Docs</p>"},{"location":"planning/standard-pm-flow/","title":"Standard PM Flow","text":"<p>Step-by-step guide for project management on the Vertical Farm project using Claude Code slash commands.</p>"},{"location":"planning/standard-pm-flow/#overview","title":"Overview","text":"<pre><code>Audit -&gt; Vision -&gt; Research -&gt; Roadmap -&gt; Issues -&gt; Development\n   ^                                         |\n   +--------------- Reflect &lt;----------------+\n</code></pre> Phase Commands Purpose 1. Audit <code>/audit</code> Capture project state 2. Vision <code>/vision</code> Define goals and gaps 3. Research <code>/research &lt;topic&gt;</code> Investigate solutions 4. Roadmap <code>/roadmap</code> Plan milestones 5. Issues <code>/issues</code> Create GitHub issues 6. Optimize <code>/kanban</code>, <code>/changelog</code> Maintain board health 7. Reflect <code>/pm-reflect</code> Improve process"},{"location":"planning/standard-pm-flow/#prerequisites","title":"Prerequisites","text":"<p>Before starting: - Access to the GitHub Project Board - Familiarity with CLAUDE.md project standards - Understanding of the Standard Dev Flow</p>"},{"location":"planning/standard-pm-flow/#phase-1-project-audit","title":"Phase 1: Project Audit","text":""},{"location":"planning/standard-pm-flow/#11-run-the-audit","title":"1.1 Run the Audit","text":"<pre><code>/tools:01_project_management:audit\n</code></pre> <p>This command: - Analyzes codebase structure and health - Reviews GitHub board state (open issues, PRs) - Collects metrics (test coverage, dependencies) - Compares to previous audits for trends</p>"},{"location":"planning/standard-pm-flow/#12-review-output","title":"1.2 Review Output","text":"<p>The audit creates <code>docs/planning/audits/YYYY-MM-DD.md</code> with: - Executive summary - Feature completeness by domain - Technical debt checklist - Architecture health assessment - Recommended focus areas</p> <p>Use this as the foundation for all planning decisions.</p>"},{"location":"planning/standard-pm-flow/#phase-2-vision-definition","title":"Phase 2: Vision Definition","text":""},{"location":"planning/standard-pm-flow/#21-define-or-update-vision","title":"2.1 Define or Update Vision","text":"<pre><code>/tools:01_project_management:vision\n</code></pre> <p>This command: - Reviews existing vision document (if present) - Asks for your top 3 priorities - Defines success metrics - Identifies gaps between current and desired state</p>"},{"location":"planning/standard-pm-flow/#22-answer-the-questions","title":"2.2 Answer the Questions","text":"<p>Claude will ask: 1. \"What are your top 3 priorities for this project right now?\" 2. \"Are there any new goals or features you want to add?\" 3. \"What constraints should we consider?\" 4. \"What does success look like for the next milestone?\"</p> <p>Be specific. Clear answers lead to better planning.</p>"},{"location":"planning/standard-pm-flow/#23-review-gap-classification","title":"2.3 Review Gap Classification","text":"<p>Each gap is classified using the Linear Method framework:</p> Classification Meaning Priority BLOCKER Prevents users from using the product Immediate HIGH ENABLER Significantly increases value This cycle LOW ENABLER Nice-to-have improvement Parking lot"},{"location":"planning/standard-pm-flow/#phase-3-research-optional","title":"Phase 3: Research (Optional)","text":""},{"location":"planning/standard-pm-flow/#31-research-specific-topics","title":"3.1 Research Specific Topics","text":"<pre><code>/tools:01_project_management:research real-time notifications\n</code></pre> <p>Replace the topic with your specific research need. This command: - Searches for best practices - Evaluates technology options - Checks compatibility with your stack - Provides recommendations with justification</p>"},{"location":"planning/standard-pm-flow/#32-common-research-topics","title":"3.2 Common Research Topics","text":"<pre><code>/tools:01_project_management:research Next.js 15 caching strategies\n/tools:01_project_management:research Supabase real-time subscriptions\n/tools:01_project_management:research Home Assistant integration patterns\n</code></pre>"},{"location":"planning/standard-pm-flow/#33-review-research-output","title":"3.3 Review Research Output","text":"<p>Research creates <code>docs/planning/research/YYYY-MM-DD-{topic}.md</code> with: - Executive summary - Technology options with pros/cons - Recommended approach - Implementation notes - Estimated effort</p>"},{"location":"planning/standard-pm-flow/#phase-4-roadmap-planning","title":"Phase 4: Roadmap Planning","text":""},{"location":"planning/standard-pm-flow/#41-create-the-roadmap","title":"4.1 Create the Roadmap","text":"<pre><code>/tools:01_project_management:roadmap\n</code></pre> <p>This command: - Reviews vision goals and research findings - Breaks work into milestones - Prioritizes by dependencies and value - Creates/updates GitHub milestones</p>"},{"location":"planning/standard-pm-flow/#42-scoping-checklist-linear-method","title":"4.2 Scoping Checklist (Linear Method)","text":"<p>Before finalizing each milestone, verify:</p> <ol> <li>Can it be completed in 1-3 weeks with 1-3 people?</li> <li>Can individual tasks be done in hours, not days?</li> <li>If NO to either: break into sequential stages</li> </ol> <p>Example: - TOO BIG: \"Build complete IoT integration\" - RIGHT SIZE: \"Stage 1: Device discovery API\" (1 week)</p>"},{"location":"planning/standard-pm-flow/#43-review-output","title":"4.3 Review Output","text":"<p>The roadmap creates <code>docs/planning/roadmap.md</code> with: - Current focus - Milestones with deliverables - Dependencies map - Risks and mitigations</p>"},{"location":"planning/standard-pm-flow/#phase-5-issue-generation","title":"Phase 5: Issue Generation","text":""},{"location":"planning/standard-pm-flow/#51-generate-issues","title":"5.1 Generate Issues","text":"<pre><code>/tools:01_project_management:issues\n</code></pre> <p>This command: - Reviews roadmap milestones - Checks for existing issues (avoids duplicates) - Drafts issue specifications - Asks for confirmation before creating</p>"},{"location":"planning/standard-pm-flow/#52-confirm-creation","title":"5.2 Confirm Creation","text":"<p>Claude will show a table of proposed issues:</p> # Title Type Milestone - feat: Add device discovery enhancement v2.0 - fix: Resolve auth timeout bug v2.0 <p>Review carefully. Confirm to create the issues.</p>"},{"location":"planning/standard-pm-flow/#53-handoff-to-development","title":"5.3 Handoff to Development","text":"<p>After <code>/issues</code> completes, you're ready to start the development loop:</p> <pre><code>/tools:02_development:plan 123\n</code></pre> <p>See Standard Dev Flow for the full development process.</p>"},{"location":"planning/standard-pm-flow/#phase-6-board-optimization","title":"Phase 6: Board Optimization","text":""},{"location":"planning/standard-pm-flow/#61-optimize-the-kanban-board","title":"6.1 Optimize the Kanban Board","text":"<pre><code>/tools:01_project_management:kanban\n</code></pre> <p>This command: - Identifies stale issues (14+ days inactive) - Detects blocked items - Checks priority alignment - Flags orphaned items (no milestone/labels)</p>"},{"location":"planning/standard-pm-flow/#62-generate-changelog","title":"6.2 Generate Changelog","text":"<pre><code>/tools:01_project_management:changelog\n</code></pre> <p>This command: - Collects merged PRs from the past week - Collects closed issues from the past week - Calculates shipping metrics - Creates weekly progress report</p> <p>Run weekly to maintain accountability and track momentum.</p>"},{"location":"planning/standard-pm-flow/#phase-7-reflection","title":"Phase 7: Reflection","text":""},{"location":"planning/standard-pm-flow/#71-review-pm-effectiveness","title":"7.1 Review PM Effectiveness","text":"<pre><code>/tools:01_project_management:pm-reflect\n</code></pre> <p>This command: - Analyzes cycle times and throughput - Compares roadmap to actual delivery - Identifies process bottlenecks - Generates improvement recommendations</p>"},{"location":"planning/standard-pm-flow/#72-review-momentum-health","title":"7.2 Review Momentum Health","text":"<p>The reflection includes momentum tracking:</p> Indicator Good Warning Critical Daily commit rate &gt;2/day 1/day &lt;1/day Items stuck &gt;3 days 0 1-2 3+ Shipping frequency Daily Weekly Monthly <p>Key insight: \"Startups rarely die because they made too much progress, but they do die when they move too slow.\"</p>"},{"location":"planning/standard-pm-flow/#73-start-next-cycle","title":"7.3 Start Next Cycle","text":"<p>After reflection, return to Phase 1:</p> <pre><code>/tools:01_project_management:audit\n</code></pre>"},{"location":"planning/standard-pm-flow/#quick-reference","title":"Quick Reference","text":""},{"location":"planning/standard-pm-flow/#full-command-list","title":"Full Command List","text":"Step Command Input Audit project <code>/tools:01_project_management:audit</code> None Define vision <code>/tools:01_project_management:vision</code> None Research topic <code>/tools:01_project_management:research &lt;topic&gt;</code> Topic Plan roadmap <code>/tools:01_project_management:roadmap</code> None Generate issues <code>/tools:01_project_management:issues</code> None Optimize board <code>/tools:01_project_management:kanban</code> None Generate changelog <code>/tools:01_project_management:changelog</code> None Reflect on process <code>/tools:01_project_management:pm-reflect</code> None"},{"location":"planning/standard-pm-flow/#full-planning-cycle-quarterly","title":"Full Planning Cycle (Quarterly)","text":"<pre><code>/tools:01_project_management:audit\n/tools:01_project_management:vision\n/tools:01_project_management:research &lt;topic&gt;\n/tools:01_project_management:roadmap\n/tools:01_project_management:issues\n</code></pre>"},{"location":"planning/standard-pm-flow/#quick-sprint-planning-weekly","title":"Quick Sprint Planning (Weekly)","text":"<pre><code>/tools:01_project_management:audit\n/tools:01_project_management:kanban\n</code></pre>"},{"location":"planning/standard-pm-flow/#weekly-maintenance","title":"Weekly Maintenance","text":"<pre><code>/tools:01_project_management:changelog\n/tools:01_project_management:kanban\n</code></pre>"},{"location":"planning/standard-pm-flow/#retrospective","title":"Retrospective","text":"<pre><code>/tools:01_project_management:pm-reflect\n/tools:01_project_management:audit\n</code></pre>"},{"location":"planning/standard-pm-flow/#tips-for-success","title":"Tips for Success","text":"<ol> <li>Run audits regularly - they catch drift before it becomes debt</li> <li>Classify gaps honestly - blockers vs enablers determines priority</li> <li>Scope ruthlessly - 1-3 weeks max per milestone</li> <li>Ship early, ship often - momentum matters more than perfection</li> <li>Track changelogs - combat \"nothing's happening\" feelings</li> <li>Reflect and iterate - the process improves with feedback</li> </ol>"},{"location":"planning/standard-pm-flow/#linear-method-principles","title":"Linear Method Principles","text":"<p>This workflow incorporates Linear Method principles:</p> Principle How It's Applied Write Issues, Not User Stories Simple titles, optional descriptions Scope Projects Down 1-3 weeks, 1-3 people checklist Generate Momentum Changelog tracking, momentum metrics Prioritize Enablers &amp; Blockers Gap classification framework Decide and Move On Bias to action over analysis paralysis"},{"location":"planning/standard-pm-flow/#getting-help","title":"Getting Help","text":"<ul> <li>Planning questions: Ask Claude in the IDE</li> <li>Process questions: Text Eddie</li> <li>Tool issues: Check <code>.claude/commands/tools/01_project_management/</code></li> </ul>"},{"location":"planning/standard-pm-flow/#related-documentation","title":"Related Documentation","text":"<ul> <li>Standard Dev Flow - Development workflow</li> <li>CLAUDE.md - Project rules and patterns</li> <li>Vision Document - Current product vision</li> <li>Roadmap - Implementation roadmap</li> </ul>"},{"location":"reference/","title":"Reference","text":""},{"location":"reference/#api","title":"API","text":"Doc Description API Overview API introduction Endpoints Complete endpoint reference Authentication Auth setup and JWT"},{"location":"reference/#database","title":"Database","text":"Doc Description Database Schema Tables and relationships"},{"location":"reference/#related","title":"Related","text":"<ul> <li>CLAUDE.md - Architecture and coding standards</li> <li>Development - Contributing guides</li> </ul>"},{"location":"reference/database-schema/","title":"Database Design","text":""},{"location":"reference/database-schema/#overview","title":"Overview","text":"<p>The VerticalFarm OS database is built on PostgreSQL (via Supabase) and designed to support a multi-tenant vertical farming management system with real-time capabilities, comprehensive audit trails, and scalable performance. The schema follows best practices for relational database design while leveraging PostgreSQL's advanced features.</p>"},{"location":"reference/database-schema/#core-design-principles","title":"Core Design Principles","text":""},{"location":"reference/database-schema/#1-multi-tenant-isolation","title":"1. Multi-Tenant Isolation","text":"<ul> <li>Complete data isolation at the farm level</li> <li>Row Level Security (RLS) policies enforce access control</li> <li>No data leakage between tenants</li> </ul>"},{"location":"reference/database-schema/#2-hierarchical-data-model","title":"2. Hierarchical Data Model","text":"<ul> <li>Natural representation of physical farm structure</li> <li>Efficient querying of parent-child relationships</li> <li>Cascading operations where appropriate</li> </ul>"},{"location":"reference/database-schema/#3-audit-traceability","title":"3. Audit &amp; Traceability","text":"<ul> <li>All tables include <code>created_at</code> and <code>updated_at</code> timestamps</li> <li>Soft deletes for critical data</li> <li>Comprehensive activity logging</li> </ul>"},{"location":"reference/database-schema/#4-performance-optimization","title":"4. Performance Optimization","text":"<ul> <li>Strategic indexing on foreign keys and query patterns</li> <li>JSONB for flexible, schema-less data</li> <li>Materialized views for complex aggregations</li> </ul>"},{"location":"reference/database-schema/#5-real-time-ready","title":"5. Real-time Ready","text":"<ul> <li>Tables designed for Supabase Realtime subscriptions</li> <li>Optimized for frequent updates</li> <li>Efficient change detection</li> </ul>"},{"location":"reference/database-schema/#entity-relationship-diagram","title":"Entity Relationship Diagram","text":"<pre><code>erDiagram\n    user_profiles ||--o{ farms : manages\n    farms ||--o{ rows : contains\n    rows ||--o{ racks : contains\n    racks ||--o{ shelves : contains\n\n    shelves ||--o{ schedules : hosts\n    schedules ||--o{ scheduled_actions : triggers\n    schedules ||--o{ harvests : produces\n\n    farms ||--o{ device_assignments : has\n    rows ||--o{ device_assignments : has\n    racks ||--o{ device_assignments : has\n    shelves ||--o{ device_assignments : has\n\n    device_assignments ||--o{ sensor_readings : generates\n    device_assignments ||--o{ scheduled_actions : targets\n\n    species ||--o{ grow_recipes : has\n    grow_recipes ||--o{ schedules : uses\n\n    farms ||--o{ automation_rules : applies\n    device_assignments ||--o{ automation_rules : triggers\n    device_assignments ||--o{ automation_rules : actions\n\n    user_profiles {\n        uuid id PK\n        enum role\n        text name\n        jsonb preferences\n        timestamp created_at\n        timestamp updated_at\n    }\n\n    farms {\n        uuid id PK\n        text name UK\n        text location\n        uuid manager_id FK\n        numeric width\n        numeric depth\n        jsonb metadata\n        timestamp created_at\n        timestamp updated_at\n    }\n\n    device_assignments {\n        uuid id PK\n        uuid entity_id FK \"polymorphic\"\n        text entity_type\n        text device_id\n        text device_type\n        text friendly_name\n        jsonb configuration\n        uuid assigned_by FK\n        timestamp created_at\n        timestamp updated_at\n    }\n\n    sensor_readings {\n        bigserial id PK\n        uuid device_assignment_id FK\n        text reading_type\n        numeric value\n        text unit\n        jsonb metadata\n        timestamp timestamp\n    }</code></pre>"},{"location":"reference/database-schema/#schema-details","title":"Schema Details","text":""},{"location":"reference/database-schema/#core-tables","title":"Core Tables","text":""},{"location":"reference/database-schema/#user_profiles","title":"<code>user_profiles</code>","text":"<p>Links to Supabase Auth and stores additional user information.</p> <pre><code>CREATE TABLE public.user_profiles (\n    id UUID PRIMARY KEY REFERENCES auth.users(id) ON DELETE CASCADE,\n    role user_role NOT NULL DEFAULT 'operator',\n    name TEXT,\n    organization TEXT,\n    phone TEXT,\n    preferences JSONB DEFAULT '{}',\n    notification_settings JSONB DEFAULT '{\"email\": true, \"sms\": false, \"push\": true}',\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Indexes\nCREATE INDEX idx_user_profiles_role ON public.user_profiles(role);\nCREATE INDEX idx_user_profiles_organization ON public.user_profiles(organization);\n\n-- RLS Policies\nALTER TABLE public.user_profiles ENABLE ROW LEVEL SECURITY;\n\nCREATE POLICY \"Users can view own profile\" \n    ON public.user_profiles FOR SELECT \n    USING (auth.uid() = id);\n\nCREATE POLICY \"Users can update own profile\" \n    ON public.user_profiles FOR UPDATE \n    USING (auth.uid() = id);\n</code></pre>"},{"location":"reference/database-schema/#farms","title":"<code>farms</code>","text":"<p>Top-level entity representing a vertical farm facility.</p> <pre><code>CREATE TABLE public.farms (\n    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),\n    name TEXT NOT NULL,\n    location TEXT,\n    manager_id UUID REFERENCES public.user_profiles(id) ON DELETE SET NULL,\n    organization_id UUID REFERENCES public.organizations(id),\n\n    -- Physical dimensions\n    width NUMERIC,\n    depth NUMERIC,\n    height NUMERIC,\n    unit_system TEXT DEFAULT 'metric', -- 'metric' or 'imperial'\n\n    -- Configuration\n    timezone TEXT DEFAULT 'UTC',\n    currency TEXT DEFAULT 'USD',\n\n    -- Metadata\n    metadata JSONB DEFAULT '{}',\n    tags TEXT[] DEFAULT '{}',\n\n    -- Status\n    status TEXT DEFAULT 'active', -- 'active', 'maintenance', 'inactive'\n    commissioned_at TIMESTAMP WITH TIME ZONE,\n\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n\n    CONSTRAINT farms_name_org_unique UNIQUE(name, organization_id)\n);\n\n-- Indexes\nCREATE INDEX idx_farms_manager_id ON public.farms(manager_id);\nCREATE INDEX idx_farms_organization_id ON public.farms(organization_id);\nCREATE INDEX idx_farms_status ON public.farms(status);\nCREATE INDEX idx_farms_tags ON public.farms USING GIN(tags);\n\n-- RLS Policies\nALTER TABLE public.farms ENABLE ROW LEVEL SECURITY;\n\nCREATE POLICY \"Users see own farms\" \n    ON public.farms FOR SELECT \n    USING (\n        manager_id = auth.uid() \n        OR \n        id IN (\n            SELECT farm_id FROM public.farm_members \n            WHERE user_id = auth.uid()\n        )\n    );\n</code></pre>"},{"location":"reference/database-schema/#farm-hierarchy-tables","title":"Farm Hierarchy Tables","text":""},{"location":"reference/database-schema/#rows","title":"<code>rows</code>","text":"<p>Physical rows within a farm facility.</p> <pre><code>CREATE TABLE public.rows (\n    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),\n    farm_id UUID NOT NULL REFERENCES public.farms(id) ON DELETE CASCADE,\n    name TEXT NOT NULL,\n    position INTEGER NOT NULL,\n\n    -- Physical layout\n    position_x NUMERIC,\n    position_y NUMERIC,\n    length NUMERIC,\n    width NUMERIC,\n    orientation TEXT, -- 'horizontal', 'vertical', 'diagonal'\n\n    -- Visual representation\n    color TEXT,\n    icon TEXT,\n\n    metadata JSONB DEFAULT '{}',\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n\n    CONSTRAINT rows_farm_name_unique UNIQUE(farm_id, name),\n    CONSTRAINT rows_farm_position_unique UNIQUE(farm_id, position)\n);\n\n-- Indexes\nCREATE INDEX idx_rows_farm_id ON public.rows(farm_id);\nCREATE INDEX idx_rows_position ON public.rows(position);\n</code></pre>"},{"location":"reference/database-schema/#racks","title":"<code>racks</code>","text":"<p>Vertical growing structures within rows.</p> <pre><code>CREATE TABLE public.racks (\n    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),\n    row_id UUID NOT NULL REFERENCES public.rows(id) ON DELETE CASCADE,\n    name TEXT NOT NULL,\n    position_in_row INTEGER NOT NULL,\n\n    -- Physical specifications\n    width NUMERIC,\n    depth NUMERIC,\n    height NUMERIC,\n    max_shelves INTEGER,\n    shelf_height NUMERIC, -- Default height between shelves\n\n    -- Type and configuration\n    rack_type TEXT, -- 'static', 'mobile', 'rotating'\n    lighting_type TEXT, -- 'LED', 'fluorescent', 'HPS'\n    irrigation_type TEXT, -- 'drip', 'ebb-flow', 'NFT'\n\n    metadata JSONB DEFAULT '{}',\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n\n    CONSTRAINT racks_row_name_unique UNIQUE(row_id, name),\n    CONSTRAINT racks_row_position_unique UNIQUE(row_id, position_in_row)\n);\n\n-- Indexes\nCREATE INDEX idx_racks_row_id ON public.racks(row_id);\nCREATE INDEX idx_racks_rack_type ON public.racks(rack_type);\n</code></pre>"},{"location":"reference/database-schema/#shelves","title":"<code>shelves</code>","text":"<p>Individual growing levels within racks.</p> <pre><code>CREATE TABLE public.shelves (\n    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),\n    rack_id UUID NOT NULL REFERENCES public.racks(id) ON DELETE CASCADE,\n    name TEXT NOT NULL,\n    position_in_rack INTEGER NOT NULL,\n\n    -- Physical specifications\n    width NUMERIC,\n    depth NUMERIC,\n    usable_area NUMERIC, -- Actual growing area\n    max_weight NUMERIC,\n\n    -- Growing configuration\n    grow_medium TEXT, -- 'soil', 'hydroponic', 'aeroponic'\n    container_type TEXT, -- 'tray', 'pot', 'channel'\n    container_count INTEGER,\n\n    -- Current status\n    status TEXT DEFAULT 'available', -- 'available', 'occupied', 'maintenance'\n\n    metadata JSONB DEFAULT '{}',\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n\n    CONSTRAINT shelves_rack_name_unique UNIQUE(rack_id, name),\n    CONSTRAINT shelves_rack_position_unique UNIQUE(rack_id, position_in_rack)\n);\n\n-- Indexes\nCREATE INDEX idx_shelves_rack_id ON public.shelves(rack_id);\nCREATE INDEX idx_shelves_status ON public.shelves(status);\n</code></pre>"},{"location":"reference/database-schema/#device-management","title":"Device Management","text":""},{"location":"reference/database-schema/#device_assignments","title":"<code>device_assignments</code>","text":"<p>Flexible device assignment to any level of the farm hierarchy.</p> <pre><code>CREATE TABLE public.device_assignments (\n    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),\n\n    -- Polymorphic association (only one should be set)\n    shelf_id UUID REFERENCES public.shelves(id) ON DELETE CASCADE,\n    rack_id UUID REFERENCES public.racks(id) ON DELETE CASCADE,\n    row_id UUID REFERENCES public.rows(id) ON DELETE CASCADE,\n    farm_id UUID REFERENCES public.farms(id) ON DELETE CASCADE,\n\n    -- Device identification\n    entity_id TEXT NOT NULL, -- External device ID (e.g., Home Assistant entity)\n    entity_type TEXT NOT NULL, -- 'sensor', 'switch', 'light', 'pump', 'fan'\n    friendly_name TEXT,\n\n    -- Device details\n    manufacturer TEXT,\n    model TEXT,\n    serial_number TEXT,\n\n    -- Configuration\n    configuration JSONB DEFAULT '{}',\n    calibration JSONB DEFAULT '{}',\n\n    -- Assignment tracking\n    assigned_by UUID REFERENCES public.user_profiles(id) ON DELETE SET NULL,\n    assigned_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n\n    -- Status\n    status TEXT DEFAULT 'active', -- 'active', 'inactive', 'maintenance', 'error'\n    last_seen TIMESTAMP WITH TIME ZONE,\n\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n\n    -- Ensure device is assigned to exactly one level\n    CONSTRAINT chk_device_assignment_level CHECK (\n        (shelf_id IS NOT NULL)::int +\n        (rack_id IS NOT NULL)::int +\n        (row_id IS NOT NULL)::int +\n        (farm_id IS NOT NULL)::int = 1\n    )\n);\n\n-- Indexes\nCREATE INDEX idx_device_assignments_shelf_id ON public.device_assignments(shelf_id);\nCREATE INDEX idx_device_assignments_rack_id ON public.device_assignments(rack_id);\nCREATE INDEX idx_device_assignments_row_id ON public.device_assignments(row_id);\nCREATE INDEX idx_device_assignments_farm_id ON public.device_assignments(farm_id);\nCREATE INDEX idx_device_assignments_entity_id ON public.device_assignments(entity_id);\nCREATE INDEX idx_device_assignments_entity_type ON public.device_assignments(entity_type);\nCREATE INDEX idx_device_assignments_status ON public.device_assignments(status);\n</code></pre>"},{"location":"reference/database-schema/#sensor-data","title":"Sensor Data","text":""},{"location":"reference/database-schema/#sensor_readings","title":"<code>sensor_readings</code>","text":"<p>High-volume time-series data for sensor readings.</p> <pre><code>CREATE TABLE public.sensor_readings (\n    id BIGSERIAL PRIMARY KEY,\n    device_assignment_id UUID NOT NULL REFERENCES public.device_assignments(id) ON DELETE CASCADE,\n\n    -- Reading data\n    reading_type TEXT NOT NULL, -- 'temperature', 'humidity', 'ph', 'ec', 'co2', 'light'\n    value NUMERIC NOT NULL,\n    unit TEXT, -- 'celsius', 'fahrenheit', '%', 'ppm', 'lux'\n\n    -- Quality indicators\n    quality TEXT DEFAULT 'good', -- 'good', 'questionable', 'bad'\n    raw_value NUMERIC, -- Original value before calibration\n\n    -- Metadata\n    metadata JSONB DEFAULT '{}',\n\n    timestamp TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT NOW()\n);\n\n-- Indexes for efficient querying\nCREATE INDEX idx_sensor_readings_device_timestamp \n    ON public.sensor_readings(device_assignment_id, timestamp DESC);\nCREATE INDEX idx_sensor_readings_timestamp \n    ON public.sensor_readings(timestamp DESC);\nCREATE INDEX idx_sensor_readings_type_timestamp \n    ON public.sensor_readings(reading_type, timestamp DESC);\n\n-- Partition by month for better performance (optional)\n-- CREATE TABLE sensor_readings_2024_01 PARTITION OF sensor_readings\n-- FOR VALUES FROM ('2024-01-01') TO ('2024-02-01');\n</code></pre>"},{"location":"reference/database-schema/#growing-operations","title":"Growing Operations","text":""},{"location":"reference/database-schema/#species","title":"<code>species</code>","text":"<p>Plant species catalog.</p> <pre><code>CREATE TABLE public.species (\n    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),\n    name TEXT NOT NULL UNIQUE,\n    scientific_name TEXT,\n    category TEXT, -- 'leafy_greens', 'herbs', 'vegetables', 'fruits'\n\n    -- Growing characteristics\n    grow_days_min INTEGER,\n    grow_days_max INTEGER,\n    difficulty TEXT, -- 'easy', 'medium', 'hard'\n\n    -- Environmental preferences\n    temp_min NUMERIC,\n    temp_max NUMERIC,\n    humidity_min NUMERIC,\n    humidity_max NUMERIC,\n    ph_min NUMERIC,\n    ph_max NUMERIC,\n    ec_min NUMERIC,\n    ec_max NUMERIC,\n\n    -- Light requirements\n    light_hours_min NUMERIC,\n    light_hours_max NUMERIC,\n    light_intensity_min NUMERIC, -- in PPFD\n    light_intensity_max NUMERIC,\n\n    -- Yield expectations\n    yield_per_sqm_min NUMERIC,\n    yield_per_sqm_max NUMERIC,\n    yield_unit TEXT,\n\n    metadata JSONB DEFAULT '{}',\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Indexes\nCREATE INDEX idx_species_category ON public.species(category);\nCREATE INDEX idx_species_name_trgm ON public.species USING gin(name gin_trgm_ops);\n</code></pre>"},{"location":"reference/database-schema/#grow_recipes","title":"<code>grow_recipes</code>","text":"<p>Detailed growing protocols for species.</p> <pre><code>CREATE TABLE public.grow_recipes (\n    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),\n    species_id UUID NOT NULL REFERENCES public.species(id) ON DELETE RESTRICT,\n    name TEXT NOT NULL,\n    description TEXT,\n\n    -- Growing timeline\n    grow_days INTEGER,\n    germination_days INTEGER,\n    vegetative_days INTEGER,\n    flowering_days INTEGER,\n\n    -- Environmental parameters\n    stages JSONB, -- Array of growth stages with specific parameters\n\n    -- Standard parameters (for simple recipes)\n    light_hours_per_day NUMERIC,\n    light_intensity NUMERIC,\n    day_temperature NUMERIC,\n    night_temperature NUMERIC,\n    humidity NUMERIC,\n    co2_ppm NUMERIC,\n\n    -- Irrigation\n    watering_frequency_hours NUMERIC,\n    water_amount_ml NUMERIC,\n    nutrient_recipe JSONB,\n\n    -- Expected results\n    expected_yield NUMERIC,\n    expected_quality TEXT,\n\n    -- Recipe metadata\n    author TEXT,\n    source TEXT,\n    verified BOOLEAN DEFAULT FALSE,\n    success_rate NUMERIC,\n\n    custom_parameters JSONB DEFAULT '{}',\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n\n    CONSTRAINT grow_recipes_species_name_unique UNIQUE(species_id, name)\n);\n\n-- Indexes\nCREATE INDEX idx_grow_recipes_species_id ON public.grow_recipes(species_id);\nCREATE INDEX idx_grow_recipes_verified ON public.grow_recipes(verified);\n</code></pre>"},{"location":"reference/database-schema/#schedules","title":"<code>schedules</code>","text":"<p>Active growing schedules on shelves.</p> <pre><code>CREATE TABLE public.schedules (\n    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),\n    shelf_id UUID NOT NULL REFERENCES public.shelves(id) ON DELETE CASCADE,\n    grow_recipe_id UUID NOT NULL REFERENCES public.grow_recipes(id) ON DELETE RESTRICT,\n\n    -- Timeline\n    start_date TIMESTAMP WITH TIME ZONE NOT NULL,\n    estimated_end_date TIMESTAMP WITH TIME ZONE,\n    actual_end_date TIMESTAMP WITH TIME ZONE,\n\n    -- Status tracking\n    status schedule_status NOT NULL DEFAULT 'planned',\n    current_stage TEXT,\n    days_elapsed INTEGER GENERATED ALWAYS AS (\n        EXTRACT(EPOCH FROM (COALESCE(actual_end_date, NOW()) - start_date)) / 86400\n    ) STORED,\n\n    -- Batch information\n    batch_code TEXT,\n    seed_lot TEXT,\n    plant_count INTEGER,\n\n    -- Performance tracking\n    germination_rate NUMERIC,\n    survival_rate NUMERIC,\n    growth_rate_factor NUMERIC DEFAULT 1.0, -- Actual vs expected growth rate\n\n    notes TEXT,\n    metadata JSONB DEFAULT '{}',\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Indexes\nCREATE INDEX idx_schedules_shelf_id ON public.schedules(shelf_id);\nCREATE INDEX idx_schedules_grow_recipe_id ON public.schedules(grow_recipe_id);\nCREATE INDEX idx_schedules_status ON public.schedules(status);\nCREATE INDEX idx_schedules_start_date ON public.schedules(start_date);\nCREATE INDEX idx_schedules_batch_code ON public.schedules(batch_code);\n</code></pre>"},{"location":"reference/database-schema/#automation","title":"Automation","text":""},{"location":"reference/database-schema/#automation_rules","title":"<code>automation_rules</code>","text":"<p>Conditional automation rules for farm operations.</p> <pre><code>CREATE TABLE public.automation_rules (\n    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),\n    name TEXT NOT NULL,\n    description TEXT,\n\n    -- Scope\n    farm_id UUID REFERENCES public.farms(id) ON DELETE CASCADE,\n    applies_to TEXT, -- 'farm', 'row', 'rack', 'shelf'\n    target_ids UUID[], -- Specific IDs if not farm-wide\n\n    -- Trigger configuration\n    trigger_type TEXT NOT NULL, -- 'sensor', 'schedule', 'manual', 'cascade'\n    trigger_source_device_id UUID REFERENCES public.device_assignments(id),\n    trigger_conditions JSONB, -- Complex condition logic\n\n    -- Simple triggers (for backward compatibility)\n    trigger_reading_type TEXT,\n    trigger_operator TEXT, -- '&gt;', '&lt;', '=', '&gt;=', '&lt;=', '!='\n    trigger_value NUMERIC,\n\n    -- Action configuration\n    action_type TEXT NOT NULL, -- 'device_control', 'notification', 'log', 'cascade'\n    action_target_device_id UUID REFERENCES public.device_assignments(id),\n    action_parameters JSONB,\n\n    -- Execution control\n    cooldown_minutes INTEGER DEFAULT 5, -- Minimum time between executions\n    max_executions_per_day INTEGER,\n\n    -- Scheduling\n    active_hours JSONB, -- Time windows when rule is active\n    active_days INTEGER[], -- Days of week (1-7)\n\n    -- Status\n    is_active BOOLEAN DEFAULT TRUE,\n    last_triggered TIMESTAMP WITH TIME ZONE,\n    trigger_count INTEGER DEFAULT 0,\n\n    created_by UUID REFERENCES public.user_profiles(id),\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n\n    CONSTRAINT automation_rules_farm_name_unique UNIQUE(farm_id, name)\n);\n\n-- Indexes\nCREATE INDEX idx_automation_rules_farm_id ON public.automation_rules(farm_id);\nCREATE INDEX idx_automation_rules_is_active ON public.automation_rules(is_active);\nCREATE INDEX idx_automation_rules_trigger_type ON public.automation_rules(trigger_type);\nCREATE INDEX idx_automation_rules_trigger_source ON public.automation_rules(trigger_source_device_id);\n</code></pre>"},{"location":"reference/database-schema/#scheduled_actions","title":"<code>scheduled_actions</code>","text":"<p>Pre-scheduled or triggered actions for devices.</p> <pre><code>CREATE TABLE public.scheduled_actions (\n    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),\n\n    -- Source of action\n    schedule_id UUID REFERENCES public.schedules(id) ON DELETE CASCADE,\n    automation_rule_id UUID REFERENCES public.automation_rules(id) ON DELETE CASCADE,\n    manual_trigger_by UUID REFERENCES public.user_profiles(id),\n\n    -- Target device\n    device_assignment_id UUID REFERENCES public.device_assignments(id) ON DELETE CASCADE,\n\n    -- Action details\n    action_type action_type NOT NULL,\n    parameters JSONB DEFAULT '{}',\n\n    -- Scheduling\n    execution_time TIMESTAMP WITH TIME ZONE NOT NULL,\n    execution_window_minutes INTEGER DEFAULT 5, -- Acceptable delay\n\n    -- Execution tracking\n    status action_status NOT NULL DEFAULT 'pending',\n    executed_at TIMESTAMP WITH TIME ZONE,\n    execution_duration_ms INTEGER,\n\n    -- Retry logic\n    retry_count INTEGER DEFAULT 0,\n    max_retries INTEGER DEFAULT 3,\n    next_retry_at TIMESTAMP WITH TIME ZONE,\n\n    -- Error handling\n    error_message TEXT,\n    error_details JSONB,\n\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Indexes\nCREATE INDEX idx_scheduled_actions_schedule_id ON public.scheduled_actions(schedule_id);\nCREATE INDEX idx_scheduled_actions_device_assignment_id ON public.scheduled_actions(device_assignment_id);\nCREATE INDEX idx_scheduled_actions_execution_time ON public.scheduled_actions(execution_time);\nCREATE INDEX idx_scheduled_actions_status ON public.scheduled_actions(status);\nCREATE INDEX idx_scheduled_actions_next_retry ON public.scheduled_actions(next_retry_at) \n    WHERE status = 'pending' AND next_retry_at IS NOT NULL;\n</code></pre>"},{"location":"reference/database-schema/#analytics-reporting","title":"Analytics &amp; Reporting","text":""},{"location":"reference/database-schema/#harvests","title":"<code>harvests</code>","text":"<p>Harvest records for yield tracking.</p> <pre><code>CREATE TABLE public.harvests (\n    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),\n    schedule_id UUID NOT NULL REFERENCES public.schedules(id) ON DELETE RESTRICT,\n    shelf_id UUID NOT NULL REFERENCES public.shelves(id) ON DELETE RESTRICT,\n\n    -- Harvest data\n    harvest_date TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT NOW(),\n    harvest_type TEXT, -- 'final', 'partial', 'thinning'\n\n    -- Yield data\n    fresh_weight NUMERIC NOT NULL,\n    dry_weight NUMERIC,\n    marketable_weight NUMERIC,\n    waste_weight NUMERIC,\n    weight_unit TEXT NOT NULL DEFAULT 'grams',\n\n    -- Quality metrics\n    quality_grade TEXT, -- 'A', 'B', 'C', 'reject'\n    brix_level NUMERIC,\n    color_score NUMERIC,\n    size_uniformity NUMERIC,\n    defect_rate NUMERIC,\n\n    -- Economic data\n    market_price_per_unit NUMERIC,\n    total_value NUMERIC,\n    currency TEXT DEFAULT 'USD',\n\n    -- Labor tracking\n    harvest_duration_minutes INTEGER,\n    harvester_count INTEGER,\n    labor_cost NUMERIC,\n\n    notes TEXT,\n    photos JSONB, -- Array of photo URLs\n    metadata JSONB DEFAULT '{}',\n\n    created_by UUID REFERENCES public.user_profiles(id),\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Indexes\nCREATE INDEX idx_harvests_schedule_id ON public.harvests(schedule_id);\nCREATE INDEX idx_harvests_shelf_id ON public.harvests(shelf_id);\nCREATE INDEX idx_harvests_harvest_date ON public.harvests(harvest_date);\nCREATE INDEX idx_harvests_quality_grade ON public.harvests(quality_grade);\n</code></pre>"},{"location":"reference/database-schema/#advanced-features","title":"Advanced Features","text":""},{"location":"reference/database-schema/#row-level-security-rls","title":"Row Level Security (RLS)","text":"<pre><code>-- Enable RLS on all tables\nALTER TABLE public.farms ENABLE ROW LEVEL SECURITY;\nALTER TABLE public.rows ENABLE ROW LEVEL SECURITY;\nALTER TABLE public.racks ENABLE ROW LEVEL SECURITY;\nALTER TABLE public.shelves ENABLE ROW LEVEL SECURITY;\n\n-- Farm-level isolation policy\nCREATE POLICY \"farm_isolation\" ON public.rows\n    FOR ALL\n    USING (\n        farm_id IN (\n            SELECT id FROM public.farms\n            WHERE manager_id = auth.uid()\n            OR id IN (\n                SELECT farm_id FROM public.farm_members\n                WHERE user_id = auth.uid()\n            )\n        )\n    );\n\n-- Cascade the policy pattern to child tables\nCREATE POLICY \"rack_isolation\" ON public.racks\n    FOR ALL\n    USING (\n        row_id IN (\n            SELECT id FROM public.rows\n            WHERE farm_id IN (\n                SELECT id FROM public.farms\n                WHERE manager_id = auth.uid()\n                OR id IN (\n                    SELECT farm_id FROM public.farm_members\n                    WHERE user_id = auth.uid()\n                )\n            )\n        )\n    );\n</code></pre>"},{"location":"reference/database-schema/#database-functions","title":"Database Functions","text":"<pre><code>-- Function to calculate farm health score\nCREATE OR REPLACE FUNCTION calculate_farm_health_score(p_farm_id UUID)\nRETURNS NUMERIC AS $$\nDECLARE\n    v_score NUMERIC := 100;\n    v_active_alerts INTEGER;\n    v_device_offline INTEGER;\n    v_schedule_delays INTEGER;\nBEGIN\n    -- Count active alerts\n    SELECT COUNT(*) INTO v_active_alerts\n    FROM alerts\n    WHERE farm_id = p_farm_id\n    AND status = 'active';\n\n    -- Count offline devices\n    SELECT COUNT(*) INTO v_device_offline\n    FROM device_assignments\n    WHERE farm_id = p_farm_id\n    AND last_seen &lt; NOW() - INTERVAL '1 hour';\n\n    -- Count delayed schedules\n    SELECT COUNT(*) INTO v_schedule_delays\n    FROM schedules s\n    JOIN shelves sh ON s.shelf_id = sh.id\n    JOIN racks r ON sh.rack_id = r.id\n    JOIN rows ro ON r.row_id = ro.id\n    WHERE ro.farm_id = p_farm_id\n    AND s.status = 'active'\n    AND s.estimated_end_date &lt; NOW();\n\n    -- Calculate score\n    v_score := v_score - (v_active_alerts * 5);\n    v_score := v_score - (v_device_offline * 3);\n    v_score := v_score - (v_schedule_delays * 2);\n\n    RETURN GREATEST(0, v_score);\nEND;\n$$ LANGUAGE plpgsql;\n\n-- Function to get latest sensor readings for a shelf\nCREATE OR REPLACE FUNCTION get_latest_shelf_sensors(p_shelf_id UUID)\nRETURNS TABLE (\n    reading_type TEXT,\n    value NUMERIC,\n    unit TEXT,\n    timestamp TIMESTAMP WITH TIME ZONE\n) AS $$\nBEGIN\n    RETURN QUERY\n    WITH latest_readings AS (\n        SELECT \n            sr.reading_type,\n            sr.value,\n            sr.unit,\n            sr.timestamp,\n            ROW_NUMBER() OVER (PARTITION BY sr.reading_type ORDER BY sr.timestamp DESC) as rn\n        FROM sensor_readings sr\n        JOIN device_assignments da ON sr.device_assignment_id = da.id\n        WHERE da.shelf_id = p_shelf_id\n        AND sr.timestamp &gt; NOW() - INTERVAL '1 hour'\n    )\n    SELECT \n        lr.reading_type,\n        lr.value,\n        lr.unit,\n        lr.timestamp\n    FROM latest_readings lr\n    WHERE lr.rn = 1;\nEND;\n$$ LANGUAGE plpgsql;\n</code></pre>"},{"location":"reference/database-schema/#triggers","title":"Triggers","text":"<pre><code>-- Update timestamp trigger\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ LANGUAGE plpgsql;\n\n-- Apply to all tables\nCREATE TRIGGER update_farms_updated_at BEFORE UPDATE ON public.farms\n    FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();\n\nCREATE TRIGGER update_rows_updated_at BEFORE UPDATE ON public.rows\n    FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();\n\n-- Add more triggers for other tables...\n\n-- Shelf status update trigger\nCREATE OR REPLACE FUNCTION update_shelf_status()\nRETURNS TRIGGER AS $$\nBEGIN\n    IF TG_OP = 'INSERT' THEN\n        -- Mark shelf as occupied when schedule starts\n        UPDATE shelves \n        SET status = 'occupied'\n        WHERE id = NEW.shelf_id;\n    ELSIF TG_OP = 'UPDATE' THEN\n        -- Mark shelf as available when schedule completes\n        IF NEW.status = 'completed' AND OLD.status != 'completed' THEN\n            UPDATE shelves \n            SET status = 'available'\n            WHERE id = NEW.shelf_id;\n        END IF;\n    END IF;\n    RETURN NEW;\nEND;\n$$ LANGUAGE plpgsql;\n\nCREATE TRIGGER update_shelf_on_schedule\n    AFTER INSERT OR UPDATE ON public.schedules\n    FOR EACH ROW EXECUTE FUNCTION update_shelf_status();\n</code></pre>"},{"location":"reference/database-schema/#materialized-views","title":"Materialized Views","text":"<pre><code>-- Farm statistics view\nCREATE MATERIALIZED VIEW farm_statistics AS\nSELECT \n    f.id as farm_id,\n    f.name as farm_name,\n    COUNT(DISTINCT r.id) as row_count,\n    COUNT(DISTINCT ra.id) as rack_count,\n    COUNT(DISTINCT s.id) as shelf_count,\n    COUNT(DISTINCT da.id) as device_count,\n    COUNT(DISTINCT CASE WHEN sc.status = 'active' THEN sc.id END) as active_schedules,\n    AVG(h.marketable_weight) as avg_yield,\n    SUM(h.total_value) as total_revenue\nFROM farms f\nLEFT JOIN rows r ON f.id = r.farm_id\nLEFT JOIN racks ra ON r.id = ra.row_id\nLEFT JOIN shelves s ON ra.id = s.rack_id\nLEFT JOIN device_assignments da ON f.id = da.farm_id\nLEFT JOIN schedules sc ON s.id = sc.shelf_id\nLEFT JOIN harvests h ON sc.id = h.schedule_id\nGROUP BY f.id, f.name;\n\n-- Refresh periodically\nCREATE INDEX idx_farm_statistics_farm_id ON farm_statistics(farm_id);\n\n-- Sensor aggregates view\nCREATE MATERIALIZED VIEW hourly_sensor_aggregates AS\nSELECT \n    device_assignment_id,\n    reading_type,\n    DATE_TRUNC('hour', timestamp) as hour,\n    AVG(value) as avg_value,\n    MIN(value) as min_value,\n    MAX(value) as max_value,\n    COUNT(*) as reading_count\nFROM sensor_readings\nWHERE timestamp &gt; NOW() - INTERVAL '7 days'\nGROUP BY device_assignment_id, reading_type, DATE_TRUNC('hour', timestamp);\n\nCREATE INDEX idx_hourly_sensor_device_hour \n    ON hourly_sensor_aggregates(device_assignment_id, hour);\n</code></pre>"},{"location":"reference/database-schema/#performance-optimization","title":"Performance Optimization","text":""},{"location":"reference/database-schema/#indexing-strategy","title":"Indexing Strategy","text":"<pre><code>-- Composite indexes for common query patterns\nCREATE INDEX idx_sensor_readings_device_type_time \n    ON sensor_readings(device_assignment_id, reading_type, timestamp DESC);\n\nCREATE INDEX idx_schedules_shelf_status_date \n    ON schedules(shelf_id, status, start_date);\n\nCREATE INDEX idx_device_assignments_farm_type_status \n    ON device_assignments(farm_id, entity_type, status);\n\n-- Partial indexes for filtered queries\nCREATE INDEX idx_active_schedules \n    ON schedules(shelf_id, start_date) \n    WHERE status = 'active';\n\nCREATE INDEX idx_pending_actions \n    ON scheduled_actions(execution_time) \n    WHERE status = 'pending';\n\n-- Text search indexes\nCREATE EXTENSION IF NOT EXISTS pg_trgm;\n\nCREATE INDEX idx_farms_name_search \n    ON farms USING gin(name gin_trgm_ops);\n\nCREATE INDEX idx_species_name_search \n    ON species USING gin(name gin_trgm_ops);\n</code></pre>"},{"location":"reference/database-schema/#partitioning-strategy","title":"Partitioning Strategy","text":"<pre><code>-- Partition sensor_readings by month\nCREATE TABLE sensor_readings_2024_01 \n    PARTITION OF sensor_readings\n    FOR VALUES FROM ('2024-01-01') TO ('2024-02-01');\n\nCREATE TABLE sensor_readings_2024_02 \n    PARTITION OF sensor_readings\n    FOR VALUES FROM ('2024-02-01') TO ('2024-03-01');\n\n-- Automated partition creation\nCREATE OR REPLACE FUNCTION create_monthly_partition()\nRETURNS void AS $$\nDECLARE\n    partition_date DATE;\n    partition_name TEXT;\n    start_date DATE;\n    end_date DATE;\nBEGIN\n    partition_date := DATE_TRUNC('month', NOW() + INTERVAL '1 month');\n    partition_name := 'sensor_readings_' || TO_CHAR(partition_date, 'YYYY_MM');\n    start_date := partition_date;\n    end_date := partition_date + INTERVAL '1 month';\n\n    EXECUTE format('CREATE TABLE IF NOT EXISTS %I PARTITION OF sensor_readings FOR VALUES FROM (%L) TO (%L)',\n        partition_name, start_date, end_date);\nEND;\n$$ LANGUAGE plpgsql;\n\n-- Schedule monthly execution\n-- Run this function via pg_cron or external scheduler\n</code></pre>"},{"location":"reference/database-schema/#migration-strategy","title":"Migration Strategy","text":""},{"location":"reference/database-schema/#version-control","title":"Version Control","text":"<pre><code>-- Migration tracking table\nCREATE TABLE IF NOT EXISTS schema_migrations (\n    version TEXT PRIMARY KEY,\n    applied_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n    applied_by TEXT DEFAULT current_user\n);\n\n-- Example migration\nBEGIN;\n\n-- Check if migration already applied\nDO $$\nBEGIN\n    IF NOT EXISTS (SELECT 1 FROM schema_migrations WHERE version = '001_initial_schema') THEN\n        -- Run migration\n        CREATE TABLE public.farms (...);\n        -- ... more DDL\n\n        -- Record migration\n        INSERT INTO schema_migrations (version) VALUES ('001_initial_schema');\n    END IF;\nEND $$;\n\nCOMMIT;\n</code></pre>"},{"location":"reference/database-schema/#backup-strategy","title":"Backup Strategy","text":"<pre><code>-- Regular backup via pg_dump\n-- pg_dump -h localhost -U postgres -d verticalfarm -f backup_$(date +%Y%m%d).sql\n\n-- Point-in-time recovery setup\n-- Enable in postgresql.conf:\n-- wal_level = replica\n-- archive_mode = on\n-- archive_command = 'cp %p /backup/archive/%f'\n\n-- Logical replication for real-time backup\nCREATE PUBLICATION verticalfarm_pub FOR ALL TABLES;\n</code></pre>"},{"location":"reference/database-schema/#security-considerations","title":"Security Considerations","text":""},{"location":"reference/database-schema/#data-encryption","title":"Data Encryption","text":"<pre><code>-- Encrypt sensitive columns\nCREATE EXTENSION IF NOT EXISTS pgcrypto;\n\n-- Example: Encrypt API keys\nALTER TABLE integrations \n    ADD COLUMN api_key_encrypted BYTEA;\n\nUPDATE integrations \n    SET api_key_encrypted = pgp_sym_encrypt(api_key, 'encryption_key');\n\n-- Decrypt when needed\nSELECT pgp_sym_decrypt(api_key_encrypted, 'encryption_key') as api_key\nFROM integrations;\n</code></pre>"},{"location":"reference/database-schema/#audit-logging","title":"Audit Logging","text":"<pre><code>-- Audit log table\nCREATE TABLE audit_log (\n    id BIGSERIAL PRIMARY KEY,\n    table_name TEXT NOT NULL,\n    operation TEXT NOT NULL,\n    user_id UUID,\n    record_id UUID,\n    old_data JSONB,\n    new_data JSONB,\n    timestamp TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Generic audit trigger\nCREATE OR REPLACE FUNCTION audit_trigger()\nRETURNS TRIGGER AS $$\nBEGIN\n    INSERT INTO audit_log (table_name, operation, user_id, record_id, old_data, new_data)\n    VALUES (\n        TG_TABLE_NAME,\n        TG_OP,\n        auth.uid(),\n        COALESCE(NEW.id, OLD.id),\n        to_jsonb(OLD),\n        to_jsonb(NEW)\n    );\n    RETURN NEW;\nEND;\n$$ LANGUAGE plpgsql;\n\n-- Apply to sensitive tables\nCREATE TRIGGER audit_farms \n    AFTER INSERT OR UPDATE OR DELETE ON farms\n    FOR EACH ROW EXECUTE FUNCTION audit_trigger();\n</code></pre>"},{"location":"reference/database-schema/#summary","title":"Summary","text":"<p>The database design provides: - Scalability through partitioning and indexing - Performance via materialized views and optimized queries - Security with RLS and encryption - Flexibility using JSONB for extensible data - Reliability through constraints and triggers - Maintainability with clear structure and documentation</p> <p>This schema supports all current requirements while allowing for future expansion and optimization.</p> <p>For database-specific questions or schema changes, consult the database team or submit migration proposals for review.</p>"},{"location":"reference/api/","title":"Vertical Farming Platform API Reference","text":""},{"location":"reference/api/#overview","title":"Overview","text":"<p>The Vertical Farming Platform API provides a comprehensive set of endpoints for managing and monitoring vertical farming operations. Built with FastAPI and integrated with Supabase, this API offers robust, secure, and real-time capabilities for agricultural management.</p>"},{"location":"reference/api/#key-features","title":"Key Features","text":"<ul> <li>\ud83c\udf31 Farm Management</li> <li>\ud83c\udf21\ufe0f Environmental Monitoring</li> <li>\ud83e\udd16 Device and Automation Control</li> <li>\ud83d\udcca Analytics and Reporting</li> <li>\ud83d\udd10 Secure Authentication</li> </ul>"},{"location":"reference/api/#getting-started","title":"Getting Started","text":""},{"location":"reference/api/#prerequisites","title":"Prerequisites","text":"<ul> <li>Python 3.13+</li> <li>Supabase account</li> <li>API Key and Authentication Token</li> </ul>"},{"location":"reference/api/#authentication","title":"Authentication","text":"<p>All API requests require authentication via JWT tokens. See the Authentication Guide for detailed instructions.</p>"},{"location":"reference/api/#base-urls","title":"Base URLs","text":"<ul> <li>Development: <code>http://localhost:8000/api/v1</code></li> <li>Production: <code>https://api.vertical-farm.goodgoodgreens.org/api/v1</code></li> </ul>"},{"location":"reference/api/#quick-connection-example","title":"Quick Connection Example","text":"<pre><code>from vertical_farm_api import VerticalFarmClient\n\n# Initialize the client\nclient = VerticalFarmClient(\n    base_url='https://api.vertical-farm.goodgoodgreens.org/api/v1',\n    api_key='YOUR_API_KEY'\n)\n\n# Example: Get farm details\nfarm_details = client.farms.get_farm('farm_id')\nprint(farm_details)\n</code></pre>"},{"location":"reference/api/#documentation-contents","title":"Documentation Contents","text":"<ul> <li>Authentication Guide</li> <li>Endpoints Reference</li> </ul>"},{"location":"reference/api/#support-and-community","title":"Support and Community","text":"<ul> <li>\ud83d\udce7 Support Email: api-support@goodgoodgreens.org</li> <li>\ud83c\udf10 Documentation: Comprehensive API Docs</li> <li>\ud83c\udd98 Issues: GitHub Issues</li> </ul>"},{"location":"reference/api/#versioning","title":"Versioning","text":"<p>The API follows semantic versioning: - Current Version: <code>v1</code> - Breaking changes will increment the major version - New features will increment the minor version</p>"},{"location":"reference/api/#rate-limiting","title":"Rate Limiting","text":"<ul> <li>Standard Users: 100 requests/minute</li> <li>Premium Users: 1000 requests/minute</li> <li>WebSocket Connections: 10 concurrent per user</li> </ul>"},{"location":"reference/api/#legal-and-compliance","title":"Legal and Compliance","text":"<ul> <li>Terms of Service</li> <li>Privacy Policy</li> </ul>"},{"location":"reference/api/authentication/","title":"Authentication and Authorization","text":""},{"location":"reference/api/authentication/#overview","title":"Overview","text":"<p>The Vertical Farming Platform uses a multi-layered authentication system combining Supabase Auth, JWT tokens, and Row Level Security (RLS) to ensure secure access to resources.</p>"},{"location":"reference/api/authentication/#authentication-flow","title":"Authentication Flow","text":""},{"location":"reference/api/authentication/#1-user-registration","title":"1. User Registration","text":"<pre><code># Python example using Supabase client\nfrom supabase import create_client\n\nsupabase = create_client(SUPABASE_URL, SUPABASE_ANON_KEY)\n\n# Register a new user\nresponse = supabase.auth.sign_up({\n    'email': 'user@example.com',\n    'password': 'secure_password'\n})\n</code></pre>"},{"location":"reference/api/authentication/#2-user-login","title":"2. User Login","text":"<pre><code># Obtain JWT token via curl\ncurl -X POST \"https://api.vertical-farm.goodgoodgreens.org/auth/login\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"email\": \"user@example.com\", \"password\": \"password\"}'\n</code></pre>"},{"location":"reference/api/authentication/#3-token-usage","title":"3. Token Usage","text":"<p>Include the JWT token in the Authorization header:</p> <pre><code>headers = {\n    'Authorization': f'Bearer {jwt_token}',\n    'Content-Type': 'application/json'\n}\nresponse = requests.get(f'{BASE_URL}/farms', headers=headers)\n</code></pre>"},{"location":"reference/api/authentication/#authorization-mechanisms","title":"Authorization Mechanisms","text":""},{"location":"reference/api/authentication/#1-role-based-access-control-rbac","title":"1. Role-Based Access Control (RBAC)","text":"<p>Predefined roles: - <code>admin</code>: Full system access - <code>farm_manager</code>: Manage farms and devices - <code>analyst</code>: View reports and analytics - <code>user</code>: Basic farm monitoring</p>"},{"location":"reference/api/authentication/#2-row-level-security-rls","title":"2. Row Level Security (RLS)","text":"<p>Supabase RLS ensures users can only access their own data:</p> <pre><code>-- Example RLS policy for farms table\nCREATE POLICY \"Users can only see their own farms\" \nON farms FOR SELECT \nUSING (auth.uid() = user_id);\n</code></pre>"},{"location":"reference/api/authentication/#token-management","title":"Token Management","text":""},{"location":"reference/api/authentication/#token-lifecycle","title":"Token Lifecycle","text":"<ul> <li>Expiration: 1 hour</li> <li>Refresh Token: Available for extended sessions</li> <li>Revocation: Immediate on logout or security event</li> </ul>"},{"location":"reference/api/authentication/#refresh-token-example","title":"Refresh Token Example","text":"<pre><code># Refresh an expired token\nnew_session = supabase.auth.refresh_session(refresh_token)\n</code></pre>"},{"location":"reference/api/authentication/#security-best-practices","title":"Security Best Practices","text":"<ol> <li>Always use HTTPS</li> <li>Store tokens securely</li> <li>Implement token rotation</li> <li>Use short-lived access tokens</li> <li>Monitor and log authentication events</li> </ol>"},{"location":"reference/api/authentication/#troubleshooting","title":"Troubleshooting","text":""},{"location":"reference/api/authentication/#common-authentication-errors","title":"Common Authentication Errors","text":"<ul> <li>401 Unauthorized: Invalid or expired token</li> <li>403 Forbidden: Insufficient permissions</li> <li>500 Internal Server Error: Authentication service issue</li> </ul>"},{"location":"reference/api/authentication/#api-key-management","title":"API Key Management","text":""},{"location":"reference/api/authentication/#creating-api-keys","title":"Creating API Keys","text":"<pre><code># Generate an API key (admin only)\napi_key = user_service.generate_api_key(user_id)\n</code></pre>"},{"location":"reference/api/authentication/#revoking-api-keys","title":"Revoking API Keys","text":"<pre><code># Revoke a specific API key\nuser_service.revoke_api_key(api_key_id)\n</code></pre>"},{"location":"reference/api/authentication/#compliance-and-auditing","title":"Compliance and Auditing","text":"<ul> <li>All authentication events are logged</li> <li>Supports multi-factor authentication</li> <li>Compliance with GDPR, CCPA data protection standards</li> </ul>"},{"location":"reference/api/authentication/#related-documentation","title":"Related Documentation","text":"<ul> <li>API Endpoints</li> <li>CLAUDE.md - Architecture and RLS patterns</li> </ul>"},{"location":"reference/api/endpoints/","title":"API Endpoints Reference","text":""},{"location":"reference/api/endpoints/#core-domains","title":"Core Domains","text":""},{"location":"reference/api/endpoints/#1-farm-management","title":"1. Farm Management","text":"<ul> <li>GET <code>/farms</code>: List user's farms</li> <li>GET <code>/farms/{farm_id}</code>: Get specific farm details</li> <li>POST <code>/farms</code>: Create a new farm</li> <li>PUT <code>/farms/{farm_id}</code>: Update farm configuration</li> <li>DELETE <code>/farms/{farm_id}</code>: Delete a farm</li> </ul>"},{"location":"reference/api/endpoints/#2-device-management","title":"2. Device Management","text":"<ul> <li>GET <code>/devices</code>: List all devices</li> <li>GET <code>/devices/{device_id}</code>: Get device details</li> <li>POST <code>/devices</code>: Register a new device</li> <li>PUT <code>/devices/{device_id}/status</code>: Update device status</li> <li>DELETE <code>/devices/{device_id}</code>: Remove a device</li> </ul>"},{"location":"reference/api/endpoints/#3-sensor-data","title":"3. Sensor Data","text":"<ul> <li>GET <code>/sensors</code>: List all sensors</li> <li>GET <code>/sensors/{sensor_id}/data</code>: Retrieve sensor readings</li> <li>POST <code>/sensors/{sensor_id}/calibrate</code>: Calibrate sensor</li> <li>GET <code>/sensors/metrics</code>: Aggregate sensor metrics</li> </ul>"},{"location":"reference/api/endpoints/#4-grow-automation","title":"4. Grow Automation","text":"<ul> <li>GET <code>/grow-plans</code>: List grow plans</li> <li>POST <code>/grow-plans</code>: Create a new grow plan</li> <li>PUT <code>/grow-plans/{plan_id}</code>: Update grow plan</li> <li>GET <code>/grow-plans/{plan_id}/progress</code>: Get grow plan progress</li> </ul>"},{"location":"reference/api/endpoints/#5-environmental-control","title":"5. Environmental Control","text":"<ul> <li>GET <code>/climate-control</code>: Get current climate settings</li> <li>POST <code>/climate-control/update</code>: Modify climate parameters</li> <li>GET <code>/climate-control/history</code>: Retrieve climate history</li> </ul>"},{"location":"reference/api/endpoints/#6-user-management","title":"6. User Management","text":"<ul> <li>GET <code>/users/profile</code>: Get user profile</li> <li>PUT <code>/users/profile</code>: Update user profile</li> <li>POST <code>/users/permissions</code>: Manage user roles</li> </ul>"},{"location":"reference/api/endpoints/#7-square-pos-integration","title":"7. Square POS Integration","text":"<ul> <li>GET <code>/api/v1/square/configs</code>: List Square configurations</li> <li>GET <code>/api/v1/square/configs/{config_id}</code>: Get specific configuration</li> <li>POST <code>/api/v1/square/configs</code>: Create new Square configuration</li> <li>PUT <code>/api/v1/square/configs/{config_id}</code>: Update configuration</li> <li>DELETE <code>/api/v1/square/configs/{config_id}</code>: Delete configuration</li> <li>PUT <code>/api/v1/square/configs/{config_id}/activate</code>: Set active configuration</li> <li>POST <code>/api/v1/square/test-connection</code>: Test Square API connection</li> </ul>"},{"location":"reference/api/endpoints/#square-data-endpoints","title":"Square Data Endpoints","text":"<ul> <li>GET <code>/api/v1/square/locations</code>: Get Square locations</li> <li>GET <code>/api/v1/square/products</code>: Get product catalog</li> <li>GET <code>/api/v1/square/customers</code>: Get customer list</li> <li>GET <code>/api/v1/square/orders</code>: Get order history</li> <li>GET <code>/api/v1/square/payments</code>: Get payment transactions</li> <li>GET <code>/api/v1/square/refunds</code>: Get refund transactions</li> <li>GET <code>/api/v1/square/disputes</code>: Get payment disputes</li> <li>GET <code>/api/v1/square/payouts</code>: Get bank payouts</li> <li>GET <code>/api/v1/square/team-members</code>: Get team member list</li> <li>GET <code>/api/v1/square/inventory</code>: Get inventory counts</li> </ul>"},{"location":"reference/api/endpoints/#square-sync-endpoints","title":"Square Sync Endpoints","text":"<ul> <li>POST <code>/api/v1/square/sync/all/{config_id}</code>: Sync all Square data</li> <li>POST <code>/api/v1/square/sync/customers/{config_id}</code>: Sync customers</li> <li>POST <code>/api/v1/square/sync/orders/{config_id}</code>: Sync orders</li> <li>POST <code>/api/v1/square/sync/payments/{config_id}</code>: Sync payments</li> <li>POST <code>/api/v1/square/sync/products/{config_id}</code>: Sync products</li> <li>GET <code>/api/v1/square/sync/status/{config_id}</code>: Get sync status</li> </ul>"},{"location":"reference/api/endpoints/#square-webhook-endpoint","title":"Square Webhook Endpoint","text":"<ul> <li>POST <code>/api/v1/square/webhook</code>: Receive Square webhook events</li> </ul>"},{"location":"reference/api/endpoints/#websocket-endpoints","title":"WebSocket Endpoints","text":""},{"location":"reference/api/endpoints/#real-time-monitoring","title":"Real-time Monitoring","text":"<ul> <li><code>/ws/farm-status</code>: Real-time farm status updates</li> <li><code>/ws/device-events</code>: Device event streaming</li> <li><code>/ws/sensor-data</code>: Live sensor data stream</li> </ul>"},{"location":"reference/api/endpoints/#authentication-endpoints","title":"Authentication Endpoints","text":""},{"location":"reference/api/endpoints/#auth-management","title":"Auth Management","text":"<ul> <li>POST <code>/auth/login</code>: User login</li> <li>POST <code>/auth/logout</code>: User logout</li> <li>POST <code>/auth/register</code>: User registration</li> <li>POST <code>/auth/reset-password</code>: Password reset</li> <li>GET <code>/auth/verify</code>: Verify authentication token</li> </ul>"},{"location":"reference/api/endpoints/#api-response-examples","title":"API Response Examples","text":""},{"location":"reference/api/endpoints/#successful-response","title":"Successful Response","text":"<pre><code>{\n  \"success\": true,\n  \"data\": {\n    \"farm_id\": \"farm_123\",\n    \"name\": \"Green Vertical Farm\",\n    \"total_devices\": 15,\n    \"active_sensors\": 22\n  },\n  \"message\": \"Farm details retrieved successfully\",\n  \"timestamp\": \"2025-08-22T10:30:45Z\"\n}\n</code></pre>"},{"location":"reference/api/endpoints/#error-response","title":"Error Response","text":"<pre><code>{\n  \"success\": false,\n  \"error\": {\n    \"code\": \"RESOURCE_NOT_FOUND\",\n    \"message\": \"Farm not found\",\n    \"details\": {\n      \"farm_id\": \"farm_999\"\n    }\n  },\n  \"timestamp\": \"2025-08-22T10:30:45Z\"\n}\n</code></pre>"},{"location":"reference/api/endpoints/#rate-limiting-headers","title":"Rate Limiting Headers","text":"<p>Responses include rate limiting information: - <code>X-RateLimit-Limit</code>: Total allowed requests - <code>X-RateLimit-Remaining</code>: Remaining requests - <code>X-RateLimit-Reset</code>: Time until limit resets</p>"},{"location":"reference/api/endpoints/#best-practices","title":"Best Practices","text":"<ol> <li>Always include authentication token</li> <li>Handle error responses gracefully</li> <li>Use WebSocket for real-time data</li> <li>Implement retry mechanisms</li> <li>Monitor rate limit headers</li> </ol>"},{"location":"reference/api/endpoints/#changelog","title":"Changelog","text":"<ul> <li>v1.0.0: Initial API release</li> <li>v1.1.0: Added WebSocket endpoints</li> <li>v1.2.0: Enhanced sensor data capabilities</li> </ul>"},{"location":"workflow/BATCH_A_EXECUTION/","title":"Batch A Execution Guide: 22 Very Easy Issues","text":"<p>Status: Ready to Execute NOW \u2705 Scope: 22 issues needing only minor improvements Estimated Time: 2 hours total (5-10 min per issue) Target Completion: TODAY or TOMORROW Expected Result: 20-30+ issues ready for Ready column</p>"},{"location":"workflow/BATCH_A_EXECUTION/#quick-overview","title":"Quick Overview","text":"<p>Batch A has 22 issues that are ALMOST ready. They just need: - Priority labels (most common) - Acceptance criteria template (few) - Minor description expansion (few)</p> <p>Then: Tech lead reviews \u2192 approves \u2192 moves to Ready \u2705</p>"},{"location":"workflow/BATCH_A_EXECUTION/#how-to-participate","title":"How to Participate","text":""},{"location":"workflow/BATCH_A_EXECUTION/#option-1-take-2-3-issues-30-min","title":"Option 1: Take 2-3 Issues (30 min)","text":"<pre><code>1. Get assigned 2-3 Batch A issues\n2. Improve each one (5-10 min each)\n3. Comment: \"Improvements complete\"\n4. Done!\n</code></pre>"},{"location":"workflow/BATCH_A_EXECUTION/#option-2-do-all-22-2-hours","title":"Option 2: Do All 22 (2 hours)","text":"<pre><code>1. Ask to take full Batch A\n2. Go through 22 issues systematically\n3. 5-10 min per issue = 2 hours total\n4. Huge impact! \ud83c\udf89\n</code></pre>"},{"location":"workflow/BATCH_A_EXECUTION/#option-3-focus-on-type","title":"Option 3: Focus on Type","text":"<pre><code>Backend Services (15 issues) - all similar improvements\nBugs/Enhancements (7 issues) - also similar\n\nPick the type you prefer, improve all of them\n</code></pre>"},{"location":"workflow/BATCH_A_EXECUTION/#the-22-batch-a-issues","title":"The 22 Batch A Issues","text":""},{"location":"workflow/BATCH_A_EXECUTION/#group-1-backend-services-15-issues","title":"Group 1: Backend Services (15 issues)","text":"<p>These are ALL similar - add to each: - \u2705 Size label (usually M or L based on complexity) - \u2705 Priority label (usually P1 or P2) - (Most already have good descriptions)</p> <p>Issues: 1. #146 - ImageService for image management 2. #145 - BackgroundTaskService for async task management 3. #144 - GrowEventService for grow event tracking 4. #143 - GrowObservationService for grow observation tracking 5. #142 - [Milestone #2] Bulk operations to farm layout 6. #141 - [Milestone #13] Alert acknowledgment workflows 7. #138 - [Milestone #9] Procurement database schema 8. #137 - [Milestone #8] Connect business to Square service 9. #136 - [Milestone #6] Farm calendar event CRUD 10. #134 - SquareSyncService for business data 11. #133 - GrowAutomationService for grow automation 12. #132 - GrowParameterService for parameter tracking 13. #131 - GrowLocationService for grow area management 14. #130 - SensorAlertService for threshold monitoring 15. #129 - DeviceScheduleService for scheduled automation</p> <p>For each: <pre><code>1. Open issue\n2. Check if has priority-high/medium/low label\n   - If NOT: Add priority-medium or priority-high\n3. Check if has size: S/M/L/XL label\n   - If NOT: Add size: M (or L if complex)\n4. Done! Comment: \"Labels added\"\n</code></pre></p> <p>Time: 3-5 min per issue \u00d7 15 = 45-75 min</p>"},{"location":"workflow/BATCH_A_EXECUTION/#group-2-bugs-enhancements-7-issues","title":"Group 2: Bugs &amp; Enhancements (7 issues)","text":"<p>These need priority labels primarily</p> <p>Issues: 1. #123 - [ENHANCEMENT] Persist user account preferences 2. #122 - [BUG] Fix platform admin permission check 3. #121 - [BUG] Complete business growth metrics calculations 4. #119 - [BUG] Complete grow management API connections 5. #118 - [BUG] Implement species and plant varieties queries 6. #117 - [TECH-DEBT] Re-enable E2E tests 7. #92 - [BUG] Implement Supabase queries for sensor cache</p> <p>For each: <pre><code>1. Open issue\n2. Add priority label:\n   - BUG = priority-high or priority-medium\n   - ENHANCEMENT = priority-medium or priority-low\n   - TECH-DEBT = priority-low or priority-medium\n3. Verify size label exists\n4. Done! Comment: \"Ready for review\"\n</code></pre></p> <p>Time: 5 min per issue \u00d7 7 = 35 min</p>"},{"location":"workflow/BATCH_A_EXECUTION/#step-by-step-how-to-improve-each-issue","title":"Step-by-Step: How to Improve Each Issue","text":""},{"location":"workflow/BATCH_A_EXECUTION/#example-backend-service-issue","title":"Example: Backend Service Issue","text":"<p>BEFORE: <pre><code>Title: Implement ImageService for image management\nLabels: none\nDescription: Need image management service\n</code></pre></p> <p>AFTER (improvements): <pre><code>Title: Implement ImageService for image management\nLabels: \u2705 size: M, priority-high\nDescription: Need image management service\n\n[Description might stay same - already good]\n</code></pre></p>"},{"location":"workflow/BATCH_A_EXECUTION/#example-bug-issue","title":"Example: Bug Issue","text":"<p>BEFORE: <pre><code>Title: [BUG] Fix platform admin permission check\nLabels: none\nDescription: Admin permissions not working correctly\n</code></pre></p> <p>AFTER (improvements): <pre><code>Title: [BUG] Fix platform admin permission check\nLabels: \u2705 priority-high (bug!), size: S\nDescription: Admin permissions not working correctly\n</code></pre></p>"},{"location":"workflow/BATCH_A_EXECUTION/#the-labels-youll-add","title":"The Labels You'll Add","text":""},{"location":"workflow/BATCH_A_EXECUTION/#priority-labels-pick-one","title":"Priority Labels (Pick ONE)","text":"<ul> <li><code>priority-high</code> (P0 - Critical, blocking)</li> <li><code>priority-medium</code> (P1 - Important, should do)</li> <li><code>priority-low</code> (P2 - Nice to have, backlog)</li> </ul> <p>When to use: - Backend Services = Usually <code>priority-medium</code> or <code>priority-high</code> - Bugs = Usually <code>priority-high</code> (bugs block people) - Tech Debt = Usually <code>priority-low</code> or <code>priority-medium</code> - Enhancements = Usually <code>priority-medium</code> or <code>priority-low</code></p>"},{"location":"workflow/BATCH_A_EXECUTION/#size-labels-pick-one","title":"Size Labels (Pick ONE)","text":"<ul> <li><code>size: S</code> (Small - 1-2 days, simple)</li> <li><code>size: M</code> (Medium - 3-5 days, standard)</li> <li><code>size: L</code> (Large - 1-2 weeks, complex)</li> <li><code>size: XL</code> (Extra Large - 2+ weeks, very complex)</li> </ul> <p>When to use: - Service implementations = Usually <code>size: M</code> or <code>size: L</code> - Bugs = Usually <code>size: S</code> or <code>size: M</code> - Tech Debt = Varies, check description</p>"},{"location":"workflow/BATCH_A_EXECUTION/#github-cli-commands-optional","title":"GitHub CLI Commands (Optional)","text":"<p>If you prefer command line:</p> <pre><code># Add priority-high label to issue #146\ngh issue edit 146 --add-label priority-high\n\n# Add size: M label to issue #146\ngh issue edit 146 --add-label \"size: M\"\n\n# Add comment\ngh issue comment 146 --body \"Labels added - ready for review\"\n</code></pre> <p>Or use the GitHub UI: 1. Click issue 2. Click Labels on right 3. Add labels 4. Comment 5. Done!</p>"},{"location":"workflow/BATCH_A_EXECUTION/#checklist-for-each-issue","title":"Checklist for Each Issue","text":""},{"location":"workflow/BATCH_A_EXECUTION/#for-backend-services-group-1","title":"For Backend Services (Group 1):","text":"<ul> <li>[ ] Has title? (usually yes)</li> <li>[ ] Has description? (usually yes)</li> <li>[ ] Add/verify priority label</li> <li>[ ] Add/verify size label</li> <li>[ ] Comment: \"Ready for review\"</li> </ul>"},{"location":"workflow/BATCH_A_EXECUTION/#for-bugsenhancements-group-2","title":"For Bugs/Enhancements (Group 2):","text":"<ul> <li>[ ] Same as above</li> </ul>"},{"location":"workflow/BATCH_A_EXECUTION/#when-done","title":"When Done:","text":"<ul> <li>[ ] Comment: \"Improvements complete\" or \"Ready for review\"</li> <li>[ ] Wait for tech lead to add <code>triage:approved</code></li> <li>[ ] Tech lead moves to Ready column</li> <li>[ ] \ud83c\udf89 Issue ready for developer pickup!</li> </ul>"},{"location":"workflow/BATCH_A_EXECUTION/#expected-results","title":"Expected Results","text":""},{"location":"workflow/BATCH_A_EXECUTION/#after-completing-all-22","title":"After Completing All 22:","text":"<p>\u2705 22 issues with complete labels \u2705 22 issues ready for tech lead review \u2705 Tech lead approves in batch (30 min) \u2705 All 22 moved to Ready column \u2705 ~20-30 total issues now ready (27-36% of 110) \u2705 Team momentum builds! \ud83d\ude80</p>"},{"location":"workflow/BATCH_A_EXECUTION/#tips-for-success","title":"Tips for Success","text":""},{"location":"workflow/BATCH_A_EXECUTION/#1-work-in-parallel","title":"1. Work in Parallel","text":"<ul> <li>Divide 22 issues among 2-3 people</li> <li>Each takes 6-8 issues</li> <li>All done in 1-2 hours!</li> </ul>"},{"location":"workflow/BATCH_A_EXECUTION/#2-sort-by-type","title":"2. Sort by Type","text":"<ul> <li>Do all backend services together (15)</li> <li>Then bugs/enhancements (7)</li> <li>Faster because repetitive</li> </ul>"},{"location":"workflow/BATCH_A_EXECUTION/#3-double-check-labels","title":"3. Double-Check Labels","text":"<ul> <li>Go back and verify all 22</li> <li>Make sure nothing was missed</li> <li>Tech lead will catch anything anyway</li> </ul>"},{"location":"workflow/BATCH_A_EXECUTION/#4-add-helpful-comments","title":"4. Add Helpful Comments","text":"<ul> <li>\"Ready for review\" or \"Improvements complete\"</li> <li>Tech lead knows to look at it</li> <li>Shows issue was intentionally improved</li> </ul>"},{"location":"workflow/BATCH_A_EXECUTION/#5-celebrate-each-batch","title":"5. Celebrate Each Batch","text":"<ul> <li>After finishing all 22</li> <li>Tech lead reviews &amp; approves</li> <li>All 22 moved to Ready</li> <li>Big momentum boost! \ud83c\udf89</li> </ul>"},{"location":"workflow/BATCH_A_EXECUTION/#common-questions","title":"Common Questions","text":"<p>Q: What if an issue already has labels? A: Check if they make sense. If yes, leave them. If no/incomplete, add what's missing.</p> <p>Q: What if the issue has issues/tech approach already? A: Perfect! It already has good content. Just add the labels and move on.</p> <p>Q: Do I need to add acceptance criteria? A: Not for Batch A - these are \"very easy\" improvements. Just labels.</p> <p>Q: What if I can't figure out the right label? A: Use your best judgment. Tech lead will review and can adjust.</p> <p>Q: How long will each issue take? A: 5-10 minutes. Usually just 2-3 clicks to add labels.</p> <p>Q: Can I improve the description too? A: Sure! But not required for Batch A. Focus on labels.</p>"},{"location":"workflow/BATCH_A_EXECUTION/#what-happens-next-tech-lead","title":"What Happens Next (Tech Lead)","text":""},{"location":"workflow/BATCH_A_EXECUTION/#after-you-complete-improvements","title":"After you complete improvements:","text":"<ol> <li>Tech lead reviews all 22 (30 min)</li> <li>Checks labels are appropriate</li> <li>Verifies description is clear enough</li> <li> <p>Approves or suggests adjustments</p> </li> <li> <p>Tech lead batch approves (fast!)</p> </li> <li>Adds <code>triage:approved</code> label to all 22</li> <li>Adds approval comment</li> <li> <p>No need to review each individually</p> </li> <li> <p>Move to Ready column</p> </li> <li>Drag all 22 from Triage \u2192 Ready</li> <li>Or: Script does it automatically</li> <li> <p>Takes ~5 min</p> </li> <li> <p>Celebrate! \ud83c\udf89</p> </li> <li>20-30 issues now ready</li> <li>Huge progress in one day!</li> <li>Team sees momentum</li> </ol>"},{"location":"workflow/BATCH_A_EXECUTION/#support-questions","title":"Support &amp; Questions","text":"<p>During execution: - Stuck on a label? Ask in comment or Slack - Not sure about an issue? Check similar ready issues - Need help? Tech lead available</p> <p>After completion: - Tech lead will review within 24 hours - Expect approval quickly - Issues move to Ready column</p>"},{"location":"workflow/BATCH_A_EXECUTION/#success-looks-like","title":"Success Looks Like","text":"<pre><code>MORNING: \"Starting Batch A - 22 issues\"\nMIDDAY: \"Got through first 8 issues - going great!\"\nAFTERNOON: \"All 22 improvements complete! \ud83c\udf89\"\nEVENING: \"Tech lead approved - 20+ in Ready column!\"\nNEXT DAY: \"Let's hit Batch B!\"\n</code></pre>"},{"location":"workflow/BATCH_A_EXECUTION/#the-ask","title":"The Ask","text":"<p>Help us complete Batch A TODAY:</p> <ol> <li>\u2705 Pick 2-3 issues (or more!)</li> <li>\u2705 Add labels (priority + size)</li> <li>\u2705 Comment \"Ready for review\"</li> <li>\u2705 That's it!</li> </ol> <p>\u2192 Result: Quick wins, momentum, 20+ ready by tomorrow!</p> <p>Ready to start? Let's go! \ud83d\ude80</p> <p>Pick your issues below and get started:</p> <p>Group 1: Backend Services (pick 5-8): - [ ] #146, #145, #144, #143, #142, #141, #138, #137, #136, #134, #133, #132, #131, #130, #129</p> <p>Group 2: Bugs/Enhancements (pick 2-4): - [ ] #123, #122, #121, #119, #118, #117, #92</p> <p>Questions? Ask @tech-lead in Slack!</p>"},{"location":"workflow/BATCH_A_TEAM_ANNOUNCEMENT/","title":"\ud83d\ude80 Batch A Execution: Let's Get 20+ Issues Ready TODAY!","text":""},{"location":"workflow/BATCH_A_TEAM_ANNOUNCEMENT/#the-mission","title":"The Mission","text":"<p>We've identified 22 \"very easy\" issues that need only minor improvements (labels mostly). If we complete these TODAY, we'll have 20-30 issues in the Ready column by tomorrow! \ud83c\udf89</p> <p>This is a QUICK WIN. We can do this in 2 hours.</p>"},{"location":"workflow/BATCH_A_TEAM_ANNOUNCEMENT/#whats-needed","title":"What's Needed","text":"<p>Each issue needs: - \u2705 Priority label (priority-high, priority-medium, or priority-low) - \u2705 Size label (size: S, M, L, or XL) - \u2705 Maybe: A quick description expansion or acceptance criteria</p> <p>Time per issue: 5-10 minutes Total time: ~2 hours across all 22</p>"},{"location":"workflow/BATCH_A_TEAM_ANNOUNCEMENT/#how-to-participate","title":"How to Participate","text":""},{"location":"workflow/BATCH_A_TEAM_ANNOUNCEMENT/#option-1-take-a-few-issues-30-min","title":"Option 1: Take a Few Issues (30 min)","text":"<p>Pick 2-3 issues and improve them. Takes ~30 min, big impact!</p>"},{"location":"workflow/BATCH_A_TEAM_ANNOUNCEMENT/#option-2-take-a-group-1-hour","title":"Option 2: Take a Group (1 hour)","text":"<p>Pick all Backend Services OR all Bugs &amp; Enhancements. Faster because they're similar!</p>"},{"location":"workflow/BATCH_A_TEAM_ANNOUNCEMENT/#option-3-help-everywhere-2-hours","title":"Option 3: Help Everywhere (2 hours)","text":"<p>You have 2 hours? Do all 22! You'll be a legend. \ud83c\udfc6</p>"},{"location":"workflow/BATCH_A_TEAM_ANNOUNCEMENT/#the-22-issues","title":"The 22 Issues","text":""},{"location":"workflow/BATCH_A_TEAM_ANNOUNCEMENT/#group-1-backend-services-15-issues","title":"Group 1: Backend Services (15 issues)","text":"<p>These are all similar - add priority + size labels</p> <pre><code>#146 #145 #144 #143 #142 #141 #138 #137 #136 #134 #133 #132 #131 #130 #129\n</code></pre>"},{"location":"workflow/BATCH_A_TEAM_ANNOUNCEMENT/#group-2-bugs-enhancements-7-issues","title":"Group 2: Bugs &amp; Enhancements (7 issues)","text":"<p>Also similar - add priority + size labels</p> <pre><code>#123 #122 #121 #119 #118 #117 #92\n</code></pre>"},{"location":"workflow/BATCH_A_TEAM_ANNOUNCEMENT/#step-by-step-how-to-help","title":"Step-by-Step: How to Help","text":"<ol> <li> <p>Pick 2-3+ issues from above (or ask for assignment)</p> </li> <li> <p>For each issue:</p> </li> <li>Open it in GitHub</li> <li>Add priority label: <code>priority-high</code>, <code>priority-medium</code>, or <code>priority-low</code></li> <li>Add size label: <code>size: S</code>, <code>size: M</code>, <code>size: L</code>, or <code>size: XL</code></li> <li>(Optional) Add/expand acceptance criteria if needed</li> <li> <p>Comment: \"Ready for review\"</p> </li> <li> <p>Done! Tech lead will review and approve in batch</p> </li> <li> <p>Celebrate! \ud83c\udf89</p> </li> </ol>"},{"location":"workflow/BATCH_A_TEAM_ANNOUNCEMENT/#label-guidance","title":"Label Guidance","text":""},{"location":"workflow/BATCH_A_TEAM_ANNOUNCEMENT/#priority-labels","title":"Priority Labels","text":"<ul> <li><code>priority-high</code> = Blocking/critical (Bugs, urgent features)</li> <li><code>priority-medium</code> = Important (Most services, key features)</li> <li><code>priority-low</code> = Nice to have (Tech debt, polish)</li> </ul>"},{"location":"workflow/BATCH_A_TEAM_ANNOUNCEMENT/#size-labels","title":"Size Labels","text":"<ul> <li><code>size: S</code> = Small (1-2 days)</li> <li><code>size: M</code> = Medium (3-5 days) - Most services</li> <li><code>size: L</code> = Large (1-2 weeks) - Complex services</li> <li><code>size: XL</code> = Extra Large (2+ weeks) - Rare</li> </ul> <p>For Batch A: Most will be <code>priority-medium</code> and <code>size: M</code></p>"},{"location":"workflow/BATCH_A_TEAM_ANNOUNCEMENT/#quick-reference","title":"Quick Reference","text":"Issue Type Priority Label Size Label Backend Service <code>priority-medium</code> <code>size: M</code> Important Service <code>priority-high</code> <code>size: M</code> or <code>L</code> Bug <code>priority-high</code> <code>size: S</code> or <code>M</code> Enhancement <code>priority-medium</code> <code>size: M</code> Tech Debt <code>priority-low</code> <code>size: M</code>"},{"location":"workflow/BATCH_A_TEAM_ANNOUNCEMENT/#what-happens-after","title":"What Happens After","text":"<ol> <li>You complete improvements \u2192 Comment \"Ready for review\"</li> <li>Tech lead reviews all 22 \u2192 Batch approval (30 min)</li> <li>Tech lead approves \u2192 Adds <code>triage:approved</code> label</li> <li>All moved to Ready column \u2192 Available for developers</li> <li>Result: 20-30 issues ready by tomorrow! \ud83d\ude80</li> </ol>"},{"location":"workflow/BATCH_A_TEAM_ANNOUNCEMENT/#tracking","title":"Tracking","text":"<p>Real-time progress: See <code>docs/workflow/BATCH_A_TRACKER.md</code></p> <p>Update it as you complete issues so we can see momentum build!</p>"},{"location":"workflow/BATCH_A_TEAM_ANNOUNCEMENT/#questions","title":"Questions?","text":"<ul> <li>How do I add labels? GitHub UI: Click issue \u2192 Labels \u2192 Add</li> <li>What if I'm unsure about a label? Your best judgment. Tech lead will review.</li> <li>Can I improve descriptions too? Sure, but not required for Batch A.</li> <li>What if it takes longer? No problem! Do what you can.</li> <li>Need help? Ask @tech-lead in Slack</li> </ul>"},{"location":"workflow/BATCH_A_TEAM_ANNOUNCEMENT/#why-this-matters","title":"Why This Matters","text":"<p>\u2705 Quick Wins Build Momentum - Easy successes motivate the team \u2705 Real Progress - 20-30 issues ready is HUGE progress \u2705 Team Ownership - Everyone contributes, everyone benefits \u2705 Next Batches Easier - We know what works \u2705 Developers Happy - More quality issues to work on</p>"},{"location":"workflow/BATCH_A_TEAM_ANNOUNCEMENT/#the-challenge","title":"The Challenge","text":"<p>Can we get all 22 done today?</p> <p>If yes: - \ud83c\udf89 Celebrate huge progress - \ud83d\ude80 Batch B momentum starts tomorrow - \ud83d\udcaa Team sees we can execute - \ud83d\udcc8 70%+ of issues ready within 2 weeks</p> <p>If we get most done: - \u2705 Still huge progress - \u2705 Tech lead approves what we finish - \u2705 Rest move to Ready incrementally - \u2705 Still massive momentum</p>"},{"location":"workflow/BATCH_A_TEAM_ANNOUNCEMENT/#timeline","title":"Timeline","text":"<ul> <li>9 AM: Kickoff, issues assigned</li> <li>10 AM: First batch of improvements</li> <li>12 PM: Halfway there check-in</li> <li>1 PM: All improvements complete</li> <li>2 PM: Tech lead reviews &amp; approves all 22</li> <li>3 PM: All 22 in Ready column \ud83c\udf89</li> </ul>"},{"location":"workflow/BATCH_A_TEAM_ANNOUNCEMENT/#sign-up-sheet","title":"Sign-Up Sheet","text":"<p>Who's in? Comment in Slack or reply here:</p> <pre><code>\ud83d\udc4b I'll take 2-3 issues (30 min)\n\ud83d\udcaa I'll take Backend Services (1 hour)\n\ud83d\udd25 I'll take Bugs &amp; Enhancements (1 hour)\n\ud83c\udfc6 I'll help with all 22 (2 hours)\n</code></pre>"},{"location":"workflow/BATCH_A_TEAM_ANNOUNCEMENT/#final-thought","title":"Final Thought","text":"<p>This is one of the most impactful 2 hours we can spend right now.</p> <p>We're building a 20-30 issue ready pipeline that will: - Speed up sprint planning - Give developers quality to work with - Show we can execute on processes - Build team momentum</p> <p>Let's do this! \ud83d\ude80</p> <p>Start whenever you're ready. Progress gets real in a few minutes!</p>"},{"location":"workflow/BATCH_A_TEAM_ANNOUNCEMENT/#resources","title":"Resources","text":"<ul> <li>Execution Guide: <code>docs/workflow/BATCH_A_EXECUTION.md</code></li> <li>Quick Start: <code>docs/workflow/QUICK_START_GUIDE.md</code></li> <li>Tracking: <code>docs/workflow/BATCH_A_TRACKER.md</code></li> <li>Full Process: <code>docs/workflow/issue-readiness.md</code></li> </ul> <p>Questions? Ask below or in Slack! Let's get started! \ud83d\ude80</p>"},{"location":"workflow/BATCH_A_TRACKER/","title":"Batch A Tracking - Real-Time Progress","text":"<p>Status: \ud83d\ude80 LIVE EXECUTION Start Time: [Insert time] Target Completion: TODAY Goal: All 22 improved + ready for tech lead review</p>"},{"location":"workflow/BATCH_A_TRACKER/#real-time-progress","title":"Real-Time Progress","text":""},{"location":"workflow/BATCH_A_TRACKER/#group-1-backend-services-15-issues","title":"Group 1: Backend Services (15 issues)","text":"# Issue Status Assignee Notes 1 #146 \u2b1c Pending - ImageService 2 #145 \u2b1c Pending - BackgroundTaskService 3 #144 \u2b1c Pending - GrowEventService 4 #143 \u2b1c Pending - GrowObservationService 5 #142 \u2b1c Pending - Bulk farm layout ops 6 #141 \u2b1c Pending - Alert acknowledgment 7 #138 \u2b1c Pending - Procurement schema 8 #137 \u2b1c Pending - Square integration 9 #136 \u2b1c Pending - Farm calendar CRUD 10 #134 \u2b1c Pending - SquareSyncService 11 #133 \u2b1c Pending - GrowAutomationService 12 #132 \u2b1c Pending - GrowParameterService 13 #131 \u2b1c Pending - GrowLocationService 14 #130 \u2b1c Pending - SensorAlertService 15 #129 \u2b1c Pending - DeviceScheduleService <p>Group 1 Progress: 0/15 | 0%</p>"},{"location":"workflow/BATCH_A_TRACKER/#group-2-bugs-enhancements-7-issues","title":"Group 2: Bugs &amp; Enhancements (7 issues)","text":"# Issue Status Assignee Notes 1 #123 \u2b1c Pending - [ENHANCEMENT] User preferences 2 #122 \u2b1c Pending - [BUG] Admin permissions 3 #121 \u2b1c Pending - [BUG] Growth metrics 4 #119 \u2b1c Pending - [BUG] Grow API connections 5 #118 \u2b1c Pending - [BUG] Species queries 6 #117 \u2b1c Pending - [TECH-DEBT] E2E tests 7 #92 \u2b1c Pending - [BUG] Sensor cache queries <p>Group 2 Progress: 0/7 | 0%</p>"},{"location":"workflow/BATCH_A_TRACKER/#summary","title":"Summary","text":"<p>Total Issues: 22 Completed: 0 In Progress: 0 Pending: 22</p> <p>Progress: 0/22 (0%) Estimated Time Remaining: ~2 hours Target Completion Time: [Insert target time]</p>"},{"location":"workflow/BATCH_A_TRACKER/#updates-log","title":"Updates Log","text":"<pre><code>[Start time] - Batch A execution started\n                Team members assigned\n\n[Update]     -\n\n[Update]     -\n\n[Completion] - All 22 improved\n               Awaiting tech lead review\n\n[Review]     - Tech lead approving...\n\n[Move]       - All 22 moved to Ready column\n               \ud83c\udf89 BATCH A COMPLETE!\n</code></pre>"},{"location":"workflow/BATCH_A_TRACKER/#how-to-update-this","title":"How to Update This","text":"<p>When you complete an issue:</p> <ol> <li>Change status from <code>\u2b1c Pending</code> to <code>\u2705 Complete</code></li> <li>Add your name as assignee</li> <li>Update progress: <code>X/22 (Y%)</code></li> <li>Comment in Slack: \"Just finished #XXX - adding priority-medium label\"</li> </ol> <p>Example update: <pre><code>| 5 | #142 | \u2705 Complete | @john | priority-medium, size: M added |\n</code></pre></p>"},{"location":"workflow/BATCH_A_TRACKER/#quick-status-commands","title":"Quick Status Commands","text":"<p>For Slack updates: - \"Batch A: 5/22 complete (23%) - On track for today! \ud83d\udfe2\" - \"Batch A: 10/22 complete (45%) - Halfway there! \ud83d\udcaa\" - \"Batch A: 22/22 complete! \u2705 Ready for tech lead review\"</p>"},{"location":"workflow/BATCH_A_TRACKER/#tech-lead-checklist","title":"Tech Lead Checklist","text":"<p>When all 22 are improved: - [ ] Review all 22 issues (30 min) - [ ] Add <code>triage:approved</code> label to all - [ ] Add batch approval comment - [ ] Move all to Ready column - [ ] Celebrate with team! \ud83c\udf89</p>"},{"location":"workflow/BATCH_A_TRACKER/#expected-outcomes","title":"Expected Outcomes","text":""},{"location":"workflow/BATCH_A_TRACKER/#if-completed-today","title":"If Completed Today","text":"<p>\u2705 22 issues improved \u2705 Tech lead approves \u2705 20-30 issues in Ready column \u2705 HUGE momentum for Batch B \ud83d\ude80</p>"},{"location":"workflow/BATCH_A_TRACKER/#team-impact","title":"Team Impact","text":"<ul> <li>Developers see progress</li> <li>Issue pipeline looks healthy</li> <li>Batch B starts strong</li> <li>Momentum carries forward</li> </ul>"},{"location":"workflow/BATCH_A_TRACKER/#notes","title":"Notes","text":"<ul> <li>Keep comments in issues brief: \"Ready for review\"</li> <li>Tech lead will handle the approvals</li> <li>Once approved, it's officially in Ready</li> <li>Each issue completed = closer to 70%+!</li> </ul> <p>Let's go get these 22! \ud83d\udcaa</p>"},{"location":"workflow/IMPLEMENTATION_SUMMARY/","title":"Issue Readiness Workflow: Implementation Summary","text":"<p>Completed: December 19, 2025 Status: Foundation Complete - Ready for Tech Lead Review</p>"},{"location":"workflow/IMPLEMENTATION_SUMMARY/#what-was-implemented","title":"What Was Implemented","text":""},{"location":"workflow/IMPLEMENTATION_SUMMARY/#phase-1-workflow-foundation-weeks-1-2","title":"\u2705 Phase 1: Workflow Foundation (Weeks 1-2)","text":""},{"location":"workflow/IMPLEMENTATION_SUMMARY/#1-github-labels-created","title":"1. GitHub Labels Created","text":"<pre><code>\u2713 triage:ready-for-dev     (green)  - Issue meets criteria, ready for Ready column\n\u2713 triage:needs-info        (yellow) - Needs clarification or more details\n\u2713 triage:blocked           (red)    - Blocked by dependency\n\u2713 triage:approved          (blue)   - Tech lead approved for Ready\n</code></pre>"},{"location":"workflow/IMPLEMENTATION_SUMMARY/#2-issue-templates-created","title":"2. Issue Templates Created","text":"<p>File: <code>.github/ISSUE_TEMPLATE/03_ready_for_dev.md</code> - Comprehensive 5-category readiness checklist - Tech lead approval section - All required fields for moving to Ready column - Ready to use for new issues</p>"},{"location":"workflow/IMPLEMENTATION_SUMMARY/#3-workflow-documentation-created","title":"3. Workflow Documentation Created","text":"<p>File: <code>docs/workflow/issue-readiness.md</code> - 25+ page comprehensive guide - Column definitions and transition conditions - 5 core readiness criteria with examples - Scoring rubric and decision tree - Common issues &amp; troubleshooting - Success metrics</p>"},{"location":"workflow/IMPLEMENTATION_SUMMARY/#4-initial-audit-completed","title":"4. Initial Audit Completed","text":"<p>File: <code>docs/workflow/READINESS_AUDIT_RESULTS.md</code> - 110 issues analyzed - 10 likely-ready candidates identified - Tech lead review checklist prepared - Quality metrics framework</p>"},{"location":"workflow/IMPLEMENTATION_SUMMARY/#key-findings-from-audit","title":"Key Findings from Audit","text":"Metric Result Issues Audited 110 Likely Ready (4.0+ score, no blockers) 10 Need More Info 30 Need Significant Work 70 Most Common Gap 94% mention dependencies High-Readiness Gap Blocker clarification needed"},{"location":"workflow/IMPLEMENTATION_SUMMARY/#the-10-ready-candidates","title":"The 10 Ready Candidates","text":"<p>All have score of 4.0/6 with clear requirements, tech approach, and no true blockers:</p> <ol> <li>#166 - Implement AutomationRuleService (Size: XL, Priority: High)</li> <li>#165 - Implement AlertService (Size: L, Priority: High)</li> <li>#164 - Implement SensorReadingService (Size: XL, Priority: High)</li> <li>#162 - Implement DeviceStateService (Size: XL, Priority: High)</li> <li>#161 - Implement DeviceAssignmentService (Size: L, Priority: High)</li> <li>#160 - Implement HarvestService (Size: XL, Priority: High)</li> <li>#157 - Build React Native mobile app (Size: XL, Priority: Low)</li> <li>#140 - Complete integration setup flows (Size: M, Priority: Medium)</li> <li>#135 - Implement OrderService (Size: M, Priority: Medium)</li> <li>#128 - Implement CropService (Size: M, Priority: Medium)</li> </ol>"},{"location":"workflow/IMPLEMENTATION_SUMMARY/#implementation-approach-mvp-label-based-system","title":"Implementation Approach: MVP Label-Based System","text":"<p>Tech Lead as Sole Approver</p>"},{"location":"workflow/IMPLEMENTATION_SUMMARY/#current-workflow-manual-mvp","title":"Current Workflow (Manual - MVP)","text":"<pre><code>1. Team Member Self-Assess\n   \u2514\u2500 Review issue against 5 criteria\n   \u2514\u2500 Add triage:ready-for-dev label if ready\n\n2. Tech Lead Review\n   \u251c\u2500 If Approved:\n   \u2502  \u251c\u2500 Add comment: \"\u2705 Ready for dev - approved by @tech-lead\"\n   \u2502  \u251c\u2500 Add triage:approved label\n   \u2502  \u2514\u2500 Move to Ready column\n   \u2502\n   \u251c\u2500 If Needs Info:\n   \u2502  \u251c\u2500 Add triage:needs-info label\n   \u2502  \u251c\u2500 Add comment with specific gaps\n   \u2502  \u2514\u2500 Issue stays in Triage\n   \u2502\n   \u2514\u2500 If Blocked:\n      \u251c\u2500 Add triage:blocked label\n      \u251c\u2500 Add comment explaining blocker\n      \u2514\u2500 Issue stays in Triage\n\n3. Ready Column\n   \u2514\u2500 Issue available for developers to pick up\n</code></pre>"},{"location":"workflow/IMPLEMENTATION_SUMMARY/#future-enhancement-automation-optional","title":"Future Enhancement: Automation (Optional)","text":"<ul> <li>GitHub Actions to auto-move on label addition</li> <li>Slack notifications for new Ready issues</li> <li>Dashboard for transition metrics</li> <li>Scheduled readiness reports</li> </ul>"},{"location":"workflow/IMPLEMENTATION_SUMMARY/#how-to-use-this-workflow","title":"How to Use This Workflow","text":""},{"location":"workflow/IMPLEMENTATION_SUMMARY/#for-issue-creators-team-members","title":"For Issue Creators / Team Members","text":"<p>When creating or updating an issue: 1. Ensure 5 readiness criteria are met (see <code>issue-readiness.md</code>) 2. Add appropriate <code>size:</code> and <code>priority-</code> labels 3. If ready, add <code>triage:ready-for-dev</code> label 4. Wait for tech lead review</p>"},{"location":"workflow/IMPLEMENTATION_SUMMARY/#for-tech-lead","title":"For Tech Lead","text":"<p>Weekly review routine: 1. Check for issues with <code>triage:ready-for-dev</code> label 2. Use checklist in <code>READINESS_AUDIT_RESULTS.md</code> 3. Approve with <code>triage:approved</code> + comment 4. Move to Ready column 5. Add <code>triage:needs-info</code> for issues needing work</p>"},{"location":"workflow/IMPLEMENTATION_SUMMARY/#for-developers","title":"For Developers","text":"<p>When picking up work: 1. Issues in Ready column are approved for development 2. Move to In Progress when starting 3. Reference issue number in commits/PRs 4. Expect clear requirements and test plans</p>"},{"location":"workflow/IMPLEMENTATION_SUMMARY/#next-steps-for-you","title":"Next Steps for You","text":""},{"location":"workflow/IMPLEMENTATION_SUMMARY/#immediate-this-week","title":"Immediate (This Week)","text":"<ol> <li>\u2705 Review the 10 ready candidates in <code>READINESS_AUDIT_RESULTS.md</code></li> <li>\u2705 Approve the ones you confirm are ready</li> <li>\u2705 Move approved issues to Ready column</li> <li>\u2705 Communicate the new workflow to the team</li> </ol>"},{"location":"workflow/IMPLEMENTATION_SUMMARY/#short-term-next-week","title":"Short-term (Next Week)","text":"<ol> <li>Monitor how Ready issues flow into In Progress</li> <li>Gather feedback from developers on clarity</li> <li>Adjust readiness criteria based on feedback</li> <li>Process new issues with readiness checklist</li> </ol>"},{"location":"workflow/IMPLEMENTATION_SUMMARY/#medium-term-weeks-2-4","title":"Medium-term (Weeks 2-4)","text":"<ol> <li>Automate transitions using GitHub Actions (if desired)</li> <li>Build Slack notifications for new Ready issues</li> <li>Create team patterns/templates for different issue types</li> <li>Track metrics on issue quality and developer satisfaction</li> </ol>"},{"location":"workflow/IMPLEMENTATION_SUMMARY/#long-term-ongoing","title":"Long-term (Ongoing)","text":"<ol> <li>Monitor transition efficiency</li> <li>Refine criteria based on sprint retrospectives</li> <li>Optimize the workflow based on real experience</li> <li>Scale to team needs as project grows</li> </ol>"},{"location":"workflow/IMPLEMENTATION_SUMMARY/#files-created","title":"Files Created","text":""},{"location":"workflow/IMPLEMENTATION_SUMMARY/#documentation","title":"Documentation","text":"<ul> <li>\u2705 <code>.github/ISSUE_TEMPLATE/03_ready_for_dev.md</code> - Readiness template</li> <li>\u2705 <code>docs/workflow/issue-readiness.md</code> - Comprehensive guide</li> <li>\u2705 <code>docs/workflow/READINESS_AUDIT_RESULTS.md</code> - Audit findings</li> <li>\u2705 <code>docs/workflow/IMPLEMENTATION_SUMMARY.md</code> - This file</li> </ul>"},{"location":"workflow/IMPLEMENTATION_SUMMARY/#configuration","title":"Configuration","text":"<ul> <li>\u2705 4 GitHub labels created (triage:ready-for-dev, triage:needs-info, triage:blocked, triage:approved)</li> </ul>"},{"location":"workflow/IMPLEMENTATION_SUMMARY/#scripts-for-reference","title":"Scripts (for reference)","text":"<ul> <li><code>/tmp/audit_readiness.py</code> - Analyzed all 110 issues</li> <li><code>/tmp/identify_ready_candidates.py</code> - Identified 10 candidates</li> </ul>"},{"location":"workflow/IMPLEMENTATION_SUMMARY/#success-metrics-to-track","title":"Success Metrics to Track","text":"Metric Target Current Triage \u2192 Ready time (HIGH) &lt; 1 day TBD Triage \u2192 Ready time (MEDIUM) &lt; 3 days TBD Ready \u2192 In Progress Sprint cycle TBD Issues ready for sprint 80%+ TBD Developer satisfaction &gt; 4/5 TBD Rework rate &lt; 10% TBD"},{"location":"workflow/IMPLEMENTATION_SUMMARY/#questions-support","title":"Questions &amp; Support","text":"<p>Process questions: \u2192 See <code>docs/workflow/issue-readiness.md</code> (comprehensive guide)</p> <p>Audit results questions: \u2192 See <code>docs/workflow/READINESS_AUDIT_RESULTS.md</code> (tech lead review guide)</p> <p>Workflow improvements: \u2192 Discuss with tech lead and product team</p>"},{"location":"workflow/IMPLEMENTATION_SUMMARY/#summary","title":"Summary","text":"<p>You now have a complete, lightweight issue readiness workflow that:</p> <p>\u2705 Clearly defines what \"ready\" means (5 criteria) \u2705 Provides templates for issues and documentation \u2705 Gives tech lead approval authority \u2705 Includes 10 candidate issues ready for review \u2705 Scales from MVP (manual) to automated (future)</p> <p>The 10 ready candidates are waiting for your tech lead review. Once approved, they can move to the Ready column and developers can start picking them up.</p> <p>Next action: Tech lead reviews the 10 candidates and approves/moves them to Ready column.</p>"},{"location":"workflow/PHASE_2C_BATCH_PLAN/","title":"Phase 2C: Complete Batch Processing Plan","text":"<p>Status: PHASE 2C COMPLETE \u2705 Date: December 19, 2025 Issues Analyzed: 80 remaining issues (after 10 ready + 30 needs-info) Total Project: 110 audited issues</p>"},{"location":"workflow/PHASE_2C_BATCH_PLAN/#executive-summary","title":"Executive Summary","text":"<p>Phase 2C analysis is complete. All 80 remaining issues have been: - \u2705 Categorized by type (8 categories) - \u2705 Assessed for effort (5 levels) - \u2705 Prioritized by impact + effort matrix - \u2705 Organized into 5 strategic batches</p> <p>Key Finding: 40 issues are Medium Impact + Low Effort = QUICK WINS ready to process</p> <p>Strategic Plan: Process in 5 batches over 2-3 weeks \u2192 70%+ of project ready</p>"},{"location":"workflow/PHASE_2C_BATCH_PLAN/#current-overall-status","title":"Current Overall Status","text":"Stage Count Status \ud83d\udfe2 Ready (triage:approved) 10 \u2705 Complete \ud83d\udfe1 Needs-Info (triage:needs-info) 30 \u2705 Complete \ud83d\udd04 Batch Processing (planned) 80 \ud83d\udccb Planning Complete TOTAL 110"},{"location":"workflow/PHASE_2C_BATCH_PLAN/#issue-categorization-80-total","title":"Issue Categorization (80 Total)","text":"Category Count Complexity Priority Backend Services 25 High Strategic Features 17 Medium High UI/UX/Polish 11 Low Lower Bugs 6 Low-Medium Medium Integration 8 High Strategic Enhancement 8 Medium Medium Refactoring 1 High Low Other 4 Varies Medium"},{"location":"workflow/PHASE_2C_BATCH_PLAN/#effort-assessment-80-total","title":"Effort Assessment (80 Total)","text":"Effort Level Count Time Per Issue Total Time Very Easy 22 5-10 min ~2 hours Easy 18 15-20 min ~5 hours Medium 11 30-45 min ~6 hours Hard 23 1-2 hours ~30 hours Very Hard 6 2-3 hours ~15 hours <p>Total estimated effort: ~58 hours across all 80 issues</p>"},{"location":"workflow/PHASE_2C_BATCH_PLAN/#5-batch-strategic-plan","title":"5-Batch Strategic Plan","text":""},{"location":"workflow/PHASE_2C_BATCH_PLAN/#batch-a-very-easy-quick-wins","title":"BATCH A: Very Easy - QUICK WINS \ud83d\ude80","text":"<p>Scope: 22 issues | Effort: 1 day | Effort per issue: 5-10 min</p> <p>What's needed: - Add/fix labels if needed - Expand description (1-2 sentences) - Add acceptance criteria (template provided) - Possibly add test plan mention</p> <p>Impact: High (build momentum with easy wins)</p> <p>Example improvements: <pre><code>BEFORE: \"Fix performance issue in dashboard\"\nAFTER:\n- Acceptance Criteria: Dashboard loads in &lt;2s, metrics update every 5s\n- Tech Approach: Use React.memo + caching\n- Test: Jest for performance, manual load testing\n</code></pre></p> <p>Issues in Batch A (top 15): - [Get from analysis] - All very easy scores - Focus on high-readiness-score issues first</p> <p>Recommendation: - Process all 22 in parallel (divide among team) - Target completion: 1 day - Move all to Ready upon completion</p>"},{"location":"workflow/PHASE_2C_BATCH_PLAN/#batch-b-easy-continuation","title":"BATCH B: Easy - CONTINUATION \ud83d\udcc8","text":"<p>Scope: 18 issues | Effort: 1-2 days | Effort per issue: 15-20 min</p> <p>What's needed: - Add ONE primary section:   - Clear acceptance criteria, OR   - Technical approach documentation, OR   - Test plan definition - Ensure description is clear (150+ chars)</p> <p>Impact: High (continue momentum)</p> <p>Issues in Batch B (top 15): - [Get from analysis] - All easy scores - Sorted by readiness score</p> <p>Recommendation: - Process after Batch A succeeds - Divide among team members - Target completion: 1-2 days - Move all to Ready upon completion</p>"},{"location":"workflow/PHASE_2C_BATCH_PLAN/#batch-c-uiuxpolish-parallel-track","title":"BATCH C: UI/UX/Polish - PARALLEL TRACK \ud83c\udfa8","text":"<p>Scope: 11 issues | Effort: 1-2 days | Effort per issue: 15-25 min</p> <p>Why parallel: - Lower priority than features/services - Good for contributor onboarding - Can start while team works on Batch B - Simpler scope = faster to ready</p> <p>What's needed: - Clear acceptance criteria (UI specs) - Test scenarios (manual + E2E) - User impact explanation</p> <p>Impact: Medium (lower priority but clears backlog)</p> <p>Recommendation: - Assign to new contributors or parallel team - Can process simultaneously with Batch B - Target completion: 1-2 days - Move all to Ready upon completion</p>"},{"location":"workflow/PHASE_2C_BATCH_PLAN/#batch-d-medium-effort-focused-work","title":"BATCH D: Medium Effort - FOCUSED WORK \ud83c\udfaf","text":"<p>Scope: 11 issues | Effort: 2-3 days | Effort per issue: 30-45 min</p> <p>What's needed: - Comprehensive improvements - Multiple sections: approach + dependencies + testing - Detailed requirements</p> <p>Impact: Medium (foundational for later work)</p> <p>Recommended sub-batches: - D1: 5-6 issues (1 day) - D2: 5-6 issues (1 day)</p> <p>Recommendation: - Schedule after momentum from A+B+C - Assign focused developers - 1 issue per developer, daily standup - Target completion: 2-3 days total - Move all to Ready upon completion</p>"},{"location":"workflow/PHASE_2C_BATCH_PLAN/#batch-e-backend-services-strategic-priority","title":"BATCH E: Backend Services - STRATEGIC PRIORITY \ud83c\udfd7\ufe0f","text":"<p>Scope: 25 issues | Effort: 3-5 hours each | Effort per issue: 1-3 hours</p> <p>Complexity: High (foundational services) Impact: Very High (unblocks other work)</p> <p>What's needed: - Comprehensive technical approach - Clear service boundaries - Dependency mapping - Integration points - Test strategy</p> <p>Why schedule last: - Most complex - Need full team focus - Unblock downstream work - Build on momentum from A+B+C+D</p> <p>Recommended sub-batches: - E1: 5-6 services (1-2 days) - E2: 5-6 services (1-2 days) - E3: 5-6 services (1-2 days) - E4: 5-6 services (1-2 days)</p> <p>Recommendation: - Start after Batch D - Assign experienced developers - Daily tech sync-ups - Target completion: 1-2 weeks - Move to Ready in waves</p>"},{"location":"workflow/PHASE_2C_BATCH_PLAN/#strategic-recommendation-phased-rollout","title":"Strategic Recommendation: Phased Rollout","text":"<pre><code>WEEK 1:\n\u251c\u2500 Day 1: BATCH A (22 very easy) \u2192 ~20+ ready\n\u251c\u2500 Day 2-3: BATCH B (18 easy) \u2192 ~35-40 ready total\n\u2514\u2500 Parallel: BATCH C UI/UX (11) \u2192 ~45-50 ready total\n\nWEEK 2:\n\u251c\u2500 Day 1-3: BATCH D (11 medium) \u2192 ~55-60 ready total\n\u2514\u2500 Start BATCH E (sub-batch 1)\n\nWEEKS 3-4:\n\u2514\u2500 Continue BATCH E in 4 sub-batches \u2192 ~80+ ready (73%)\n</code></pre>"},{"location":"workflow/PHASE_2C_BATCH_PLAN/#success-metrics","title":"Success Metrics","text":""},{"location":"workflow/PHASE_2C_BATCH_PLAN/#phase-2-overall-goals","title":"Phase 2 Overall Goals","text":"Metric Target Progress Issues in Ready 50+ 20 current (40%) Issues audited 110 110 (100%) \u2705 Batches planned 5 5 (100%) \u2705 Improvement path clear 100% 90% (30 with guidance, 80 with plan) Team clarity High TBD"},{"location":"workflow/PHASE_2C_BATCH_PLAN/#post-phase-2-targets","title":"Post-Phase 2 Targets","text":"<ul> <li>After A+B+C: 45-50 ready (41-45% of 110)</li> <li>After A+B+C+D: 55-60 ready (50-55% of 110)</li> <li>After All Batches: 70-80 ready (64-73% of 110)</li> </ul>"},{"location":"workflow/PHASE_2C_BATCH_PLAN/#action-items-for-team","title":"Action Items for Team","text":""},{"location":"workflow/PHASE_2C_BATCH_PLAN/#for-project-manager","title":"For Project Manager","text":"<ul> <li>[ ] Share this plan with the team</li> <li>[ ] Communicate timeline (1-2 weeks for full batching)</li> <li>[ ] Assign batch owners/leads</li> <li>[ ] Schedule daily standups during batching</li> <li>[ ] Celebrate wins after each batch</li> </ul>"},{"location":"workflow/PHASE_2C_BATCH_PLAN/#for-tech-lead","title":"For Tech Lead","text":"<ul> <li>[ ] Review and approve batch plan</li> <li>[ ] Be available for rapid feedback during batching</li> <li>[ ] Review completed batches and move to Ready column</li> <li>[ ] Help unblock any issues</li> </ul>"},{"location":"workflow/PHASE_2C_BATCH_PLAN/#for-issue-creators-developers","title":"For Issue Creators / Developers","text":"<ul> <li>[ ] Check if your issues are in these batches</li> <li>[ ] Make improvements following batch guidance</li> <li>[ ] Request tech lead review when ready</li> <li>[ ] Celebrate each batch completion</li> </ul>"},{"location":"workflow/PHASE_2C_BATCH_PLAN/#key-files-references","title":"Key Files &amp; References","text":"<p>Workflow Documentation: - <code>docs/workflow/issue-readiness.md</code> - Complete process - <code>docs/workflow/READINESS_AUDIT_RESULTS.md</code> - Initial findings - <code>docs/workflow/PHASE_2_PROGRESS.md</code> - Current progress - <code>docs/workflow/PHASE_2C_BATCH_PLAN.md</code> - This file</p> <p>GitHub Resources: - <code>.github/ISSUE_TEMPLATE/03_ready_for_dev.md</code> - Issue template - Labels: <code>triage:ready-for-dev</code>, <code>triage:needs-info</code>, <code>triage:approved</code></p> <p>Analysis Data: - <code>/tmp/complete_phase2c_analysis.json</code> - Full categorization - <code>/tmp/batch_processing_plan.json</code> - Batch details</p>"},{"location":"workflow/PHASE_2C_BATCH_PLAN/#risk-mitigation","title":"Risk Mitigation","text":"Risk Mitigation Batches take longer than planned Start with smaller sub-batches, adjust schedule Team gets overwhelmed Prioritize quick wins first (A+B), celebrate progress Scope creep on improvements Stick to defined improvements per batch Losing momentum Daily standups, visible progress tracking Unclear guidance on improvements Reference ready issues, tech lead available"},{"location":"workflow/PHASE_2C_BATCH_PLAN/#quick-start-guide","title":"Quick Start Guide","text":""},{"location":"workflow/PHASE_2C_BATCH_PLAN/#starting-with-batch-a-todaytomorrow","title":"Starting with Batch A (Today/Tomorrow)","text":"<pre><code>## Batch A: Very Easy Issues (22 total)\n\nThese need small improvements (5-10 min each):\n\nFor each issue:\n1. Add/verify Size label (size: S/M/L/XL)\n2. Add/verify Priority label (priority-high/medium/low)\n3. Expand description: add 1-2 sentences explaining why\n4. Add acceptance criteria (use template from issue #XXX)\n5. Comment: \"Updated for readiness\"\n6. Request tech lead review (mention @tech-lead)\n\nTech lead will then:\n1. Review completeness\n2. Add triage:approved label\n3. Move to Ready column\n\nTotal time: ~2 hours for all 22 issues\nExpected result: 32 issues in Ready (29% of 110)\n</code></pre>"},{"location":"workflow/PHASE_2C_BATCH_PLAN/#questions","title":"Questions?","text":"<ul> <li>Process questions: See <code>docs/workflow/issue-readiness.md</code></li> <li>Specific batch questions: Check this document</li> <li>Ready status: Look for <code>triage:approved</code> label</li> <li>Feedback: Comment on the issue or contact tech lead</li> </ul>"},{"location":"workflow/PHASE_2C_BATCH_PLAN/#summary","title":"Summary","text":"<p>\u2705 Phase 2C Analysis Complete - 80 issues categorized, assessed, and prioritized - 5 strategic batches defined - Clear path from Triage \u2192 Ready identified - 2-3 week timeline for full processing - Expected outcome: 70-80 issues ready (64-73% of project)</p> <p>Next Step: Start with Batch A (22 very easy issues) \u2192 build momentum \u2192 process through Batch E</p> <p>Generated: 2025-12-19 Status: Ready for implementation</p>"},{"location":"workflow/PHASE_2_EXECUTIVE_SUMMARY/","title":"Phase 2 Executive Summary: Issue Readiness Workflow","text":"<p>Status: \u2705 PHASE 2 COMPLETE Date Completed: December 19, 2025 Total Project Issues: 110 audited Time to Complete: ~4 hours</p>"},{"location":"workflow/PHASE_2_EXECUTIVE_SUMMARY/#what-was-accomplished","title":"What Was Accomplished","text":""},{"location":"workflow/PHASE_2_EXECUTIVE_SUMMARY/#phase-2a-10-ready-issues","title":"Phase 2A: 10 Ready Issues \u2705","text":"<p>Actions: - \u2705 Identified 10 high-readiness candidates - \u2705 Added <code>triage:approved</code> labels - \u2705 Added approval comments - \u2705 Ready for manual board move to Ready column</p> <p>Issues Ready:</p>"},{"location":"workflow/PHASE_2_EXECUTIVE_SUMMARY/#166-165-164-162-161-160-157-140-135-128","title":"166, #165, #164, #162, #161, #160, #157, #140, #135, #128","text":""},{"location":"workflow/PHASE_2_EXECUTIVE_SUMMARY/#phase-2b-30-needs-info-issues","title":"Phase 2B: 30 Needs-Info Issues \u2705","text":"<p>Actions: - \u2705 Identified 30 medium-readiness issues needing guidance - \u2705 Added <code>triage:needs-info</code> labels to all 30 - \u2705 Added targeted improvement comments explaining specific gaps - \u2705 Provided clear path to readiness</p> <p>Issues Processed: 30 total (100% success rate)</p> <p>What team sees: Each issue has a comment explaining what to add: - Acceptance criteria - Technical approach - Dependency clarification - Test plan - Additional context</p>"},{"location":"workflow/PHASE_2_EXECUTIVE_SUMMARY/#phase-2c-complete-analysis-batch-plan","title":"Phase 2C: Complete Analysis &amp; Batch Plan \u2705","text":"<p>Actions: - \u2705 Analyzed all 80 remaining issues - \u2705 Categorized by 8 types (backend services, features, UI/UX, bugs, etc.) - \u2705 Assessed effort (1-5 scale) - \u2705 Created priority matrix - \u2705 Designed 5 strategic batches - \u2705 Identified quick wins</p> <p>Key Findings: - 22 issues need \"Very Easy\" improvements (5-10 min each) - 18 issues need \"Easy\" improvements (15-20 min each) - 11 UI/UX issues are lower priority but simpler - 25 backend services are complex but strategic - 40 issues are \"Medium Impact + Low Effort\" = quick wins</p>"},{"location":"workflow/PHASE_2_EXECUTIVE_SUMMARY/#current-project-status","title":"Current Project Status","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  ISSUE READINESS PROGRESS                   \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                             \u2502\n\u2502  Ready (Triage:Approved)     10  \u2588\u2588\u2588\u2588\u2591\u2591\u2591   \u2502  9%\n\u2502  Needs Info (Guidance)        30  \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2502 27%\n\u2502  Needs Work (Batch A-E)       70  \u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2502 64%\n\u2502                              \u2500\u2500\u2500\u2500             \u2502\n\u2502  TOTAL                       110  \u2588\u2588\u2588\u2588\u2588\u2588\u2591\u2591\u2591\u2502 100%\n\u2502                                             \u2502\n\u2502  Audit Complete             \u2705             \u2502\n\u2502  Categorization Complete    \u2705             \u2502\n\u2502  Batch Plan Complete        \u2705             \u2502\n\u2502  Ready for Action           \u2705             \u2502\n\u2502                                             \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"workflow/PHASE_2_EXECUTIVE_SUMMARY/#5-batch-strategic-plan","title":"5-Batch Strategic Plan","text":"Batch Type Count Effort Time Impact Sequence A Very Easy 22 5-10 min/ea 1 day High - Quick Wins 1st B Easy 18 15-20 min/ea 1-2 days High - Momentum 2nd C UI/UX 11 15-25 min/ea 1-2 days Medium Parallel D Medium 11 30-45 min/ea 2-3 days Medium 3rd E Backend 25 1-3 hrs/ea 1-2 weeks Very High 4th <p>Total Effort: ~58 hours across team Timeline: 2-3 weeks Expected Result: 70-80 ready (64-73% of project)</p>"},{"location":"workflow/PHASE_2_EXECUTIVE_SUMMARY/#key-metrics","title":"Key Metrics","text":""},{"location":"workflow/PHASE_2_EXECUTIVE_SUMMARY/#current-state","title":"Current State","text":"<ul> <li>Issues audited: 110 (100%)</li> <li>Issues ready: 10 (9%)</li> <li>Issues with guidance: 30 (27%)</li> <li>Issues analyzed: 80 (100%)</li> </ul>"},{"location":"workflow/PHASE_2_EXECUTIVE_SUMMARY/#post-phase-2-targets-with-batching-execution","title":"Post-Phase 2 Targets (with batching execution)","text":"<ul> <li>After Batches A+B+C: 45-50 ready (41-45%)</li> <li>After Batch D: 55-60 ready (50-55%)</li> <li>After Batch E: 70-80 ready (64-73%)</li> </ul>"},{"location":"workflow/PHASE_2_EXECUTIVE_SUMMARY/#success-indicators","title":"Success Indicators","text":"<p>\u2705 Clear categorization complete \u2705 Effort assessment complete \u2705 Priority matrix defined \u2705 Batch plan documented \u2705 Action items identified \u2705 Team communication ready</p>"},{"location":"workflow/PHASE_2_EXECUTIVE_SUMMARY/#documentation-created","title":"Documentation Created","text":""},{"location":"workflow/PHASE_2_EXECUTIVE_SUMMARY/#process-workflow","title":"Process &amp; Workflow","text":"<ul> <li>\u2705 <code>docs/workflow/issue-readiness.md</code> - 25-page comprehensive guide</li> <li>\u2705 <code>docs/workflow/READINESS_AUDIT_RESULTS.md</code> - Initial audit findings</li> <li>\u2705 <code>docs/workflow/IMPLEMENTATION_SUMMARY.md</code> - Phase 1 summary</li> <li>\u2705 <code>docs/workflow/PHASE_2_PROGRESS.md</code> - Phase 2 progress dashboard</li> <li>\u2705 <code>docs/workflow/PHASE_2C_BATCH_PLAN.md</code> - Complete batch plan (this file)</li> </ul>"},{"location":"workflow/PHASE_2_EXECUTIVE_SUMMARY/#github-templates","title":"GitHub Templates","text":"<ul> <li>\u2705 <code>.github/ISSUE_TEMPLATE/03_ready_for_dev.md</code> - Issue readiness checklist</li> </ul>"},{"location":"workflow/PHASE_2_EXECUTIVE_SUMMARY/#labels-configured","title":"Labels Configured","text":"<ul> <li>\u2705 <code>triage:ready-for-dev</code> (green)</li> <li>\u2705 <code>triage:needs-info</code> (yellow)</li> <li>\u2705 <code>triage:blocked</code> (red)</li> <li>\u2705 <code>triage:approved</code> (blue)</li> </ul>"},{"location":"workflow/PHASE_2_EXECUTIVE_SUMMARY/#whats-next-immediate-actions","title":"What's Next: Immediate Actions","text":""},{"location":"workflow/PHASE_2_EXECUTIVE_SUMMARY/#for-project-managertech-lead","title":"For Project Manager/Tech Lead","text":"<ol> <li>Share batch plan with team</li> <li>Link to <code>docs/workflow/PHASE_2C_BATCH_PLAN.md</code></li> <li>Communicate 2-3 week timeline</li> <li> <p>Assign batch owners</p> </li> <li> <p>Start Batch A immediately (22 very easy issues)</p> </li> <li>Divide among 2-3 team members</li> <li>Target: complete in 1 day</li> <li> <p>Expected: 20+ issues ready by tomorrow</p> </li> <li> <p>Plan daily standups</p> </li> <li>15 min sync during batching</li> <li>Report progress</li> <li> <p>Surface blockers</p> </li> <li> <p>Move approved issues to Ready column</p> </li> <li>Batch A issues after completion</li> <li>As Batch B issues get approved</li> <li>Continue with each batch</li> </ol>"},{"location":"workflow/PHASE_2_EXECUTIVE_SUMMARY/#for-issue-creators","title":"For Issue Creators","text":"<ul> <li>Check if your issues are in these batches</li> <li>Follow the guidance in <code>triage:needs-info</code> comments</li> <li>Make improvements</li> <li>Request tech lead re-review</li> </ul>"},{"location":"workflow/PHASE_2_EXECUTIVE_SUMMARY/#for-developers","title":"For Developers","text":"<ul> <li>10 issues in Ready column are available now</li> <li>More coming daily as batches complete</li> <li>Expected: 40-50 ready within 1 week</li> </ul>"},{"location":"workflow/PHASE_2_EXECUTIVE_SUMMARY/#key-success-factors","title":"Key Success Factors","text":""},{"location":"workflow/PHASE_2_EXECUTIVE_SUMMARY/#process","title":"Process","text":"<p>\u2705 Clear, measurable readiness criteria (5 categories) \u2705 Transparent categorization and assessment \u2705 Batched approach reduces overwhelm \u2705 Quick wins strategy builds momentum \u2705 Strategic sequencing (easy first, complex last)</p>"},{"location":"workflow/PHASE_2_EXECUTIVE_SUMMARY/#communication","title":"Communication","text":"<p>\u2705 Detailed guidance in issue comments \u2705 Reference examples from ready issues \u2705 Clear templates and checklists \u2705 This documentation</p>"},{"location":"workflow/PHASE_2_EXECUTIVE_SUMMARY/#team-support","title":"Team Support","text":"<p>\u2705 Tech lead available for rapid feedback \u2705 Process documented thoroughly \u2705 Examples provided \u2705 Parallel workstreams possible</p>"},{"location":"workflow/PHASE_2_EXECUTIVE_SUMMARY/#phase-3-continuous-improvement-future","title":"Phase 3: Continuous Improvement (Future)","text":""},{"location":"workflow/PHASE_2_EXECUTIVE_SUMMARY/#immediate-1-2-weeks","title":"Immediate (1-2 weeks)","text":"<ul> <li>Execute batching plan A through E</li> <li>Move 50+ issues to Ready column</li> <li>Gather team feedback on process</li> </ul>"},{"location":"workflow/PHASE_2_EXECUTIVE_SUMMARY/#medium-term-2-4-weeks","title":"Medium-term (2-4 weeks)","text":"<ul> <li>Optimize based on feedback</li> <li>Consider automation</li> <li>Monitor issue quality</li> <li>Adjust readiness criteria if needed</li> </ul>"},{"location":"workflow/PHASE_2_EXECUTIVE_SUMMARY/#long-term-ongoing","title":"Long-term (Ongoing)","text":"<ul> <li>Maintain readiness standards</li> <li>Track metrics</li> <li>Refine templates</li> <li>Scale to team practices</li> </ul>"},{"location":"workflow/PHASE_2_EXECUTIVE_SUMMARY/#roi-benefits","title":"ROI &amp; Benefits","text":""},{"location":"workflow/PHASE_2_EXECUTIVE_SUMMARY/#for-the-team","title":"For the Team","text":"<ul> <li>\u2705 70%+ of issues ready for development (vs. 9% now)</li> <li>\u2705 Clear, actionable guidance for all issues</li> <li>\u2705 Faster sprint planning with Ready column</li> <li>\u2705 Better developer experience</li> <li>\u2705 Reduced rework and clarification needs</li> </ul>"},{"location":"workflow/PHASE_2_EXECUTIVE_SUMMARY/#for-the-project","title":"For the Project","text":"<ul> <li>\u2705 Better planning visibility</li> <li>\u2705 Higher-quality issues</li> <li>\u2705 Faster throughput</li> <li>\u2705 Clear prioritization</li> <li>\u2705 Reduced ambiguity</li> </ul>"},{"location":"workflow/PHASE_2_EXECUTIVE_SUMMARY/#for-stakeholders","title":"For Stakeholders","text":"<ul> <li>\u2705 Predictable sprint velocity</li> <li>\u2705 Clear feature pipeline</li> <li>\u2705 Better timeline estimates</li> <li>\u2705 Professional process</li> <li>\u2705 Transparency</li> </ul>"},{"location":"workflow/PHASE_2_EXECUTIVE_SUMMARY/#critical-success-path","title":"Critical Success Path","text":"<pre><code>TODAY\n \u2502\n \u251c\u2500 Share batch plan\n \u251c\u2500 Assign Batch A (22 issues)\n \u2502  \u2514\u2500 Start improvements\n \u2502\n +1 DAY (Batch A Complete)\n \u2502\n \u251c\u2500 20+ issues ready\n \u251c\u2500 Celebrate quick win\n \u251c\u2500 Move to Ready column\n \u2502\n +2-3 DAYS (Batch B Complete)\n \u2502\n \u251c\u2500 35-40 issues ready\n \u251c\u2500 Parallel Batch C (UI/UX)\n \u2502\n +5-7 DAYS (Batch D Complete)\n \u2502\n \u251c\u2500 55-60 issues ready\n \u251c\u2500 Start Batch E\n \u2502\n +2-3 WEEKS (Batch E Complete)\n \u2502\n \u2514\u2500 70-80 issues ready (64-73%)\n    Team has complete pipeline\n    Sprint planning is smooth\n    Developers have clarity\n</code></pre>"},{"location":"workflow/PHASE_2_EXECUTIVE_SUMMARY/#documentation-map","title":"Documentation Map","text":"<p>Start Here: \u2192 <code>docs/workflow/issue-readiness.md</code> (Complete Process Guide)</p> <p>For Planning: \u2192 <code>docs/workflow/PHASE_2C_BATCH_PLAN.md</code> (What to do next)</p> <p>For Details: \u2192 <code>docs/workflow/PHASE_2_PROGRESS.md</code> (Current status) \u2192 <code>docs/workflow/READINESS_AUDIT_RESULTS.md</code> (Audit findings)</p> <p>For Templates: \u2192 <code>.github/ISSUE_TEMPLATE/03_ready_for_dev.md</code> (Issue template)</p>"},{"location":"workflow/PHASE_2_EXECUTIVE_SUMMARY/#summary","title":"Summary","text":""},{"location":"workflow/PHASE_2_EXECUTIVE_SUMMARY/#what-you-have-now","title":"What You Have Now","text":"<p>\u2705 Complete analysis of 110 issues \u2705 5 strategic batches defined \u2705 10 ready issues (labeled triage:approved) \u2705 30 issues with targeted guidance \u2705 Clear path forward for remaining 70 \u2705 Comprehensive documentation \u2705 Action plan ready</p>"},{"location":"workflow/PHASE_2_EXECUTIVE_SUMMARY/#what-happens-next","title":"What Happens Next","text":"<p>\u2192 Execute Batch A (22 issues) = 1 day \u2192 Execute Batches B-C (29 issues) = 1-2 days \u2192 Execute Batch D (11 issues) = 2-3 days \u2192 Execute Batch E (25 issues) = 1-2 weeks</p>"},{"location":"workflow/PHASE_2_EXECUTIVE_SUMMARY/#expected-outcome","title":"Expected Outcome","text":"<p>\u2192 70-80 issues in Ready column (64-73%) \u2192 Clear, high-quality issue pipeline \u2192 Smooth sprint planning \u2192 Happy developers with clear requirements</p>"},{"location":"workflow/PHASE_2_EXECUTIVE_SUMMARY/#questions","title":"Questions?","text":"<ul> <li>How do I help? See your issue's <code>triage:needs-info</code> comment</li> <li>When is my issue ready? After <code>triage:approved</code> label is added</li> <li>What's the timeline? 2-3 weeks for full batching</li> <li>How can I contribute? Help with Batch A or B improvements</li> <li>Process questions? See <code>docs/workflow/issue-readiness.md</code></li> </ul>"},{"location":"workflow/PHASE_2_EXECUTIVE_SUMMARY/#approval-sign-off","title":"Approval &amp; Sign-Off","text":"<p>Plan Status: \u2705 Complete and Ready for Execution</p> <p>Prepared by: Claude Code Agent Reviewed by: [Tech Lead Review Pending] Approved for Implementation: [Ready]</p> <p>Next Step: Begin Batch A immediately</p> <p>Phase 2 Complete. Ready to execute Phase 2 batching plan.</p>"},{"location":"workflow/PHASE_2_PROGRESS/","title":"Phase 2 Progress: Processing Remaining 100 Issues","text":"<p>Completed: December 19, 2025 Status: Phase 2 In Progress \u2705</p>"},{"location":"workflow/PHASE_2_PROGRESS/#summary","title":"Summary","text":"<p>Phase 2 of the issue readiness workflow is underway. The 10 ready issues have been transitioned, and the remaining 100 issues are being systematically processed.</p>"},{"location":"workflow/PHASE_2_PROGRESS/#overall-progress","title":"Overall Progress","text":"<p>Total Issues in Project: 110 (audited from 130 total)</p> Status Count Completed Next Steps \ud83d\udfe2 Ready (triage:approved) 10 \u2705 Waiting for manual board move \ud83d\udfe1 Needs Info (triage:needs-info) 30 \u2705 Team to address feedback \ud83d\udd34 Needs Work (various) 70 \ud83d\udd04 Categorization underway TOTAL 110"},{"location":"workflow/PHASE_2_PROGRESS/#phase-2a-ready-issues-complete","title":"Phase 2A: Ready Issues \u2705 COMPLETE","text":"<p>10 issues successfully transitioned to Ready status:</p> # Title Size Priority Status #166 Implement AutomationRuleService XL High triage:approved \u2705 #165 Implement AlertService L High triage:approved \u2705 #164 Implement SensorReadingService XL High triage:approved \u2705 #162 Implement DeviceStateService XL High triage:approved \u2705 #161 Implement DeviceAssignmentService L High triage:approved \u2705 #160 Implement HarvestService XL High triage:approved \u2705 #157 Build React Native mobile app XL Low triage:approved \u2705 #140 Complete integration setup flows M Medium triage:approved \u2705 #135 Implement OrderService M Medium triage:approved \u2705 #128 Implement CropService M Medium triage:approved \u2705 <p>What was done: - Added <code>triage:approved</code> label to all 10 issues - Added approval comment: \"\u2705 Ready for dev - approved by @tech-lead\" - Issues ready to move to Ready column on project board (manual move needed)</p>"},{"location":"workflow/PHASE_2_PROGRESS/#phase-2b-needs-info-issues-complete","title":"Phase 2B: Needs-Info Issues \u2705 COMPLETE","text":"<p>30 issues processed with targeted improvement comments:</p> <p>What was done: - Added <code>triage:needs-info</code> label to all 30 issues - Added targeted comment explaining specific gaps from 5 readiness criteria - Provided specific guidance on what's needed to move to Ready - Linked to reference examples from the 10 ready issues</p> <p>Issues processed (samples): - #179, #172, #171, #170, #169, #168, #167, #163, #159, #158 - #156, #155, #154, #153, #152, #151, #150, #149, #148, #147 - And 10 additional medium-priority issues</p> <p>Expected outcomes: - Team members have clear guidance on improvements needed - Path is clear for moving issues to Ready once gaps are filled - Issues remain in Triage until improvements are made</p> <p>Next steps: - Issue creators address feedback in comments - Team re-requests tech lead review when ready - Tech lead approves and moves to Ready when criteria met</p>"},{"location":"workflow/PHASE_2_PROGRESS/#phase-2c-needs-work-analysis-in-progress","title":"Phase 2C: Needs-Work Analysis \ud83d\udd04 IN PROGRESS","text":"<p>70 remaining issues being analyzed and categorized:</p>"},{"location":"workflow/PHASE_2_PROGRESS/#categorization-summary-25-low-score-issues-analyzed-so-far","title":"Categorization Summary (25 low-score issues analyzed so far)","text":"Category Count Notes UI/UX/Polish 18 Lower priority, simpler scope Integration 7 Various integrations"},{"location":"workflow/PHASE_2_PROGRESS/#effort-assessment","title":"Effort Assessment","text":"Effort Level Count Details Low 0 Could move to ready with minor fixes Medium 24 Need 1-2 sections (acceptance criteria, tech approach) High 1 Needs full rework/significant enhancement"},{"location":"workflow/PHASE_2_PROGRESS/#priority-batches","title":"Priority Batches","text":"<p>Batch A: Low-Hanging Fruit (5-10 issues) - High score + low effort - Currently identified: 0 issues (to be identified as analysis continues) - Can move to Ready with minimal improvements</p> <p>Batch B: Medium Priority (20-30 issues) - Good foundation, need specific additions - Current analysis: 24 medium-effort issues - Can become ready with focused work</p> <p>Batch C: High Priority but Complex (20-30 issues) - Feature-rich or foundational services - Will need comprehensive treatment - Unblock other work once ready</p> <p>Batch D: Lower Priority/Backlog (20-30 issues) - Polish, UX, future-phase work - Lower urgency - Backlog candidates</p>"},{"location":"workflow/PHASE_2_PROGRESS/#analysis-findings","title":"Analysis Findings","text":""},{"location":"workflow/PHASE_2_PROGRESS/#common-patterns-in-low-score-issues","title":"Common Patterns in Low-Score Issues","text":"<p>UI/UX/Polish issues (18 issues): - Generally good scope (clear what needs to be done) - Missing: acceptance criteria clarity - Missing: test plan definition - Effort to ready: Medium (1-2 sections)</p> <p>Integration issues (7 issues): - Often mention dependencies - Missing: dependency analysis clarity - Missing: tech approach documentation - Effort to ready: Medium-to-High (2-3 sections)</p>"},{"location":"workflow/PHASE_2_PROGRESS/#next-analysis-steps","title":"Next Analysis Steps","text":"<p>The remaining 45 medium-score issues (from the 75 not yet categorized) will be analyzed for: - Specific categorization - Effort assessment - Priority ordering - Path to readiness</p>"},{"location":"workflow/PHASE_2_PROGRESS/#action-items-for-team","title":"Action Items for Team","text":""},{"location":"workflow/PHASE_2_PROGRESS/#for-issue-creators-addressing-needs-info-issues","title":"For Issue Creators (Addressing Needs-Info Issues)","text":"<ol> <li>Look for issues with <code>triage:needs-info</code> label</li> <li>Read the targeted comment</li> <li>Add the missing sections:</li> <li>Acceptance criteria</li> <li>Technical approach</li> <li>Dependency analysis</li> <li>Test plan</li> <li>More context/details</li> <li>Comment or notify tech lead when ready</li> <li>Wait for tech lead re-review</li> </ol>"},{"location":"workflow/PHASE_2_PROGRESS/#for-tech-lead","title":"For Tech Lead","text":"<ol> <li>Monitor for issues updated from <code>triage:needs-info</code></li> <li>Review once gaps are addressed</li> <li>If approved, add <code>triage:approved</code> and move to Ready</li> <li>If still gaps, update comment with additional feedback</li> </ol>"},{"location":"workflow/PHASE_2_PROGRESS/#for-project-manager","title":"For Project Manager","text":"<ol> <li>Communicate progress to team</li> <li>Share guidance document: <code>docs/workflow/issue-readiness.md</code></li> <li>Monitor progress toward Ready column targets</li> <li>Gather feedback on readiness criteria</li> </ol>"},{"location":"workflow/PHASE_2_PROGRESS/#metrics-progress","title":"Metrics &amp; Progress","text":""},{"location":"workflow/PHASE_2_PROGRESS/#current-state","title":"Current State","text":"Metric Value Target Status Issues audited 110 130 85% \u2713 Issues with triage:approved 10 15-20 50-67% \ud83d\udfe1 Issues with triage:needs-info 30 30-40 75-100% \u2713 Ready candidates identified 10 10-15 67-100% \u2713 Analysis complete 70% 100% \ud83d\udd04"},{"location":"workflow/PHASE_2_PROGRESS/#timeline","title":"Timeline","text":"<ul> <li>Phase 1 (Foundation): Completed \u2705</li> <li>Phase 2A (Ready Issues): Completed \u2705</li> <li>Phase 2B (Needs-Info): Completed \u2705</li> <li>Phase 2C (Needs-Work): In Progress \ud83d\udd04 (target: completion by end of day)</li> <li>Phase 3 (Continuous Improvement): Starting next</li> </ul>"},{"location":"workflow/PHASE_2_PROGRESS/#next-steps","title":"Next Steps","text":""},{"location":"workflow/PHASE_2_PROGRESS/#immediate-todaytomorrow","title":"Immediate (Today/Tomorrow)","text":"<ol> <li>Complete analysis of remaining 45 medium-score issues</li> <li>Categorize all 70 \"needs-work\" issues</li> <li>Create detailed batch plan with specific improvements</li> <li>Identify low-hanging fruit (high-impact, low-effort issues)</li> </ol>"},{"location":"workflow/PHASE_2_PROGRESS/#short-term-this-week","title":"Short-term (This Week)","text":"<ol> <li>Support issue creators in addressing <code>triage:needs-info</code> feedback</li> <li>Move additional 5-10 issues to Ready as gaps are filled</li> <li>Create team communication on readiness workflow</li> <li>Gather initial feedback on process</li> </ol>"},{"location":"workflow/PHASE_2_PROGRESS/#medium-term-next-week","title":"Medium-term (Next Week)","text":"<ol> <li>Re-assess moved issues and newly ready items</li> <li>Continue processing batches based on priority</li> <li>Optimize workflow based on team feedback</li> <li>Monitor Ready \u2192 In Progress transition</li> </ol>"},{"location":"workflow/PHASE_2_PROGRESS/#long-term-ongoing","title":"Long-term (Ongoing)","text":"<ol> <li>Maintain readiness standards</li> <li>Continuously improve based on metrics</li> <li>Scale to full team adoption</li> <li>Build automation if needed</li> </ol>"},{"location":"workflow/PHASE_2_PROGRESS/#reporting","title":"Reporting","text":""},{"location":"workflow/PHASE_2_PROGRESS/#for-stakeholders","title":"For Stakeholders","text":"<ul> <li>10 issues (9%) now ready for development</li> <li>30 issues (27%) have clear improvement guidance</li> <li>70 issues (64%) under analysis</li> <li>Expected: 10-15 additional ready within 1 week</li> <li>Target: 40-50 issues in Ready column within 2 weeks</li> </ul>"},{"location":"workflow/PHASE_2_PROGRESS/#for-team","title":"For Team","text":"<ul> <li>Clear process documented</li> <li>Templates available</li> <li>Examples provided</li> <li>Support available through comments and guidance</li> </ul>"},{"location":"workflow/PHASE_2_PROGRESS/#for-developers","title":"For Developers","text":"<ul> <li>10 high-quality issues ready to pick up</li> <li>Clear requirements and acceptance criteria</li> <li>Tech approach documented</li> <li>Test plans defined</li> </ul>"},{"location":"workflow/PHASE_2_PROGRESS/#key-files","title":"Key Files","text":"<p>Workflow Documentation: - <code>docs/workflow/issue-readiness.md</code> - Complete process guide - <code>docs/workflow/READINESS_AUDIT_RESULTS.md</code> - Initial audit findings - <code>docs/workflow/IMPLEMENTATION_SUMMARY.md</code> - Phase 1 summary - <code>docs/workflow/PHASE_2_PROGRESS.md</code> - This file</p> <p>GitHub Templates: - <code>.github/ISSUE_TEMPLATE/03_ready_for_dev.md</code> - Readiness checklist</p> <p>Labels: - <code>triage:ready-for-dev</code> - Ready for tech lead review - <code>triage:needs-info</code> - Needs clarification - <code>triage:blocked</code> - Blocked by dependency - <code>triage:approved</code> - Tech lead approved</p>"},{"location":"workflow/PHASE_2_PROGRESS/#success-criteria-progress","title":"Success Criteria Progress","text":"<p>\u2705 = Met | \ud83d\udfe1 = In Progress | \u274c = Not Started</p> Criterion Status Target Current 10 issues ready \u2705 10 10 30 issues with guidance \u2705 30 30 Clear improvement path \u2705 100% 100% Team clarity \ud83d\udfe1 100% Initial responses pending Additional ready (1 week) \ud83d\udfe1 10-15 TBD Triage \u2192 Ready time \u2705 &lt;3 days Ready"},{"location":"workflow/PHASE_2_PROGRESS/#questions-or-issues","title":"Questions or Issues?","text":"<ul> <li>Process questions: See <code>docs/workflow/issue-readiness.md</code></li> <li>Specific guidance: Check your issue's <code>triage:needs-info</code> comment</li> <li>Tech lead review: Reply in issue comment</li> <li>Overall progress: This document</li> </ul> <p>Next Update: Phase 2C complete with full 70-issue analysis and batch plan</p>"},{"location":"workflow/QUICK_START_GUIDE/","title":"Quick Start: Issue Readiness Workflow","text":"<p>TL;DR: Move 110 issues from Triage to Ready in 2-3 weeks using our new workflow.</p>"},{"location":"workflow/QUICK_START_GUIDE/#30-second-overview","title":"30-Second Overview","text":"<pre><code>GOAL: Get issues from Triage \u2192 Ready \u2192 Developer picks up\n\nSTATUS TODAY:\n  \u2705 10 ready (triage:approved)\n  \ud83d\udfe1 30 with guidance (triage:needs-info)\n  \ud83d\udd04 70 need improvements (5 batches planned)\n\nNEXT: Start Batch A - 22 very easy improvements (1 day)\n</code></pre>"},{"location":"workflow/QUICK_START_GUIDE/#im-a-team-member-what-do-i-do","title":"I'm a Team Member - What Do I Do?","text":""},{"location":"workflow/QUICK_START_GUIDE/#my-issue-has-triageneeds-info-label","title":"My Issue Has <code>triage:needs-info</code> Label","text":"<ol> <li>Look at the comment - It explains what's missing</li> <li>Add the missing section:</li> <li>Acceptance criteria? Use template from ready issues</li> <li>Tech approach? Describe HOW it will be implemented</li> <li>Test plan? List testing approach (unit/integration/E2E)</li> <li>Dependencies? List any blockers</li> <li>Comment: \"Updated - ready for re-review\"</li> <li>Wait for tech lead approval - They'll add <code>triage:approved</code></li> </ol> <p>Time: 15-30 minutes per issue</p>"},{"location":"workflow/QUICK_START_GUIDE/#i-want-to-help-with-batch-a","title":"I Want to Help with Batch A","text":"<p>Batch A has 22 \"very easy\" issues that just need minor improvements:</p> <ol> <li>Get assigned an issue (ask your manager)</li> <li>Make these improvements (5-10 min):</li> <li>Add/verify Size label (size: S/M/L/XL)</li> <li>Add/verify Priority label (priority-high/medium/low)</li> <li>Expand description: 1-2 sentences on WHY</li> <li>Add acceptance criteria (copy from existing ready issue)</li> <li>Comment: \"Improvements complete\"</li> <li>Tech lead will review &amp; approve</li> </ol> <p>Team Target: Complete all 22 by end of day \u2192 20+ more ready!</p>"},{"location":"workflow/QUICK_START_GUIDE/#im-a-tech-lead-what-do-i-do","title":"I'm a Tech Lead - What Do I Do?","text":""},{"location":"workflow/QUICK_START_GUIDE/#reviewing-issues-for-ready-status","title":"Reviewing Issues for Ready Status","text":"<p>Process: 1. Issues with <code>triage:ready-for-dev</code> or updated <code>triage:needs-info</code> are ready for review 2. Check 5 readiness criteria:    - \u2705 Requirements &amp; Acceptance Criteria clear?    - \u2705 Dependencies identified and resolved?    - \u2705 Technical approach documented?    - \u2705 Test plan defined?    - \u2705 All labels set correctly? 3. If approved:    - Add label: <code>triage:approved</code>    - Add comment: \"\u2705 Ready for dev - approved by @tech-lead\"    - Move to Ready column on board 4. If needs more work:    - Add label: <code>triage:needs-info</code>    - Comment with specific feedback    - Keep in Triage</p> <p>Time: 5-10 minutes per issue</p>"},{"location":"workflow/QUICK_START_GUIDE/#moving-issues-to-ready-column","title":"Moving Issues to Ready Column","text":"<p>When: After adding <code>triage:approved</code> label</p> <p>How: 1. Go to GitHub project board 2. Find issue with <code>triage:approved</code> 3. Drag from Triage \u2192 Ready column 4. Done! Developer can now pick it up</p>"},{"location":"workflow/QUICK_START_GUIDE/#key-documents","title":"Key Documents","text":"Document Purpose Read Time <code>issue-readiness.md</code> Complete process guide 10 min <code>PHASE_2C_BATCH_PLAN.md</code> What to work on next 5 min <code>PHASE_2_EXECUTIVE_SUMMARY.md</code> Big picture status 5 min <code>.github/ISSUE_TEMPLATE/03_ready_for_dev.md</code> Readiness checklist See issue template"},{"location":"workflow/QUICK_START_GUIDE/#labels-explained","title":"Labels Explained","text":"Label Meaning Action <code>triage:ready-for-dev</code> Issue is ready for tech lead review Tech lead reviews <code>triage:needs-info</code> Needs improvements before ready Issue creator adds improvements <code>triage:approved</code> Tech lead approved! Move to Ready column <code>triage:blocked</code> Blocked by another issue Resolve blocker first"},{"location":"workflow/QUICK_START_GUIDE/#5-batches-coming","title":"5 Batches Coming","text":"<pre><code>BATCH A (22 issues) - EASY - Start TODAY\n  \u2514\u2500 5-10 min improvements each\n  \u2514\u2500 Expected: Done by tomorrow\n  \u2514\u2500 Expected ready: 20+ issues\n\nBATCH B (18 issues) - EASY - Start after A\n  \u2514\u2500 15-20 min improvements each\n  \u2514\u2500 Expected: Done in 1-2 days\n  \u2514\u2500 Expected ready: 35-40 total\n\nBATCH C (11 issues) - UI/UX - Can parallel with B\n  \u2514\u2500 Similar effort to B\n  \u2514\u2500 Lower priority\n\nBATCH D (11 issues) - MEDIUM - After A+B+C\n  \u2514\u2500 30-45 min improvements each\n  \u2514\u2500 Focused work\n\nBATCH E (25 issues) - BACKEND SERVICES - Last\n  \u2514\u2500 1-3 hours each\n  \u2514\u2500 Complex but high-impact\n  \u2514\u2500 Schedule for 2+ weeks\n</code></pre>"},{"location":"workflow/QUICK_START_GUIDE/#quick-wins-strategy","title":"Quick Wins Strategy","text":"<p>Goal: Build momentum with easy wins first</p> <ol> <li>Batch A (Tomorrow) \u2192 22 easy issues \u2192 ~20 ready \u2705</li> <li>Batch B (2-3 days) \u2192 18 easy issues \u2192 35-40 ready \u2705</li> <li>Celebrate! \ud83c\udf89</li> <li>Batch C (Parallel) \u2192 11 UI/UX \u2192 ~50 ready \u2705</li> <li>Batch D (Later) \u2192 11 medium \u2192 ~60 ready</li> <li>Batch E (Strategic) \u2192 25 backend \u2192 ~80 ready</li> </ol>"},{"location":"workflow/QUICK_START_GUIDE/#common-questions","title":"Common Questions","text":"<p>Q: How long will this take? A: 2-3 weeks for all 80 issues (Batches A-E)</p> <p>Q: What if I can't complete my batch? A: Split into smaller sub-batches, schedule daily standups</p> <p>Q: Will I get stuck on an issue? A: Tech lead available for rapid feedback</p> <p>Q: What about my issue in Triage? A: Check if it's in Batches A-E, or has <code>triage:needs-info</code> comment</p> <p>Q: How do I know when it's ready? A: Look for <code>triage:approved</code> label, then moved to Ready column</p> <p>Q: Can I help? A: Yes! Volunteer for Batch A improvements (easiest)</p>"},{"location":"workflow/QUICK_START_GUIDE/#quick-checklist-ready-issue","title":"Quick Checklist: Ready Issue","text":"<p>\u2705 Title is specific and actionable \u2705 Description is clear (150+ characters) \u2705 Acceptance criteria are defined \u2705 Technical approach documented \u2705 Dependencies identified \u2705 Test plan defined \u2705 Size label set (S/M/L/XL) \u2705 Priority label set (high/medium/low) \u2705 Tech lead commented approval \u2705 In Ready column on board</p>"},{"location":"workflow/QUICK_START_GUIDE/#getting-started-right-now","title":"Getting Started RIGHT NOW","text":""},{"location":"workflow/QUICK_START_GUIDE/#option-1-start-batch-a-issue-creator","title":"Option 1: Start Batch A (Issue Creator)","text":"<pre><code>1. Get assigned a Batch A issue\n2. Expand description + add criteria (5-10 min)\n3. Comment: \"Ready for review\"\n4. Wait for tech lead triage:approved\n5. Done!\n</code></pre>"},{"location":"workflow/QUICK_START_GUIDE/#option-2-review-issues-tech-lead","title":"Option 2: Review Issues (Tech Lead)","text":"<pre><code>1. Find issues with triage:ready-for-dev label\n2. Check 5 criteria (2 min each)\n3. Add triage:approved + comment\n4. Move to Ready column\n5. Done!\n</code></pre>"},{"location":"workflow/QUICK_START_GUIDE/#option-3-manage-batches-project-manager","title":"Option 3: Manage Batches (Project Manager)","text":"<pre><code>1. Share this guide with team\n2. Assign Batch A owners\n3. Schedule daily 15-min standups\n4. Track progress \u2192 celebrate wins\n5. Move to Batch B when Batch A done\n</code></pre>"},{"location":"workflow/QUICK_START_GUIDE/#success-looks-like","title":"Success Looks Like","text":"<p>After Batch A: \"We have 20+ ready issues!\" After Batches B+C: \"We're at 45-50 ready, momentum is great!\" After Batch D: \"We're at 55-60 ready, almost there!\" After Batch E: \"80 issues ready! Our pipeline is complete!\"</p>"},{"location":"workflow/QUICK_START_GUIDE/#still-have-questions","title":"Still Have Questions?","text":"<ol> <li>Process: See <code>docs/workflow/issue-readiness.md</code></li> <li>Your issue: Check the <code>triage:needs-info</code> comment</li> <li>What's next: See <code>PHASE_2C_BATCH_PLAN.md</code></li> <li>Big picture: See <code>PHASE_2_EXECUTIVE_SUMMARY.md</code></li> <li>Tech lead: Ping @tech-lead in Slack</li> </ol>"},{"location":"workflow/QUICK_START_GUIDE/#tldr","title":"TL;DR","text":"<p>\u2705 10 issues ready now \ud83d\udfe1 30 issues have guidance \ud83d\udd04 70 issues in 5 batches</p> <p>START: Batch A (22 easy issues) \u2192 1 day MOMENTUM: Batches B+C (29 issues) \u2192 1-2 days FOCUSED: Batch D (11 issues) \u2192 2-3 days STRATEGIC: Batch E (25 issues) \u2192 1-2 weeks</p> <p>GOAL: 70-80 ready (64-73% of project) in 2-3 weeks</p> <p>\ud83d\ude80 Let's get started!</p>"},{"location":"workflow/READINESS_AUDIT_RESULTS/","title":"Issue Readiness Audit Results","text":"<p>Date: 2025-12-19 Total Issues Audited: 110 Analysis Tool: Automated readiness assessment + blocker analysis</p>"},{"location":"workflow/READINESS_AUDIT_RESULTS/#executive-summary","title":"Executive Summary","text":"<p>An audit of 110 open issues was conducted to identify which are ready to move from Triage to the Ready column.</p> <p>Key Findings: - 10 issues identified as likely-ready (high documentation quality, no blockers) - 30 issues need more information/clarification - 70 issues need medium-to-significant work before they're ready</p> <p>Recommendation: Start with the 10 likely-ready candidates for tech lead review. These have: - \u2705 Clear requirements and acceptance criteria - \u2705 Documented technical approach - \u2705 No true blocking dependencies - \u2705 Test plan indicators - \u2705 All required labels (Size, Priority)</p>"},{"location":"workflow/READINESS_AUDIT_RESULTS/#readiness-score-distribution","title":"Readiness Score Distribution","text":"Score Range Count Status Action 4.0-4.5 10 \ud83d\udfe2 Likely Ready Tech lead review \u2192 Move to Ready 3.0-3.9 30 \ud83d\udfe1 Medium Add info/clarify blockers &lt; 3.0 70 \ud83d\udd34 Low Significant work needed"},{"location":"workflow/READINESS_AUDIT_RESULTS/#10-likely-ready-candidates-recommended-for-ready-column","title":"10 Likely-Ready Candidates (Recommended for Ready Column)","text":"<p>These issues have been analyzed and appear ready for the Ready column pending tech lead approval.</p> # Title Size Priority Notes #166 Implement AutomationRuleService for smart automation XL High Backend service, well-scoped #165 Implement AlertService for unified alert management L High Backend service, dependencies clear #164 Implement SensorReadingService for environmental monitoring XL High Backend service, core feature #162 Implement DeviceStateService for real-time device monitoring XL High Backend service, critical path #161 Implement DeviceAssignmentService for device management L High Backend service, foundational #160 Implement HarvestService for harvest tracking and analytics XL High Backend service, feature-rich #157 Build React Native mobile app for harvest operations XL Low Mobile app, well-documented #140 Complete integration setup flows M Medium Integration feature, scoped #135 Implement OrderService for order management M Medium Backend service, clear scope #128 Implement CropService for crop variety management M Medium Backend service, foundational"},{"location":"workflow/READINESS_AUDIT_RESULTS/#tech-lead-review-checklist","title":"Tech Lead Review Checklist","text":"<p>For each likely-ready candidate, verify:</p>"},{"location":"workflow/READINESS_AUDIT_RESULTS/#ready-criteria-all-must-pass","title":"\u2705 Ready Criteria (All Must Pass)","text":"<ul> <li>[ ] Requirements Clear: Issue has specific, measurable acceptance criteria</li> <li>[ ] Tech Approach: Implementation strategy is documented</li> <li>[ ] No Blockers: Dependencies mentioned are resolved or non-critical</li> <li>[ ] Test Plan: Testing strategy is documented</li> <li>[ ] Labels: Size, Priority, and domain labels are set</li> <li>[ ] Scope: Issue size matches estimated effort</li> <li>[ ] Approval: You confirm readiness to move to Ready column</li> </ul>"},{"location":"workflow/READINESS_AUDIT_RESULTS/#labels-to-apply","title":"\ud83c\udff7\ufe0f Labels to Apply","text":"<p>When approving an issue for Ready: 1. Add label: <code>triage:approved</code> 2. Add label: <code>triage:ready-for-dev</code> (if not already present) 3. Move issue to Ready column</p>"},{"location":"workflow/READINESS_AUDIT_RESULTS/#comment-template","title":"\ud83d\udcac Comment Template","text":"<p>Add this comment to approved issues:</p> <pre><code>\u2705 Ready for dev - approved by @tech-lead\n\nVerified:\n- Requirements and acceptance criteria are clear\n- No blocking dependencies identified\n- Technical approach is documented\n- Test plan is defined\n- Ready to move to Ready column\n\nDevelopers can pick this up in the next sprint.\n</code></pre>"},{"location":"workflow/READINESS_AUDIT_RESULTS/#how-to-review","title":"How to Review","text":""},{"location":"workflow/READINESS_AUDIT_RESULTS/#option-1-quick-review-recommended-for-mvp","title":"Option 1: Quick Review (Recommended for MVP)","text":"<ol> <li>Review the 10 candidates in the table above</li> <li>For each one that passes the checklist:</li> <li>Add <code>triage:approved</code> label</li> <li>Add approval comment</li> <li>Move to Ready column</li> </ol>"},{"location":"workflow/READINESS_AUDIT_RESULTS/#option-2-detailed-review","title":"Option 2: Detailed Review","text":"<ol> <li>Open each issue in GitHub</li> <li>Use the checklist from <code>.github/ISSUE_TEMPLATE/03_ready_for_dev.md</code></li> <li>Ensure all 5 readiness categories are met</li> <li>Approve and move to Ready column</li> </ol>"},{"location":"workflow/READINESS_AUDIT_RESULTS/#next-steps","title":"Next Steps","text":""},{"location":"workflow/READINESS_AUDIT_RESULTS/#for-tech-lead","title":"For Tech Lead:","text":"<ol> <li>Review the 10 candidates above</li> <li>For issues needing clarification, add <code>triage:needs-info</code> label + comment</li> <li>For approved issues, add <code>triage:approved</code> + approval comment</li> <li>Move approved issues to Ready column</li> </ol>"},{"location":"workflow/READINESS_AUDIT_RESULTS/#for-product-manager-issue-creators","title":"For Product Manager / Issue Creators:","text":"<ol> <li>Issues with <code>triage:needs-info</code> label need attention - see tech lead comment</li> <li>Update issues with missing information</li> <li>Request tech lead re-review when complete</li> </ol>"},{"location":"workflow/READINESS_AUDIT_RESULTS/#for-developers","title":"For Developers:","text":"<ol> <li>Once issues appear in Ready column, they're available for pickup</li> <li>Move to In Progress when starting work</li> <li>Reference the issue number in pull requests and commits</li> </ol>"},{"location":"workflow/READINESS_AUDIT_RESULTS/#quality-metrics","title":"Quality Metrics","text":"<p>After moving issues to Ready, track these metrics:</p> <ul> <li>Time in Ready: How long until picked up for development</li> <li>Completion accuracy: Did the issue match the implementation?</li> <li>Rework rate: Did completed issues require significant changes?</li> <li>Team satisfaction: Did developers find the Ready issues clear?</li> </ul> <p>Adjust readiness criteria based on results to improve quality over time.</p>"},{"location":"workflow/READINESS_AUDIT_RESULTS/#questions-or-issues","title":"Questions or Issues?","text":"<ul> <li>Process questions: See <code>docs/workflow/issue-readiness.md</code></li> <li>Specific issue questions: Check the issue details and tech lead comments</li> <li>Workflow improvements: Discuss with the product manager/tech lead</li> </ul>"},{"location":"workflow/issue-readiness/","title":"Issue Readiness Workflow","text":""},{"location":"workflow/issue-readiness/#overview","title":"Overview","text":"<p>This document defines the criteria and process for moving issues from Triage to Ready status on the project board. The goal is to ensure only well-defined, unblocked issues are picked up by the team for development.</p> <p>Board Workflow: Triage \u2192 Ready \u2192 In Progress \u2192 Review \u2192 Done</p>"},{"location":"workflow/issue-readiness/#column-definitions-transition-conditions","title":"Column Definitions &amp; Transition Conditions","text":""},{"location":"workflow/issue-readiness/#triage","title":"Triage","text":"<p>Issues in Triage are newly created or need clarification before they can be worked on.</p> <p>Issues stay in Triage if: - Missing required information (acceptance criteria, requirements) - Under stakeholder review or decision-making - Waiting for dependency completion - Blocked by external factors - Need technical approach documentation</p> <p>Move to Triage when: - Issue is first created - Issue returns from Ready due to missing information</p>"},{"location":"workflow/issue-readiness/#ready","title":"Ready","text":"<p>Issues in Ready meet ALL readiness criteria and are approved for development.</p> <p>Issues move to Ready when: - \u2705 Requirements &amp; Acceptance Criteria are clear - \u2705 All dependencies are identified and resolved - \u2705 Technical approach is documented - \u2705 Tech lead has approved - \u2705 Test plan is defined - \u2705 All required labels are applied</p> <p>Issues stay in Ready when: - Waiting for developer assignment - Waiting for sprint planning to include in upcoming sprint</p> <p>Move back to Triage if: - Requirements change significantly - New blockers emerge - Tech approach needs revision</p>"},{"location":"workflow/issue-readiness/#in-progress","title":"In Progress","text":"<p>Issues in In Progress are actively being worked on.</p> <p>Issues move to In Progress when: - Developer is assigned - Work has started - Branch created (for code changes) - Issue is included in current sprint</p>"},{"location":"workflow/issue-readiness/#review","title":"Review","text":"<p>Issues in Review are awaiting feedback or approval before completion.</p> <p>Issues move to Review when: - PR is created (for code work) - Implementation is complete - Tests are passing - Waiting for code review/approval</p>"},{"location":"workflow/issue-readiness/#done","title":"Done","text":"<p>Issues are complete and deployed/released.</p> <p>Issues move to Done when: - PR is merged (for code work) - Deployment is complete (if applicable) - Tests passing in production - Stakeholder verification complete</p>"},{"location":"workflow/issue-readiness/#readiness-criteria-checklist","title":"Readiness Criteria Checklist","text":"<p>All 5 categories below must be complete for an issue to move to Ready:</p>"},{"location":"workflow/issue-readiness/#1-clear-requirements-acceptance-criteria","title":"1. Clear Requirements &amp; Acceptance Criteria","text":"<p>What we're checking: - Title is specific and actionable (e.g., \"Add dark mode toggle to user settings\" vs \"Improve UI\") - Description clearly explains what needs to be done and why - Acceptance criteria are measurable and testable - Edge cases and error scenarios are documented - Related issues, dependencies, and milestones are linked</p> <p>Examples of ready: - \u2705 \"Implement JWT refresh token rotation in authentication flow\"   - Why: Clear scope, specific requirement, measurable - \u2705 \"Add data export to CSV/JSON formats in analytics dashboard\"   - Why: Specific outputs defined, clear use case</p> <p>Examples of NOT ready: - \u274c \"Improve performance\"   - Why: Vague, no metrics, unclear scope - \u274c \"Add new feature\"   - Why: No description of what feature or why</p>"},{"location":"workflow/issue-readiness/#2-dependencies-resolved","title":"2. Dependencies Resolved","text":"<p>What we're checking: - All blocking issues are identified - Blocking issues are either completed or marked as non-critical - Required services/infrastructure are available - Database schema or APIs are ready - Third-party integrations are accessible</p> <p>Examples of ready: - \u2705 \"Integrate Stripe payments\" (Stripe account setup \u2705, API keys configured \u2705) - \u2705 \"Add device metrics dashboard\" (device data endpoint \u2705, real-time subscription \u2705)</p> <p>Examples of NOT ready: - \u274c \"Integrate Home Assistant\" (blocked on #150 \"Setup HA authentication\") - \u274c \"Add farm scheduling\" (blocked on database schema changes in #142)</p>"},{"location":"workflow/issue-readiness/#3-technical-approach-documented","title":"3. Technical Approach Documented","text":"<p>What we're checking: - Implementation strategy is defined (architecture, patterns) - Architecture decisions are explained (why this approach vs alternatives) - File paths for changes are identified - Reference implementations or examples are linked - Performance considerations are noted</p> <p>Examples of ready: - \u2705 \"Add real-time device metrics\" - \"Use WebSocket subscriptions via Supabase realtime. Updates dashboard every 5s.\" - \u2705 \"Refactor farm hierarchy component\" - \"Split into smaller components: FarmCard, RackCard, etc. Use context for state.\"</p> <p>Examples of NOT ready: - \u274c \"Build new settings page\" - No mention of component structure, routing, or state management - \u274c \"Optimize API response time\" - No specific bottleneck identified or approach suggested</p>"},{"location":"workflow/issue-readiness/#4-stakeholder-approval","title":"4. Stakeholder Approval","text":"<p>What we're checking: - Issue has been reviewed by tech lead or project owner - Priority level has been confirmed - Scope has been validated against team capacity - No conflicting requirements exist - Business value/impact is documented</p> <p>Examples of ready: - \u2705 Issue has comment: \"\u2705 Ready for dev - approved by @tech-lead\" - \u2705 Priority confirmed as P0, scope validated for current sprint</p> <p>Examples of NOT ready: - \u274c No tech lead review or approval - \u274c Priority unclear or disputed</p>"},{"location":"workflow/issue-readiness/#5-test-plan-defined","title":"5. Test Plan Defined","text":"<p>What we're checking: - Testing strategy is documented (unit, integration, E2E) - Test cases or scenarios are outlined - Manual testing requirements are noted - Regression test needs identified - Acceptance test criteria match success metrics</p> <p>Examples of ready: - \u2705 \"Unit tests for auth service. E2E test for login flow. Manual: test 2FA codes, password reset.\" - \u2705 \"Jest tests for form validation. Playwright E2E for checkout flow.\"</p> <p>Examples of NOT ready: - \u274c \"Test it\" - No specific test strategy - \u274c No testing details provided</p>"},{"location":"workflow/issue-readiness/#readiness-assessment-scoring","title":"Readiness Assessment Scoring","text":"<p>When in doubt, use this quick scoring rubric:</p> Criteria Not Ready (0) Needs Work (1) Ready (2) Requirements Missing acceptance criteria Partial criteria, some ambiguity Clear, measurable, complete Dependencies Blocking issues not identified Some blockers identified, not resolved All blockers identified, resolved Tech Approach No documentation Vague approach, needs detail Clear strategy, examples linked Approval No tech lead review Awaiting final approval Tech lead approved \u2705 Test Plan No plan mentioned Partial plan, needs detail Complete strategy with test cases <p>Score 10/10: Ready to move to Ready column Score 8-9/10: Good progress, minor gaps - discuss with tech lead Score &lt; 8/10: Stay in Triage, needs more work</p>"},{"location":"workflow/issue-readiness/#transition-workflow-process","title":"Transition Workflow &amp; Process","text":""},{"location":"workflow/issue-readiness/#step-1-self-assessment-team-member","title":"Step 1: Self-Assessment (Team Member)","text":"<ol> <li>Review issue against 5 readiness criteria</li> <li>Complete missing information or sections</li> <li>Add <code>size:</code> and <code>priority-*</code> labels if not present</li> <li>When ready, add label: <code>triage:ready-for-dev</code></li> </ol>"},{"location":"workflow/issue-readiness/#step-2-tech-lead-review-tech-lead-only","title":"Step 2: Tech Lead Review (Tech Lead Only)","text":"<ol> <li>Check issue against all 5 criteria</li> <li>If approved:</li> <li>Add comment: \"\u2705 Ready for dev - approved by @tech-lead\"</li> <li>Add label: <code>triage:approved</code></li> <li>Manually move issue to \"Ready\" column</li> <li>If needs more work:</li> <li>Add label: <code>triage:needs-info</code></li> <li>Add comment with specific gaps to fix</li> <li>Issue stays in Triage</li> <li>If blocked:</li> <li>Add label: <code>triage:blocked</code></li> <li>Add comment explaining blocker and when it will be resolved</li> <li>Issue stays in Triage</li> </ol>"},{"location":"workflow/issue-readiness/#step-3-ready-column","title":"Step 3: Ready Column","text":"<ul> <li>Issue is now available for team members to pick up</li> <li>During sprint planning, team pulls items from Ready column</li> <li>As developer starts work, move to \"In Progress\"</li> </ul>"},{"location":"workflow/issue-readiness/#labels-used","title":"Labels Used","text":"Label Color Purpose Who Sets <code>triage:ready-for-dev</code> Green Issue meets criteria, ready for tech lead review Team member <code>triage:needs-info</code> Yellow Needs clarification or more details Tech lead <code>triage:blocked</code> Red Blocked by dependency or external factor Tech lead <code>triage:approved</code> Blue Tech lead approved, can move to Ready Tech lead <code>priority-high</code> Red P0 - Critical, must do Team member/Tech lead <code>priority-medium</code> Orange P1 - Important, should do Team member/Tech lead <code>priority-low</code> Yellow P2 - Nice to have Team member/Tech lead <code>size: S</code> Light Small task (1-2 days) Team member/Tech lead <code>size: M</code> Light Medium task (3-5 days) Team member/Tech lead <code>size: L</code> Light Large task (1-2 weeks) Team member/Tech lead <code>size: XL</code> Light Extra large (2+ weeks) Team member/Tech lead"},{"location":"workflow/issue-readiness/#common-issues-solutions","title":"Common Issues &amp; Solutions","text":""},{"location":"workflow/issue-readiness/#issue-my-issue-got-labeled-triageneeds-info-what-do-i-do","title":"Issue: \"My issue got labeled <code>triage:needs-info</code> - what do I do?\"","text":"<p>Solution: Tech lead's comment explains what's missing. Add that information to the issue, then ping tech lead in comments when ready for re-review.</p>"},{"location":"workflow/issue-readiness/#issue-my-issue-is-blocked-how-long-will-it-stay-blocked","title":"Issue: \"My issue is blocked - how long will it stay blocked?\"","text":"<p>Solution: Tech lead's comment on the issue will explain the blocker and expected resolution date. Check back when the blocking issue is resolved.</p>"},{"location":"workflow/issue-readiness/#issue-i-have-an-issue-ready-to-move-but-no-tech-lead-available","title":"Issue: \"I have an issue ready to move but no tech lead available\"","text":"<p>Solution: Add the <code>triage:ready-for-dev</code> label and a comment mentioning @tech-lead. They'll review when available. For urgent items, reach out directly in Slack.</p>"},{"location":"workflow/issue-readiness/#issue-what-if-i-disagree-with-the-tech-leads-feedback","title":"Issue: \"What if I disagree with the tech lead's feedback?\"","text":"<p>Solution: Comment on the issue with your reasoning. Discussion is encouraged! The goal is clarity, not gatekeeping.</p>"},{"location":"workflow/issue-readiness/#decision-tree-for-transitions","title":"Decision Tree for Transitions","text":"<pre><code>START: Issue in Triage\n\u2502\n\u251c\u2500 Missing required information?\n\u2502  \u2514\u2500 YES \u2192 Stay in Triage (tag triage:needs-info)\n\u2502  \u2514\u2500 NO \u2192 Continue\n\u2502\n\u251c\u2500 Has blocking dependencies?\n\u2502  \u2514\u2500 YES \u2192 Stay in Triage (tag triage:blocked)\n\u2502  \u2514\u2500 NO \u2192 Continue\n\u2502\n\u251c\u2500 Has acceptance criteria defined?\n\u2502  \u2514\u2500 NO \u2192 Stay in Triage (tag triage:needs-info)\n\u2502  \u2514\u2500 YES \u2192 Continue\n\u2502\n\u251c\u2500 Has technical approach documented?\n\u2502  \u2514\u2500 NO \u2192 Stay in Triage (tag triage:needs-info)\n\u2502  \u2514\u2500 YES \u2192 Continue\n\u2502\n\u251c\u2500 Has test plan defined?\n\u2502  \u2514\u2500 NO \u2192 Stay in Triage (tag triage:needs-info)\n\u2502  \u2514\u2500 YES \u2192 Continue\n\u2502\n\u251c\u2500 Has tech lead approval?\n\u2502  \u2514\u2500 NO \u2192 Waiting (tag triage:ready-for-dev)\n\u2502  \u2514\u2500 YES \u2192 Continue\n\u2502\n\u2514\u2500 READY: Move to Ready column (tag triage:approved)\n</code></pre>"},{"location":"workflow/issue-readiness/#example-moving-an-issue-to-ready","title":"Example: Moving an Issue to Ready","text":""},{"location":"workflow/issue-readiness/#before-triage","title":"Before (Triage)","text":"<pre><code>Issue #42: Add dark mode toggle to user settings\n\n\u274c Acceptance criteria: Vague\n\u274c Dependencies: Not documented\n\u274c Tech approach: Missing\n\u274c Tech lead approval: None\n\u274c Test plan: Missing\n\nLabels: None\nStatus: Triage\n</code></pre>"},{"location":"workflow/issue-readiness/#work-by-team-member","title":"Work by Team Member","text":"<pre><code>Issue #42: Add dark mode toggle to user settings\n\nAcceptance Criteria:\n- [ ] Toggle in settings page header\n- [ ] Stores preference in user profile\n- [ ] Applies theme across all pages\n- [ ] Works on mobile and desktop\n\nDependencies: None identified\nTech Approach: Use CSS custom properties, React context for theme state\nTest Plan: Jest tests for theme context, Playwright E2E for toggle interaction\n</code></pre>"},{"location":"workflow/issue-readiness/#tech-lead-review","title":"Tech Lead Review","text":"<pre><code>\u2705 Ready for dev - approved by @tech-lead\n\nAll criteria met:\n\u2705 Requirements clear\n\u2705 No blockers\n\u2705 Tech approach documented\n\u2705 Test plan defined\n\u2705 Ready for implementation\n</code></pre>"},{"location":"workflow/issue-readiness/#after-ready","title":"After (Ready)","text":"<pre><code>Issue #42: Add dark mode toggle to user settings\n\n\u2705 Complete requirements\n\u2705 No dependencies\n\u2705 Tech approach: Context + CSS variables\n\u2705 Tech lead approved \u2705\n\u2705 Test plan: Unit + E2E\n\nLabels: priority-medium, size: M, triage:approved\nStatus: Ready \u2192 (waiting for sprint planning)\n</code></pre>"},{"location":"workflow/issue-readiness/#metrics-success-criteria","title":"Metrics &amp; Success Criteria","text":"<p>Track these metrics to monitor workflow health:</p> <ul> <li>Triage \u2192 Ready time: &lt; 1 day for HIGH priority, &lt; 3 days for MEDIUM</li> <li>Ready \u2192 In Progress time: Should match sprint planning cycle</li> <li>Issues ready for sprint: 80%+ of planned items meet all criteria</li> <li>Team satisfaction: &gt; 4/5 on clarity of Ready issues</li> <li>Blocker resolution: Average resolution time for blocked issues</li> </ul>"},{"location":"workflow/issue-readiness/#questions","title":"Questions?","text":"<ul> <li>For readiness criteria questions, ask your tech lead</li> <li>For workflow process questions, check this document</li> <li>For project board questions, contact the product manager</li> </ul>"}]}