# nektos/act configuration for local GitHub Actions testing
# See: https://github.com/nektos/act

# Use linux/amd64 architecture (required for M1/M2 Macs)
--container-architecture linux/amd64

# Use a full Ubuntu image that supports most GitHub Actions
-P ubuntu-latest=ghcr.io/catthehacker/ubuntu:act-latest

# Load secrets from .act-secrets file (generated by scripts/create-act-secrets.sh)
--secret-file .act-secrets

# Load environment variables from .env.local
--env-file .env.local

# Reuse containers for faster subsequent runs
--reuse

# NOTE: --bind removed to avoid race conditions with parallel matrix jobs
# Each container gets its own isolated working directory, which is slower
# but prevents coverage database conflicts and .next directory races

# Local artifact server for test results and coverage reports
--artifact-server-path .act/artifacts

# Local cache server for faster dependency installation
--cache-server-path .act/cache
